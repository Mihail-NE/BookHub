var x0=n=>{throw TypeError(n)};var Gp=(n,e,t)=>e.has(n)||x0("Cannot "+t);var U=(n,e,t)=>(Gp(n,e,"read from private field"),t?t.call(n):e.get(n)),Se=(n,e,t)=>e.has(n)?x0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),de=(n,e,t,r)=>(Gp(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ve=(n,e,t)=>(Gp(n,e,"access private method"),t);var Kh=(n,e,t,r)=>({set _(s){de(n,e,s,t)},get _(){return U(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Qp={exports:{}},Eu={},Yp={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function N1(){if(I0)return Ne;I0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function E($){return $===null||typeof $!="object"?null:($=_&&$[_]||$["@@iterator"],typeof $=="function"?$:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,b={};function P($,J,ye){this.props=$,this.context=J,this.refs=b,this.updater=ye||I}P.prototype.isReactComponent={},P.prototype.setState=function($,J){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,J,"setState")},P.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function V(){}V.prototype=P.prototype;function B($,J,ye){this.props=$,this.context=J,this.refs=b,this.updater=ye||I}var q=B.prototype=new V;q.constructor=B,k(q,P.prototype),q.isPureReactComponent=!0;var Y=Array.isArray,Z=Object.prototype.hasOwnProperty,se={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function R($,J,ye){var ke,be={},Fe=null,He=null;if(J!=null)for(ke in J.ref!==void 0&&(He=J.ref),J.key!==void 0&&(Fe=""+J.key),J)Z.call(J,ke)&&!D.hasOwnProperty(ke)&&(be[ke]=J[ke]);var We=arguments.length-2;if(We===1)be.children=ye;else if(1<We){for(var Xe=Array(We),Ot=0;Ot<We;Ot++)Xe[Ot]=arguments[Ot+2];be.children=Xe}if($&&$.defaultProps)for(ke in We=$.defaultProps,We)be[ke]===void 0&&(be[ke]=We[ke]);return{$$typeof:n,type:$,key:Fe,ref:He,props:be,_owner:se.current}}function A($,J){return{$$typeof:n,type:$.type,key:J,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function j($){var J={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ye){return J[ye]})}var z=/\/+/g;function O($,J){return typeof $=="object"&&$!==null&&$.key!=null?j(""+$.key):J.toString(36)}function Qe($,J,ye,ke,be){var Fe=typeof $;(Fe==="undefined"||Fe==="boolean")&&($=null);var He=!1;if($===null)He=!0;else switch(Fe){case"string":case"number":He=!0;break;case"object":switch($.$$typeof){case n:case e:He=!0}}if(He)return He=$,be=be(He),$=ke===""?"."+O(He,0):ke,Y(be)?(ye="",$!=null&&(ye=$.replace(z,"$&/")+"/"),Qe(be,J,ye,"",function(Ot){return Ot})):be!=null&&(L(be)&&(be=A(be,ye+(!be.key||He&&He.key===be.key?"":(""+be.key).replace(z,"$&/")+"/")+$)),J.push(be)),1;if(He=0,ke=ke===""?".":ke+":",Y($))for(var We=0;We<$.length;We++){Fe=$[We];var Xe=ke+O(Fe,We);He+=Qe(Fe,J,ye,Xe,be)}else if(Xe=E($),typeof Xe=="function")for($=Xe.call($),We=0;!(Fe=$.next()).done;)Fe=Fe.value,Xe=ke+O(Fe,We++),He+=Qe(Fe,J,ye,Xe,be);else if(Fe==="object")throw J=String($),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return He}function wt($,J,ye){if($==null)return $;var ke=[],be=0;return Qe($,ke,"","",function(Fe){return J.call(ye,Fe,be++)}),ke}function It($){if($._status===-1){var J=$._result;J=J(),J.then(function(ye){($._status===0||$._status===-1)&&($._status=1,$._result=ye)},function(ye){($._status===0||$._status===-1)&&($._status=2,$._result=ye)}),$._status===-1&&($._status=0,$._result=J)}if($._status===1)return $._result.default;throw $._result}var Re={current:null},ie={transition:null},ge={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ie,ReactCurrentOwner:se};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:wt,forEach:function($,J,ye){wt($,function(){J.apply(this,arguments)},ye)},count:function($){var J=0;return wt($,function(){J++}),J},toArray:function($){return wt($,function(J){return J})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ne.Component=P,Ne.Fragment=t,Ne.Profiler=s,Ne.PureComponent=B,Ne.StrictMode=r,Ne.Suspense=f,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ne.act=le,Ne.cloneElement=function($,J,ye){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ke=k({},$.props),be=$.key,Fe=$.ref,He=$._owner;if(J!=null){if(J.ref!==void 0&&(Fe=J.ref,He=se.current),J.key!==void 0&&(be=""+J.key),$.type&&$.type.defaultProps)var We=$.type.defaultProps;for(Xe in J)Z.call(J,Xe)&&!D.hasOwnProperty(Xe)&&(ke[Xe]=J[Xe]===void 0&&We!==void 0?We[Xe]:J[Xe])}var Xe=arguments.length-2;if(Xe===1)ke.children=ye;else if(1<Xe){We=Array(Xe);for(var Ot=0;Ot<Xe;Ot++)We[Ot]=arguments[Ot+2];ke.children=We}return{$$typeof:n,type:$.type,key:be,ref:Fe,props:ke,_owner:He}},Ne.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},Ne.createElement=R,Ne.createFactory=function($){var J=R.bind(null,$);return J.type=$,J},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function($){return{$$typeof:h,render:$}},Ne.isValidElement=L,Ne.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:It}},Ne.memo=function($,J){return{$$typeof:p,type:$,compare:J===void 0?null:J}},Ne.startTransition=function($){var J=ie.transition;ie.transition={};try{$()}finally{ie.transition=J}},Ne.unstable_act=le,Ne.useCallback=function($,J){return Re.current.useCallback($,J)},Ne.useContext=function($){return Re.current.useContext($)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function($){return Re.current.useDeferredValue($)},Ne.useEffect=function($,J){return Re.current.useEffect($,J)},Ne.useId=function(){return Re.current.useId()},Ne.useImperativeHandle=function($,J,ye){return Re.current.useImperativeHandle($,J,ye)},Ne.useInsertionEffect=function($,J){return Re.current.useInsertionEffect($,J)},Ne.useLayoutEffect=function($,J){return Re.current.useLayoutEffect($,J)},Ne.useMemo=function($,J){return Re.current.useMemo($,J)},Ne.useReducer=function($,J,ye){return Re.current.useReducer($,J,ye)},Ne.useRef=function($){return Re.current.useRef($)},Ne.useState=function($){return Re.current.useState($)},Ne.useSyncExternalStore=function($,J,ye){return Re.current.useSyncExternalStore($,J,ye)},Ne.useTransition=function(){return Re.current.useTransition()},Ne.version="18.3.1",Ne}var S0;function kg(){return S0||(S0=1,Yp.exports=N1()),Yp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function D1(){if(R0)return Eu;R0=1;var n=kg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var v,_={},E=null,I=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(I=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(_[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)_[v]===void 0&&(_[v]=f[v]);return{$$typeof:e,type:h,key:E,ref:I,props:_,_owner:s.current}}return Eu.Fragment=t,Eu.jsx=l,Eu.jsxs=l,Eu}var A0;function O1(){return A0||(A0=1,Qp.exports=D1()),Qp.exports}var T=O1(),Gh={},Xp={exports:{}},En={},Jp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function L1(){return P0||(P0=1,function(n){function e(ie,ge){var le=ie.length;ie.push(ge);e:for(;0<le;){var $=le-1>>>1,J=ie[$];if(0<s(J,ge))ie[$]=ge,ie[le]=J,le=$;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ge=ie[0],le=ie.pop();if(le!==ge){ie[0]=le;e:for(var $=0,J=ie.length,ye=J>>>1;$<ye;){var ke=2*($+1)-1,be=ie[ke],Fe=ke+1,He=ie[Fe];if(0>s(be,le))Fe<J&&0>s(He,be)?(ie[$]=He,ie[Fe]=le,$=Fe):(ie[$]=be,ie[ke]=le,$=ke);else if(Fe<J&&0>s(He,le))ie[$]=He,ie[Fe]=le,$=Fe;else break e}}return ge}function s(ie,ge){var le=ie.sortIndex-ge.sortIndex;return le!==0?le:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],v=1,_=null,E=3,I=!1,k=!1,b=!1,P=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(ie){for(var ge=t(p);ge!==null;){if(ge.callback===null)r(p);else if(ge.startTime<=ie)r(p),ge.sortIndex=ge.expirationTime,e(f,ge);else break;ge=t(p)}}function Y(ie){if(b=!1,q(ie),!k)if(t(f)!==null)k=!0,It(Z);else{var ge=t(p);ge!==null&&Re(Y,ge.startTime-ie)}}function Z(ie,ge){k=!1,b&&(b=!1,V(R),R=-1),I=!0;var le=E;try{for(q(ge),_=t(f);_!==null&&(!(_.expirationTime>ge)||ie&&!j());){var $=_.callback;if(typeof $=="function"){_.callback=null,E=_.priorityLevel;var J=$(_.expirationTime<=ge);ge=n.unstable_now(),typeof J=="function"?_.callback=J:_===t(f)&&r(f),q(ge)}else r(f);_=t(f)}if(_!==null)var ye=!0;else{var ke=t(p);ke!==null&&Re(Y,ke.startTime-ge),ye=!1}return ye}finally{_=null,E=le,I=!1}}var se=!1,D=null,R=-1,A=5,L=-1;function j(){return!(n.unstable_now()-L<A)}function z(){if(D!==null){var ie=n.unstable_now();L=ie;var ge=!0;try{ge=D(!0,ie)}finally{ge?O():(se=!1,D=null)}}else se=!1}var O;if(typeof B=="function")O=function(){B(z)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,wt=Qe.port2;Qe.port1.onmessage=z,O=function(){wt.postMessage(null)}}else O=function(){P(z,0)};function It(ie){D=ie,se||(se=!0,O())}function Re(ie,ge){R=P(function(){ie(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||I||(k=!0,It(Z))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ie){switch(E){case 1:case 2:case 3:var ge=3;break;default:ge=E}var le=E;E=ge;try{return ie()}finally{E=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var le=E;E=ie;try{return ge()}finally{E=le}},n.unstable_scheduleCallback=function(ie,ge,le){var $=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?$+le:$):le=$,ie){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=le+J,ie={id:v++,callback:ge,priorityLevel:ie,startTime:le,expirationTime:J,sortIndex:-1},le>$?(ie.sortIndex=le,e(p,ie),t(f)===null&&ie===t(p)&&(b?(V(R),R=-1):b=!0,Re(Y,le-$))):(ie.sortIndex=J,e(f,ie),k||I||(k=!0,It(Z))),ie},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(ie){var ge=E;return function(){var le=E;E=ge;try{return ie.apply(this,arguments)}finally{E=le}}}}(Zp)),Zp}var C0;function V1(){return C0||(C0=1,Jp.exports=L1()),Jp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function M1(){if(k0)return En;k0=1;var n=kg(),e=V1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function E(i){return f.call(_,i)?!0:f.call(v,i)?!1:p.test(i)?_[i]=!0:(v[i]=!0,!1)}function I(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,d){if(o===null||typeof o>"u"||I(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function b(i,o,u,d,m,y,x){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=x}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];P[o]=new b(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(V,B);P[o]=new b(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(V,B);P[o]=new b(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(V,B);P[o]=new b(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function q(i,o,u,d){var m=P.hasOwnProperty(o)?P[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,m,d)&&(u=null),d||m===null?E(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),se=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),j=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ge(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,$;function J(i){if($===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+i}var ye=!1;function ke(i,o){if(!i||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){d=G}i.call(o.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var m=G.stack.split(`
`),y=d.stack.split(`
`),x=m.length-1,N=y.length-1;1<=x&&0<=N&&m[x]!==y[N];)N--;for(;1<=x&&0<=N;x--,N--)if(m[x]!==y[N]){if(x!==1||N!==1)do if(x--,N--,0>N||m[x]!==y[N]){var M=`
`+m[x].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=x&&0<=N);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?J(i):""}function be(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=ke(i.type,!1),i;case 11:return i=ke(i.type.render,!1),i;case 1:return i=ke(i.type,!0),i;default:return""}}function Fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case se:return"Portal";case A:return"Profiler";case R:return"StrictMode";case O:return"Suspense";case Qe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case wt:return o=i.displayName||null,o!==null?o:Fe(i.type)||"Memo";case It:o=i._payload,i=i._init;try{return Fe(i(o))}catch{}}return null}function He(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function We(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ot(i){var o=Xe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Jr(i){i._valueTracker||(i._valueTracker=Ot(i))}function zo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=Xe(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function Li(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function js(i,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function $o(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=We(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Al(i,o){o=o.checked,o!=null&&q(i,"checked",o,!1)}function Pl(i,o){Al(i,o);var u=We(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ho(i,o.type,u):o.hasOwnProperty("defaultValue")&&Ho(i,o.type,We(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Nc(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Ho(i,o,u){(o!=="number"||Li(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Zr=Array.isArray;function ei(i,o,u,d){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&d&&(i[u].defaultSelected=!0)}else{for(u=""+We(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Cl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Wo(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Zr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:We(u)}}function qo(i,o){var u=We(o.value),d=We(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function kl(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function St(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?St(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ti,bl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,m)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ti.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Vi(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Us=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(i){Us.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Fs[o]=Fs[i]})});function Nl(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Fs.hasOwnProperty(i)&&Fs[i]?(""+o).trim():o+"px"}function Dl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=Nl(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,m):i[u]=m}}var Ol=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(i,o){if(o){if(Ol[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Vl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bs=null;function Ko(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Go=null,Ln=null,Tr=null;function Qo(i){if(i=ou(i)){if(typeof Go!="function")throw Error(t(280));var o=i.stateNode;o&&(o=lh(o),Go(i.stateNode,i.type,o))}}function xr(i){Ln?Tr?Tr.push(i):Tr=[i]:Ln=i}function Ml(){if(Ln){var i=Ln,o=Tr;if(Tr=Ln=null,Qo(i),o)for(i=0;i<o.length;i++)Qo(o[i])}}function zs(i,o){return i(o)}function jl(){}var ni=!1;function Fl(i,o,u){if(ni)return i(o,u);ni=!0;try{return zs(i,o,u)}finally{ni=!1,(Ln!==null||Tr!==null)&&(jl(),Ml())}}function gt(i,o){var u=i.stateNode;if(u===null)return null;var d=lh(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Yo=!1;if(h)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Yo=!1}function $s(i,o,u,d,m,y,x,N,M){var G=Array.prototype.slice.call(arguments,3);try{o.apply(u,G)}catch(te){this.onError(te)}}var Hs=!1,Xo=null,er=!1,Ul=null,Tf={onError:function(i){Hs=!0,Xo=i}};function Jo(i,o,u,d,m,y,x,N,M){Hs=!1,Xo=null,$s.apply(Tf,arguments)}function Dc(i,o,u,d,m,y,x,N,M){if(Jo.apply(this,arguments),Hs){if(Hs){var G=Xo;Hs=!1,Xo=null}else throw Error(t(198));er||(er=!0,Ul=G)}}function tr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Ws(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function nr(i){if(tr(i)!==i)throw Error(t(188))}function Oc(i){var o=i.alternate;if(!o){if(o=tr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return nr(m),i;if(y===d)return nr(m),o;y=y.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=y;else{for(var x=!1,N=m.child;N;){if(N===u){x=!0,u=m,d=y;break}if(N===d){x=!0,d=m,u=y;break}N=N.sibling}if(!x){for(N=y.child;N;){if(N===u){x=!0,u=y,d=m;break}if(N===d){x=!0,d=y,u=m;break}N=N.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Bl(i){return i=Oc(i),i!==null?Zo(i):null}function Zo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Zo(i);if(o!==null)return o;i=i.sibling}return null}var ea=e.unstable_scheduleCallback,zl=e.unstable_cancelCallback,Lc=e.unstable_shouldYield,xf=e.unstable_requestPaint,Je=e.unstable_now,Vc=e.unstable_getCurrentPriorityLevel,qs=e.unstable_ImmediatePriority,Mi=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,$l=e.unstable_LowPriority,Mc=e.unstable_IdlePriority,Ks=null,In=null;function jc(i){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Ks,i,void 0,(i.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Uc,Hl=Math.log,Fc=Math.LN2;function Uc(i){return i>>>=0,i===0?32:31-(Hl(i)/Fc|0)|0}var ta=64,na=4194304;function ji(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Gs(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,y=i.pingedLanes,x=u&268435455;if(x!==0){var N=x&~m;N!==0?d=ji(N):(y&=x,y!==0&&(d=ji(y)))}else x=u&~m,x!==0?d=ji(x):y!==0&&(d=ji(y));if(d===0)return 0;if(o!==0&&o!==d&&!(o&m)&&(m=d&-d,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if(d&4&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-an(o),m=1<<u,d|=i[u],o&=~m;return d}function If(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes;0<y;){var x=31-an(y),N=1<<x,M=m[x];M===-1?(!(N&u)||N&d)&&(m[x]=If(N,o)):M<=o&&(i.expiredLanes|=N),y&=~N}}function Sn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Qs(){var i=ta;return ta<<=1,!(ta&4194240)&&(ta=64),i}function Fi(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ui(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-an(o),i[o]=u}function Ye(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-an(u),y=1<<m;o[m]=0,d[m]=-1,i[m]=-1,u&=~y}}function Bi(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-an(u),m=1<<d;m&o|i[d]&o&&(i[d]|=o),u&=~m}}var Le=0;function zi(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Bc,ra,zc,$c,Hc,Wl=!1,Ir=[],Ut=null,rr=null,ir=null,$i=new Map,Mn=new Map,Sr=[],Sf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wc(i,o){switch(i){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":$i.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(o.pointerId)}}function pn(i,o,u,d,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},o!==null&&(o=ou(o),o!==null&&ra(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function Rf(i,o,u,d,m){switch(o){case"focusin":return Ut=pn(Ut,i,o,u,d,m),!0;case"dragenter":return rr=pn(rr,i,o,u,d,m),!0;case"mouseover":return ir=pn(ir,i,o,u,d,m),!0;case"pointerover":var y=m.pointerId;return $i.set(y,pn($i.get(y)||null,i,o,u,d,m)),!0;case"gotpointercapture":return y=m.pointerId,Mn.set(y,pn(Mn.get(y)||null,i,o,u,d,m)),!0}return!1}function qc(i){var o=eo(i.target);if(o!==null){var u=tr(o);if(u!==null){if(o=u.tag,o===13){if(o=Ws(u),o!==null){i.blockedOn=o,Hc(i.priority,function(){zc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ii(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ia(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Bs=d,u.target.dispatchEvent(d),Bs=null}else return o=ou(u),o!==null&&ra(o),i.blockedOn=u,!1;o.shift()}return!0}function Ys(i,o,u){ii(i)&&u.delete(o)}function Kc(){Wl=!1,Ut!==null&&ii(Ut)&&(Ut=null),rr!==null&&ii(rr)&&(rr=null),ir!==null&&ii(ir)&&(ir=null),$i.forEach(Ys),Mn.forEach(Ys)}function sr(i,o){i.blockedOn===o&&(i.blockedOn=null,Wl||(Wl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kc)))}function or(i){function o(m){return sr(m,i)}if(0<Ir.length){sr(Ir[0],i);for(var u=1;u<Ir.length;u++){var d=Ir[u];d.blockedOn===i&&(d.blockedOn=null)}}for(Ut!==null&&sr(Ut,i),rr!==null&&sr(rr,i),ir!==null&&sr(ir,i),$i.forEach(o),Mn.forEach(o),u=0;u<Sr.length;u++)d=Sr[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<Sr.length&&(u=Sr[0],u.blockedOn===null);)qc(u),u.blockedOn===null&&Sr.shift()}var si=Y.ReactCurrentBatchConfig,Hi=!0;function rt(i,o,u,d){var m=Le,y=si.transition;si.transition=null;try{Le=1,ql(i,o,u,d)}finally{Le=m,si.transition=y}}function Af(i,o,u,d){var m=Le,y=si.transition;si.transition=null;try{Le=4,ql(i,o,u,d)}finally{Le=m,si.transition=y}}function ql(i,o,u,d){if(Hi){var m=ia(i,o,u,d);if(m===null)jf(i,o,d,Xs,u),Wc(i,d);else if(Rf(m,i,o,u,d))d.stopPropagation();else if(Wc(i,d),o&4&&-1<Sf.indexOf(i)){for(;m!==null;){var y=ou(m);if(y!==null&&Bc(y),y=ia(i,o,u,d),y===null&&jf(i,o,d,Xs,u),y===m)break;m=y}m!==null&&d.stopPropagation()}else jf(i,o,d,null,u)}}var Xs=null;function ia(i,o,u,d){if(Xs=null,i=Ko(d),i=eo(i),i!==null)if(o=tr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Ws(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Xs=i,null}function Kl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vc()){case qs:return 1;case Mi:return 4;case Vn:case $l:return 16;case Mc:return 536870912;default:return 16}default:return 16}}var Rn=null,sa=null,mn=null;function Gl(){if(mn)return mn;var i,o=sa,u=o.length,d,m="value"in Rn?Rn.value:Rn.textContent,y=m.length;for(i=0;i<u&&o[i]===m[i];i++);var x=u-i;for(d=1;d<=x&&o[u-d]===m[y-d];d++);return mn=m.slice(i,1<d?1-d:void 0)}function oa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Rr(){return!0}function Ql(){return!1}function Bt(i){function o(u,d,m,y,x){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Rr:Ql,this.isPropagationStopped=Ql,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),o}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Bt(ar),Ar=le({},ar,{view:0,detail:0}),Pf=Bt(Ar),la,oi,Wi,Js=le({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wi&&(Wi&&i.type==="mousemove"?(la=i.screenX-Wi.screenX,oi=i.screenY-Wi.screenY):oi=la=0,Wi=i),la)},movementY:function(i){return"movementY"in i?i.movementY:oi}}),ua=Bt(Js),Yl=le({},Js,{dataTransfer:0}),Gc=Bt(Yl),ca=le({},Ar,{relatedTarget:0}),ha=Bt(ca),Qc=le({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),ai=Bt(Qc),Yc=le({},ar,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Xc=Bt(Yc),Jc=le({},ar,{data:0}),Xl=Bt(Jc),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eh(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Zc[i])?!!o[i]:!1}function Pr(){return eh}var c=le({},Ar,{key:function(i){if(i.key){var o=da[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=oa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ln[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(i){return i.type==="keypress"?oa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?oa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Bt(c),w=le({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Bt(w),H=le({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),Q=Bt(H),ae=le({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Bt(ae),At=le({},Js,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Bt(At),Lt=[9,13,27,32],Et=h&&"CompositionEvent"in window,jn=null;h&&"documentMode"in document&&(jn=document.documentMode);var An=h&&"TextEvent"in window&&!jn,Zs=h&&(!Et||jn&&8<jn&&11>=jn),fa=" ",yv=!1;function vv(i,o){switch(i){case"keyup":return Lt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _v(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pa=!1;function kA(i,o){switch(i){case"compositionend":return _v(o);case"keypress":return o.which!==32?null:(yv=!0,fa);case"textInput":return i=o.data,i===fa&&yv?null:i;default:return null}}function bA(i,o){if(pa)return i==="compositionend"||!Et&&vv(i,o)?(i=Gl(),mn=sa=Rn=null,pa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zs&&o.locale!=="ko"?null:o.data;default:return null}}var NA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wv(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!NA[i.type]:o==="textarea"}function Ev(i,o,u,d){xr(d),o=sh(o,"onChange"),0<o.length&&(u=new aa("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Jl=null,Zl=null;function DA(i){Fv(i,0)}function th(i){var o=_a(i);if(zo(o))return i}function OA(i,o){if(i==="change")return o}var Tv=!1;if(h){var Cf;if(h){var kf="oninput"in document;if(!kf){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),kf=typeof xv.oninput=="function"}Cf=kf}else Cf=!1;Tv=Cf&&(!document.documentMode||9<document.documentMode)}function Iv(){Jl&&(Jl.detachEvent("onpropertychange",Sv),Zl=Jl=null)}function Sv(i){if(i.propertyName==="value"&&th(Zl)){var o=[];Ev(o,Zl,i,Ko(i)),Fl(DA,o)}}function LA(i,o,u){i==="focusin"?(Iv(),Jl=o,Zl=u,Jl.attachEvent("onpropertychange",Sv)):i==="focusout"&&Iv()}function VA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return th(Zl)}function MA(i,o){if(i==="click")return th(o)}function jA(i,o){if(i==="input"||i==="change")return th(o)}function FA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var lr=typeof Object.is=="function"?Object.is:FA;function eu(i,o){if(lr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!lr(i[m],o[m]))return!1}return!0}function Rv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Av(i,o){var u=Rv(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Rv(u)}}function Pv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Pv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Cv(){for(var i=window,o=Li();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Li(i.document)}return o}function bf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function UA(i){var o=Cv(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Pv(u.ownerDocument.documentElement,u)){if(d!==null&&bf(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!i.extend&&y>d&&(m=d,d=y,y=m),m=Av(u,y);var x=Av(u,d);m&&x&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(x.node,x.offset)):(o.setEnd(x.node,x.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var BA=h&&"documentMode"in document&&11>=document.documentMode,ma=null,Nf=null,tu=null,Df=!1;function kv(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Df||ma==null||ma!==Li(d)||(d=ma,"selectionStart"in d&&bf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),tu&&eu(tu,d)||(tu=d,d=sh(Nf,"onSelect"),0<d.length&&(o=new aa("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=ma)))}function nh(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ga={animationend:nh("Animation","AnimationEnd"),animationiteration:nh("Animation","AnimationIteration"),animationstart:nh("Animation","AnimationStart"),transitionend:nh("Transition","TransitionEnd")},Of={},bv={};h&&(bv=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function rh(i){if(Of[i])return Of[i];if(!ga[i])return i;var o=ga[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in bv)return Of[i]=o[u];return i}var Nv=rh("animationend"),Dv=rh("animationiteration"),Ov=rh("animationstart"),Lv=rh("transitionend"),Vv=new Map,Mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(i,o){Vv.set(i,o),a(o,[i])}for(var Lf=0;Lf<Mv.length;Lf++){var Vf=Mv[Lf],zA=Vf.toLowerCase(),$A=Vf[0].toUpperCase()+Vf.slice(1);qi(zA,"on"+$A)}qi(Nv,"onAnimationEnd"),qi(Dv,"onAnimationIteration"),qi(Ov,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Lv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function jv(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,Dc(d,o,void 0,i),i.currentTarget=null}function Fv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],m=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var x=d.length-1;0<=x;x--){var N=d[x],M=N.instance,G=N.currentTarget;if(N=N.listener,M!==y&&m.isPropagationStopped())break e;jv(m,N,G),y=M}else for(x=0;x<d.length;x++){if(N=d[x],M=N.instance,G=N.currentTarget,N=N.listener,M!==y&&m.isPropagationStopped())break e;jv(m,N,G),y=M}}}if(er)throw i=Ul,er=!1,Ul=null,i}function et(i,o){var u=o[Hf];u===void 0&&(u=o[Hf]=new Set);var d=i+"__bubble";u.has(d)||(Uv(o,i,2,!1),u.add(d))}function Mf(i,o,u){var d=0;o&&(d|=4),Uv(u,i,d,o)}var ih="_reactListening"+Math.random().toString(36).slice(2);function ru(i){if(!i[ih]){i[ih]=!0,r.forEach(function(u){u!=="selectionchange"&&(HA.has(u)||Mf(u,!1,i),Mf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ih]||(o[ih]=!0,Mf("selectionchange",!1,o))}}function Uv(i,o,u,d){switch(Kl(o)){case 1:var m=rt;break;case 4:m=Af;break;default:m=ql}u=m.bind(null,o,u,i),m=void 0,!Yo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function jf(i,o,u,d,m){var y=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var N=d.stateNode.containerInfo;if(N===m||N.nodeType===8&&N.parentNode===m)break;if(x===4)for(x=d.return;x!==null;){var M=x.tag;if((M===3||M===4)&&(M=x.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;x=x.return}for(;N!==null;){if(x=eo(N),x===null)return;if(M=x.tag,M===5||M===6){d=y=x;continue e}N=N.parentNode}}d=d.return}Fl(function(){var G=y,te=Ko(u),ne=[];e:{var ee=Vv.get(i);if(ee!==void 0){var ue=aa,fe=i;switch(i){case"keypress":if(oa(u)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":fe="focus",ue=ha;break;case"focusout":fe="blur",ue=ha;break;case"beforeblur":case"afterblur":ue=ha;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Q;break;case Nv:case Dv:case Ov:ue=ai;break;case Lv:ue=Ge;break;case"scroll":ue=Pf;break;case"wheel":ue=Ue;break;case"copy":case"cut":case"paste":ue=Xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=S}var pe=(o&4)!==0,yt=!pe&&i==="scroll",W=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var F=G,K;F!==null;){K=F;var oe=K.stateNode;if(K.tag===5&&oe!==null&&(K=oe,W!==null&&(oe=gt(F,W),oe!=null&&pe.push(iu(F,oe,K)))),yt)break;F=F.return}0<pe.length&&(ee=new ue(ee,fe,null,u,te),ne.push({event:ee,listeners:pe}))}}if(!(o&7)){e:{if(ee=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",ee&&u!==Bs&&(fe=u.relatedTarget||u.fromElement)&&(eo(fe)||fe[li]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(fe=u.relatedTarget||u.toElement,ue=G,fe=fe?eo(fe):null,fe!==null&&(yt=tr(fe),fe!==yt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=G),ue!==fe)){if(pe=ua,oe="onMouseLeave",W="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(pe=S,oe="onPointerLeave",W="onPointerEnter",F="pointer"),yt=ue==null?ee:_a(ue),K=fe==null?ee:_a(fe),ee=new pe(oe,F+"leave",ue,u,te),ee.target=yt,ee.relatedTarget=K,oe=null,eo(te)===G&&(pe=new pe(W,F+"enter",fe,u,te),pe.target=K,pe.relatedTarget=yt,oe=pe),yt=oe,ue&&fe)t:{for(pe=ue,W=fe,F=0,K=pe;K;K=ya(K))F++;for(K=0,oe=W;oe;oe=ya(oe))K++;for(;0<F-K;)pe=ya(pe),F--;for(;0<K-F;)W=ya(W),K--;for(;F--;){if(pe===W||W!==null&&pe===W.alternate)break t;pe=ya(pe),W=ya(W)}pe=null}else pe=null;ue!==null&&Bv(ne,ee,ue,pe,!1),fe!==null&&yt!==null&&Bv(ne,yt,fe,pe,!0)}}e:{if(ee=G?_a(G):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var me=OA;else if(wv(ee))if(Tv)me=jA;else{me=VA;var ve=LA}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(me=MA);if(me&&(me=me(i,G))){Ev(ne,me,u,te);break e}ve&&ve(i,ee,G),i==="focusout"&&(ve=ee._wrapperState)&&ve.controlled&&ee.type==="number"&&Ho(ee,"number",ee.value)}switch(ve=G?_a(G):window,i){case"focusin":(wv(ve)||ve.contentEditable==="true")&&(ma=ve,Nf=G,tu=null);break;case"focusout":tu=Nf=ma=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,kv(ne,u,te);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":kv(ne,u,te)}var _e;if(Et)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else pa?vv(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(Zs&&u.locale!=="ko"&&(pa||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&pa&&(_e=Gl()):(Rn=te,sa="value"in Rn?Rn.value:Rn.textContent,pa=!0)),ve=sh(G,Ie),0<ve.length&&(Ie=new Xl(Ie,i,null,u,te),ne.push({event:Ie,listeners:ve}),_e?Ie.data=_e:(_e=_v(u),_e!==null&&(Ie.data=_e)))),(_e=An?kA(i,u):bA(i,u))&&(G=sh(G,"onBeforeInput"),0<G.length&&(te=new Xl("onBeforeInput","beforeinput",null,u,te),ne.push({event:te,listeners:G}),te.data=_e))}Fv(ne,o)})}function iu(i,o,u){return{instance:i,listener:o,currentTarget:u}}function sh(i,o){for(var u=o+"Capture",d=[];i!==null;){var m=i,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=gt(i,u),y!=null&&d.unshift(iu(i,y,m)),y=gt(i,o),y!=null&&d.push(iu(i,y,m))),i=i.return}return d}function ya(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Bv(i,o,u,d,m){for(var y=o._reactName,x=[];u!==null&&u!==d;){var N=u,M=N.alternate,G=N.stateNode;if(M!==null&&M===d)break;N.tag===5&&G!==null&&(N=G,m?(M=gt(u,y),M!=null&&x.unshift(iu(u,M,N))):m||(M=gt(u,y),M!=null&&x.push(iu(u,M,N)))),u=u.return}x.length!==0&&i.push({event:o,listeners:x})}var WA=/\r\n?/g,qA=/\u0000|\uFFFD/g;function zv(i){return(typeof i=="string"?i:""+i).replace(WA,`
`).replace(qA,"")}function oh(i,o,u){if(o=zv(o),zv(i)!==o&&u)throw Error(t(425))}function ah(){}var Ff=null,Uf=null;function Bf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,KA=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(i){return $v.resolve(null).then(i).catch(QA)}:zf;function QA(i){setTimeout(function(){throw i})}function $f(i,o){var u=o,d=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){i.removeChild(m),or(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);or(o)}function Ki(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Hv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var va=Math.random().toString(36).slice(2),Cr="__reactFiber$"+va,su="__reactProps$"+va,li="__reactContainer$"+va,Hf="__reactEvents$"+va,YA="__reactListeners$"+va,XA="__reactHandles$"+va;function eo(i){var o=i[Cr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[li]||u[Cr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Hv(i);i!==null;){if(u=i[Cr])return u;i=Hv(i)}return o}i=u,u=i.parentNode}return null}function ou(i){return i=i[Cr]||i[li],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function lh(i){return i[su]||null}var Wf=[],wa=-1;function Gi(i){return{current:i}}function tt(i){0>wa||(i.current=Wf[wa],Wf[wa]=null,wa--)}function Ze(i,o){wa++,Wf[wa]=i.current,i.current=o}var Qi={},Qt=Gi(Qi),gn=Gi(!1),to=Qi;function Ea(i,o){var u=i.type.contextTypes;if(!u)return Qi;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function yn(i){return i=i.childContextTypes,i!=null}function uh(){tt(gn),tt(Qt)}function Wv(i,o,u){if(Qt.current!==Qi)throw Error(t(168));Ze(Qt,o),Ze(gn,u)}function qv(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,He(i)||"Unknown",m));return le({},u,d)}function ch(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qi,to=Qt.current,Ze(Qt,i),Ze(gn,gn.current),!0}function Kv(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=qv(i,o,to),d.__reactInternalMemoizedMergedChildContext=i,tt(gn),tt(Qt),Ze(Qt,i)):tt(gn),Ze(gn,u)}var ui=null,hh=!1,qf=!1;function Gv(i){ui===null?ui=[i]:ui.push(i)}function JA(i){hh=!0,Gv(i)}function Yi(){if(!qf&&ui!==null){qf=!0;var i=0,o=Le;try{var u=ui;for(Le=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}ui=null,hh=!1}catch(m){throw ui!==null&&(ui=ui.slice(i+1)),ea(qs,Yi),m}finally{Le=o,qf=!1}}return null}var Ta=[],xa=0,dh=null,fh=0,Fn=[],Un=0,no=null,ci=1,hi="";function ro(i,o){Ta[xa++]=fh,Ta[xa++]=dh,dh=i,fh=o}function Qv(i,o,u){Fn[Un++]=ci,Fn[Un++]=hi,Fn[Un++]=no,no=i;var d=ci;i=hi;var m=32-an(d)-1;d&=~(1<<m),u+=1;var y=32-an(o)+m;if(30<y){var x=m-m%5;y=(d&(1<<x)-1).toString(32),d>>=x,m-=x,ci=1<<32-an(o)+m|u<<m|d,hi=y+i}else ci=1<<y|u<<m|d,hi=i}function Kf(i){i.return!==null&&(ro(i,1),Qv(i,1,0))}function Gf(i){for(;i===dh;)dh=Ta[--xa],Ta[xa]=null,fh=Ta[--xa],Ta[xa]=null;for(;i===no;)no=Fn[--Un],Fn[Un]=null,hi=Fn[--Un],Fn[Un]=null,ci=Fn[--Un],Fn[Un]=null}var Pn=null,Cn=null,it=!1,ur=null;function Yv(i,o){var u=Hn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Xv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,Cn=Ki(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,Cn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=no!==null?{id:ci,overflow:hi}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Hn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pn=i,Cn=null,!0):!1;default:return!1}}function Qf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Yf(i){if(it){var o=Cn;if(o){var u=o;if(!Xv(i,o)){if(Qf(i))throw Error(t(418));o=Ki(u.nextSibling);var d=Pn;o&&Xv(i,o)?Yv(d,u):(i.flags=i.flags&-4097|2,it=!1,Pn=i)}}else{if(Qf(i))throw Error(t(418));i.flags=i.flags&-4097|2,it=!1,Pn=i}}}function Jv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function ph(i){if(i!==Pn)return!1;if(!it)return Jv(i),it=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Bf(i.type,i.memoizedProps)),o&&(o=Cn)){if(Qf(i))throw Zv(),Error(t(418));for(;o;)Yv(i,o),o=Ki(o.nextSibling)}if(Jv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Cn=Ki(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Cn=null}}else Cn=Pn?Ki(i.stateNode.nextSibling):null;return!0}function Zv(){for(var i=Cn;i;)i=Ki(i.nextSibling)}function Ia(){Cn=Pn=null,it=!1}function Xf(i){ur===null?ur=[i]:ur.push(i)}var ZA=Y.ReactCurrentBatchConfig;function au(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var m=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(x){var N=m.refs;x===null?delete N[y]:N[y]=x},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function mh(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function e_(i){var o=i._init;return o(i._payload)}function t_(i){function o(W,F){if(i){var K=W.deletions;K===null?(W.deletions=[F],W.flags|=16):K.push(F)}}function u(W,F){if(!i)return null;for(;F!==null;)o(W,F),F=F.sibling;return null}function d(W,F){for(W=new Map;F!==null;)F.key!==null?W.set(F.key,F):W.set(F.index,F),F=F.sibling;return W}function m(W,F){return W=is(W,F),W.index=0,W.sibling=null,W}function y(W,F,K){return W.index=K,i?(K=W.alternate,K!==null?(K=K.index,K<F?(W.flags|=2,F):K):(W.flags|=2,F)):(W.flags|=1048576,F)}function x(W){return i&&W.alternate===null&&(W.flags|=2),W}function N(W,F,K,oe){return F===null||F.tag!==6?(F=zp(K,W.mode,oe),F.return=W,F):(F=m(F,K),F.return=W,F)}function M(W,F,K,oe){var me=K.type;return me===D?te(W,F,K.props.children,oe,K.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===It&&e_(me)===F.type)?(oe=m(F,K.props),oe.ref=au(W,F,K),oe.return=W,oe):(oe=Fh(K.type,K.key,K.props,null,W.mode,oe),oe.ref=au(W,F,K),oe.return=W,oe)}function G(W,F,K,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=$p(K,W.mode,oe),F.return=W,F):(F=m(F,K.children||[]),F.return=W,F)}function te(W,F,K,oe,me){return F===null||F.tag!==7?(F=ho(K,W.mode,oe,me),F.return=W,F):(F=m(F,K),F.return=W,F)}function ne(W,F,K){if(typeof F=="string"&&F!==""||typeof F=="number")return F=zp(""+F,W.mode,K),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Z:return K=Fh(F.type,F.key,F.props,null,W.mode,K),K.ref=au(W,null,F),K.return=W,K;case se:return F=$p(F,W.mode,K),F.return=W,F;case It:var oe=F._init;return ne(W,oe(F._payload),K)}if(Zr(F)||ge(F))return F=ho(F,W.mode,K,null),F.return=W,F;mh(W,F)}return null}function ee(W,F,K,oe){var me=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return me!==null?null:N(W,F,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Z:return K.key===me?M(W,F,K,oe):null;case se:return K.key===me?G(W,F,K,oe):null;case It:return me=K._init,ee(W,F,me(K._payload),oe)}if(Zr(K)||ge(K))return me!==null?null:te(W,F,K,oe,null);mh(W,K)}return null}function ue(W,F,K,oe,me){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return W=W.get(K)||null,N(F,W,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Z:return W=W.get(oe.key===null?K:oe.key)||null,M(F,W,oe,me);case se:return W=W.get(oe.key===null?K:oe.key)||null,G(F,W,oe,me);case It:var ve=oe._init;return ue(W,F,K,ve(oe._payload),me)}if(Zr(oe)||ge(oe))return W=W.get(K)||null,te(F,W,oe,me,null);mh(F,oe)}return null}function fe(W,F,K,oe){for(var me=null,ve=null,_e=F,Ie=F=0,jt=null;_e!==null&&Ie<K.length;Ie++){_e.index>Ie?(jt=_e,_e=null):jt=_e.sibling;var $e=ee(W,_e,K[Ie],oe);if($e===null){_e===null&&(_e=jt);break}i&&_e&&$e.alternate===null&&o(W,_e),F=y($e,F,Ie),ve===null?me=$e:ve.sibling=$e,ve=$e,_e=jt}if(Ie===K.length)return u(W,_e),it&&ro(W,Ie),me;if(_e===null){for(;Ie<K.length;Ie++)_e=ne(W,K[Ie],oe),_e!==null&&(F=y(_e,F,Ie),ve===null?me=_e:ve.sibling=_e,ve=_e);return it&&ro(W,Ie),me}for(_e=d(W,_e);Ie<K.length;Ie++)jt=ue(_e,W,Ie,K[Ie],oe),jt!==null&&(i&&jt.alternate!==null&&_e.delete(jt.key===null?Ie:jt.key),F=y(jt,F,Ie),ve===null?me=jt:ve.sibling=jt,ve=jt);return i&&_e.forEach(function(ss){return o(W,ss)}),it&&ro(W,Ie),me}function pe(W,F,K,oe){var me=ge(K);if(typeof me!="function")throw Error(t(150));if(K=me.call(K),K==null)throw Error(t(151));for(var ve=me=null,_e=F,Ie=F=0,jt=null,$e=K.next();_e!==null&&!$e.done;Ie++,$e=K.next()){_e.index>Ie?(jt=_e,_e=null):jt=_e.sibling;var ss=ee(W,_e,$e.value,oe);if(ss===null){_e===null&&(_e=jt);break}i&&_e&&ss.alternate===null&&o(W,_e),F=y(ss,F,Ie),ve===null?me=ss:ve.sibling=ss,ve=ss,_e=jt}if($e.done)return u(W,_e),it&&ro(W,Ie),me;if(_e===null){for(;!$e.done;Ie++,$e=K.next())$e=ne(W,$e.value,oe),$e!==null&&(F=y($e,F,Ie),ve===null?me=$e:ve.sibling=$e,ve=$e);return it&&ro(W,Ie),me}for(_e=d(W,_e);!$e.done;Ie++,$e=K.next())$e=ue(_e,W,Ie,$e.value,oe),$e!==null&&(i&&$e.alternate!==null&&_e.delete($e.key===null?Ie:$e.key),F=y($e,F,Ie),ve===null?me=$e:ve.sibling=$e,ve=$e);return i&&_e.forEach(function(b1){return o(W,b1)}),it&&ro(W,Ie),me}function yt(W,F,K,oe){if(typeof K=="object"&&K!==null&&K.type===D&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case Z:e:{for(var me=K.key,ve=F;ve!==null;){if(ve.key===me){if(me=K.type,me===D){if(ve.tag===7){u(W,ve.sibling),F=m(ve,K.props.children),F.return=W,W=F;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===It&&e_(me)===ve.type){u(W,ve.sibling),F=m(ve,K.props),F.ref=au(W,ve,K),F.return=W,W=F;break e}u(W,ve);break}else o(W,ve);ve=ve.sibling}K.type===D?(F=ho(K.props.children,W.mode,oe,K.key),F.return=W,W=F):(oe=Fh(K.type,K.key,K.props,null,W.mode,oe),oe.ref=au(W,F,K),oe.return=W,W=oe)}return x(W);case se:e:{for(ve=K.key;F!==null;){if(F.key===ve)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){u(W,F.sibling),F=m(F,K.children||[]),F.return=W,W=F;break e}else{u(W,F);break}else o(W,F);F=F.sibling}F=$p(K,W.mode,oe),F.return=W,W=F}return x(W);case It:return ve=K._init,yt(W,F,ve(K._payload),oe)}if(Zr(K))return fe(W,F,K,oe);if(ge(K))return pe(W,F,K,oe);mh(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,F!==null&&F.tag===6?(u(W,F.sibling),F=m(F,K),F.return=W,W=F):(u(W,F),F=zp(K,W.mode,oe),F.return=W,W=F),x(W)):u(W,F)}return yt}var Sa=t_(!0),n_=t_(!1),gh=Gi(null),yh=null,Ra=null,Jf=null;function Zf(){Jf=Ra=yh=null}function ep(i){var o=gh.current;tt(gh),i._currentValue=o}function tp(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function Aa(i,o){yh=i,Jf=Ra=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(vn=!0),i.firstContext=null)}function Bn(i){var o=i._currentValue;if(Jf!==i)if(i={context:i,memoizedValue:o,next:null},Ra===null){if(yh===null)throw Error(t(308));Ra=i,yh.dependencies={lanes:0,firstContext:i}}else Ra=Ra.next=i;return o}var io=null;function np(i){io===null?io=[i]:io.push(i)}function r_(i,o,u,d){var m=o.interleaved;return m===null?(u.next=u,np(o)):(u.next=m.next,m.next=u),o.interleaved=u,di(i,d)}function di(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Xi=!1;function rp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function fi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ji(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,ze&2){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,di(i,u)}return m=d.interleaved,m===null?(o.next=o,np(d)):(o.next=m.next,m.next=o),d.interleaved=o,di(i,u)}function vh(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Bi(i,u)}}function s_(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=x:y=y.next=x,u=u.next}while(u!==null);y===null?m=y=o:y=y.next=o}else m=y=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function _h(i,o,u,d){var m=i.updateQueue;Xi=!1;var y=m.firstBaseUpdate,x=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var M=N,G=M.next;M.next=null,x===null?y=G:x.next=G,x=M;var te=i.alternate;te!==null&&(te=te.updateQueue,N=te.lastBaseUpdate,N!==x&&(N===null?te.firstBaseUpdate=G:N.next=G,te.lastBaseUpdate=M))}if(y!==null){var ne=m.baseState;x=0,te=G=M=null,N=y;do{var ee=N.lane,ue=N.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var fe=i,pe=N;switch(ee=o,ue=u,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ne=fe.call(ue,ne,ee);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,ee=typeof fe=="function"?fe.call(ue,ne,ee):fe,ee==null)break e;ne=le({},ne,ee);break e;case 2:Xi=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,ee=m.effects,ee===null?m.effects=[N]:ee.push(N))}else ue={eventTime:ue,lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},te===null?(G=te=ue,M=ne):te=te.next=ue,x|=ee;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);if(te===null&&(M=ne),m.baseState=M,m.firstBaseUpdate=G,m.lastBaseUpdate=te,o=m.shared.interleaved,o!==null){m=o;do x|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);ao|=x,i.lanes=x,i.memoizedState=ne}}function o_(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var lu={},kr=Gi(lu),uu=Gi(lu),cu=Gi(lu);function so(i){if(i===lu)throw Error(t(174));return i}function ip(i,o){switch(Ze(cu,o),Ze(uu,i),Ze(kr,lu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Rt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Rt(o,i)}tt(kr),Ze(kr,o)}function Pa(){tt(kr),tt(uu),tt(cu)}function a_(i){so(cu.current);var o=so(kr.current),u=Rt(o,i.type);o!==u&&(Ze(uu,i),Ze(kr,u))}function sp(i){uu.current===i&&(tt(kr),tt(uu))}var st=Gi(0);function wh(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var op=[];function ap(){for(var i=0;i<op.length;i++)op[i]._workInProgressVersionPrimary=null;op.length=0}var Eh=Y.ReactCurrentDispatcher,lp=Y.ReactCurrentBatchConfig,oo=0,ot=null,Pt=null,Vt=null,Th=!1,hu=!1,du=0,e1=0;function Yt(){throw Error(t(321))}function up(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!lr(i[u],o[u]))return!1;return!0}function cp(i,o,u,d,m,y){if(oo=y,ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Eh.current=i===null||i.memoizedState===null?i1:s1,i=u(d,m),hu){y=0;do{if(hu=!1,du=0,25<=y)throw Error(t(301));y+=1,Vt=Pt=null,o.updateQueue=null,Eh.current=o1,i=u(d,m)}while(hu)}if(Eh.current=Sh,o=Pt!==null&&Pt.next!==null,oo=0,Vt=Pt=ot=null,Th=!1,o)throw Error(t(300));return i}function hp(){var i=du!==0;return du=0,i}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ot.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function zn(){if(Pt===null){var i=ot.alternate;i=i!==null?i.memoizedState:null}else i=Pt.next;var o=Vt===null?ot.memoizedState:Vt.next;if(o!==null)Vt=o,Pt=i;else{if(i===null)throw Error(t(310));Pt=i,i={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Vt===null?ot.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function fu(i,o){return typeof o=="function"?o(i):o}function dp(i){var o=zn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=Pt,m=d.baseQueue,y=u.pending;if(y!==null){if(m!==null){var x=m.next;m.next=y.next,y.next=x}d.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,d=d.baseState;var N=x=null,M=null,G=y;do{var te=G.lane;if((oo&te)===te)M!==null&&(M=M.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var ne={lane:te,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};M===null?(N=M=ne,x=d):M=M.next=ne,ot.lanes|=te,ao|=te}G=G.next}while(G!==null&&G!==y);M===null?x=d:M.next=N,lr(d,o.memoizedState)||(vn=!0),o.memoizedState=d,o.baseState=x,o.baseQueue=M,u.lastRenderedState=d}if(i=u.interleaved,i!==null){m=i;do y=m.lane,ot.lanes|=y,ao|=y,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function fp(i){var o=zn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,m=u.pending,y=o.memoizedState;if(m!==null){u.pending=null;var x=m=m.next;do y=i(y,x.action),x=x.next;while(x!==m);lr(y,o.memoizedState)||(vn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,d]}function l_(){}function u_(i,o){var u=ot,d=zn(),m=o(),y=!lr(d.memoizedState,m);if(y&&(d.memoizedState=m,vn=!0),d=d.queue,pp(d_.bind(null,u,d,i),[i]),d.getSnapshot!==o||y||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,pu(9,h_.bind(null,u,d,m,o),void 0,null),Mt===null)throw Error(t(349));oo&30||c_(u,o,m)}return m}function c_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ot.updateQueue,o===null?(o={lastEffect:null,stores:null},ot.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function h_(i,o,u,d){o.value=u,o.getSnapshot=d,f_(o)&&p_(i)}function d_(i,o,u){return u(function(){f_(o)&&p_(i)})}function f_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!lr(i,u)}catch{return!0}}function p_(i){var o=di(i,1);o!==null&&fr(o,i,1,-1)}function m_(i){var o=br();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:i},o.queue=i,i=i.dispatch=r1.bind(null,ot,i),[o.memoizedState,i]}function pu(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=ot.updateQueue,o===null?(o={lastEffect:null,stores:null},ot.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function g_(){return zn().memoizedState}function xh(i,o,u,d){var m=br();ot.flags|=i,m.memoizedState=pu(1|o,u,void 0,d===void 0?null:d)}function Ih(i,o,u,d){var m=zn();d=d===void 0?null:d;var y=void 0;if(Pt!==null){var x=Pt.memoizedState;if(y=x.destroy,d!==null&&up(d,x.deps)){m.memoizedState=pu(o,u,y,d);return}}ot.flags|=i,m.memoizedState=pu(1|o,u,y,d)}function y_(i,o){return xh(8390656,8,i,o)}function pp(i,o){return Ih(2048,8,i,o)}function v_(i,o){return Ih(4,2,i,o)}function __(i,o){return Ih(4,4,i,o)}function w_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function E_(i,o,u){return u=u!=null?u.concat([i]):null,Ih(4,4,w_.bind(null,o,i),u)}function mp(){}function T_(i,o){var u=zn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&up(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function x_(i,o){var u=zn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&up(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function I_(i,o,u){return oo&21?(lr(u,o)||(u=Qs(),ot.lanes|=u,ao|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,vn=!0),i.memoizedState=u)}function t1(i,o){var u=Le;Le=u!==0&&4>u?u:4,i(!0);var d=lp.transition;lp.transition={};try{i(!1),o()}finally{Le=u,lp.transition=d}}function S_(){return zn().memoizedState}function n1(i,o,u){var d=ns(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},R_(i))A_(o,u);else if(u=r_(i,o,u,d),u!==null){var m=cn();fr(u,i,d,m),P_(u,o,d)}}function r1(i,o,u){var d=ns(i),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(R_(i))A_(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var x=o.lastRenderedState,N=y(x,u);if(m.hasEagerState=!0,m.eagerState=N,lr(N,x)){var M=o.interleaved;M===null?(m.next=m,np(o)):(m.next=M.next,M.next=m),o.interleaved=m;return}}catch{}finally{}u=r_(i,o,m,d),u!==null&&(m=cn(),fr(u,i,d,m),P_(u,o,d))}}function R_(i){var o=i.alternate;return i===ot||o!==null&&o===ot}function A_(i,o){hu=Th=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function P_(i,o,u){if(u&4194240){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Bi(i,u)}}var Sh={readContext:Bn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},i1={readContext:Bn,useCallback:function(i,o){return br().memoizedState=[i,o===void 0?null:o],i},useContext:Bn,useEffect:y_,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,xh(4194308,4,w_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return xh(4194308,4,i,o)},useInsertionEffect:function(i,o){return xh(4,2,i,o)},useMemo:function(i,o){var u=br();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=br();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=n1.bind(null,ot,i),[d.memoizedState,i]},useRef:function(i){var o=br();return i={current:i},o.memoizedState=i},useState:m_,useDebugValue:mp,useDeferredValue:function(i){return br().memoizedState=i},useTransition:function(){var i=m_(!1),o=i[0];return i=t1.bind(null,i[1]),br().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=ot,m=br();if(it){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Mt===null)throw Error(t(349));oo&30||c_(d,o,u)}m.memoizedState=u;var y={value:u,getSnapshot:o};return m.queue=y,y_(d_.bind(null,d,y,i),[i]),d.flags|=2048,pu(9,h_.bind(null,d,y,u,o),void 0,null),u},useId:function(){var i=br(),o=Mt.identifierPrefix;if(it){var u=hi,d=ci;u=(d&~(1<<32-an(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=du++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=e1++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},s1={readContext:Bn,useCallback:T_,useContext:Bn,useEffect:pp,useImperativeHandle:E_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:x_,useReducer:dp,useRef:g_,useState:function(){return dp(fu)},useDebugValue:mp,useDeferredValue:function(i){var o=zn();return I_(o,Pt.memoizedState,i)},useTransition:function(){var i=dp(fu)[0],o=zn().memoizedState;return[i,o]},useMutableSource:l_,useSyncExternalStore:u_,useId:S_,unstable_isNewReconciler:!1},o1={readContext:Bn,useCallback:T_,useContext:Bn,useEffect:pp,useImperativeHandle:E_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:x_,useReducer:fp,useRef:g_,useState:function(){return fp(fu)},useDebugValue:mp,useDeferredValue:function(i){var o=zn();return Pt===null?o.memoizedState=i:I_(o,Pt.memoizedState,i)},useTransition:function(){var i=fp(fu)[0],o=zn().memoizedState;return[i,o]},useMutableSource:l_,useSyncExternalStore:u_,useId:S_,unstable_isNewReconciler:!1};function cr(i,o){if(i&&i.defaultProps){o=le({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function gp(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:le({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Rh={isMounted:function(i){return(i=i._reactInternals)?tr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=cn(),m=ns(i),y=fi(d,m);y.payload=o,u!=null&&(y.callback=u),o=Ji(i,y,m),o!==null&&(fr(o,i,m,d),vh(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=cn(),m=ns(i),y=fi(d,m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Ji(i,y,m),o!==null&&(fr(o,i,m,d),vh(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=cn(),d=ns(i),m=fi(u,d);m.tag=2,o!=null&&(m.callback=o),o=Ji(i,m,d),o!==null&&(fr(o,i,d,u),vh(o,i,d))}};function C_(i,o,u,d,m,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,x):o.prototype&&o.prototype.isPureReactComponent?!eu(u,d)||!eu(m,y):!0}function k_(i,o,u){var d=!1,m=Qi,y=o.contextType;return typeof y=="object"&&y!==null?y=Bn(y):(m=yn(o)?to:Qt.current,d=o.contextTypes,y=(d=d!=null)?Ea(i,m):Qi),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Rh,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=y),o}function b_(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&Rh.enqueueReplaceState(o,o.state,null)}function yp(i,o,u,d){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},rp(i);var y=o.contextType;typeof y=="object"&&y!==null?m.context=Bn(y):(y=yn(o)?to:Qt.current,m.context=Ea(i,y)),m.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(gp(i,o,y,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Rh.enqueueReplaceState(m,m.state,null),_h(i,u,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ca(i,o){try{var u="",d=o;do u+=be(d),d=d.return;while(d);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:m,digest:null}}function vp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function _p(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var a1=typeof WeakMap=="function"?WeakMap:Map;function N_(i,o,u){u=fi(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Dh||(Dh=!0,Op=d),_p(i,o)},u}function D_(i,o,u){u=fi(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){_p(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){_p(i,o),typeof d!="function"&&(es===null?es=new Set([this]):es.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})}),u}function O_(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new a1;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),i=E1.bind(null,i,o,u),o.then(i,i))}function L_(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function V_(i,o,u,d,m){return i.mode&1?(i.flags|=65536,i.lanes=m,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=fi(-1,1),o.tag=2,Ji(u,o,1))),u.lanes|=1),i)}var l1=Y.ReactCurrentOwner,vn=!1;function un(i,o,u,d){o.child=i===null?n_(o,null,u,d):Sa(o,i.child,u,d)}function M_(i,o,u,d,m){u=u.render;var y=o.ref;return Aa(o,m),d=cp(i,o,u,d,y,m),u=hp(),i!==null&&!vn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,pi(i,o,m)):(it&&u&&Kf(o),o.flags|=1,un(i,o,d,m),o.child)}function j_(i,o,u,d,m){if(i===null){var y=u.type;return typeof y=="function"&&!Bp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,F_(i,o,y,d,m)):(i=Fh(u.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!(i.lanes&m)){var x=y.memoizedProps;if(u=u.compare,u=u!==null?u:eu,u(x,d)&&i.ref===o.ref)return pi(i,o,m)}return o.flags|=1,i=is(y,d),i.ref=o.ref,i.return=o,o.child=i}function F_(i,o,u,d,m){if(i!==null){var y=i.memoizedProps;if(eu(y,d)&&i.ref===o.ref)if(vn=!1,o.pendingProps=d=y,(i.lanes&m)!==0)i.flags&131072&&(vn=!0);else return o.lanes=i.lanes,pi(i,o,m)}return wp(i,o,u,d,m)}function U_(i,o,u){var d=o.pendingProps,m=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ba,kn),kn|=u;else{if(!(u&1073741824))return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(ba,kn),kn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:u,Ze(ba,kn),kn|=d}else y!==null?(d=y.baseLanes|u,o.memoizedState=null):d=u,Ze(ba,kn),kn|=d;return un(i,o,m,u),o.child}function B_(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function wp(i,o,u,d,m){var y=yn(u)?to:Qt.current;return y=Ea(o,y),Aa(o,m),u=cp(i,o,u,d,y,m),d=hp(),i!==null&&!vn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,pi(i,o,m)):(it&&d&&Kf(o),o.flags|=1,un(i,o,u,m),o.child)}function z_(i,o,u,d,m){if(yn(u)){var y=!0;ch(o)}else y=!1;if(Aa(o,m),o.stateNode===null)Ph(i,o),k_(o,u,d),yp(o,u,d,m),d=!0;else if(i===null){var x=o.stateNode,N=o.memoizedProps;x.props=N;var M=x.context,G=u.contextType;typeof G=="object"&&G!==null?G=Bn(G):(G=yn(u)?to:Qt.current,G=Ea(o,G));var te=u.getDerivedStateFromProps,ne=typeof te=="function"||typeof x.getSnapshotBeforeUpdate=="function";ne||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==d||M!==G)&&b_(o,x,d,G),Xi=!1;var ee=o.memoizedState;x.state=ee,_h(o,d,x,m),M=o.memoizedState,N!==d||ee!==M||gn.current||Xi?(typeof te=="function"&&(gp(o,u,te,d),M=o.memoizedState),(N=Xi||C_(o,u,N,d,ee,M,G))?(ne||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),x.props=d,x.state=M,x.context=G,d=N):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,i_(i,o),N=o.memoizedProps,G=o.type===o.elementType?N:cr(o.type,N),x.props=G,ne=o.pendingProps,ee=x.context,M=u.contextType,typeof M=="object"&&M!==null?M=Bn(M):(M=yn(u)?to:Qt.current,M=Ea(o,M));var ue=u.getDerivedStateFromProps;(te=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==ne||ee!==M)&&b_(o,x,d,M),Xi=!1,ee=o.memoizedState,x.state=ee,_h(o,d,x,m);var fe=o.memoizedState;N!==ne||ee!==fe||gn.current||Xi?(typeof ue=="function"&&(gp(o,u,ue,d),fe=o.memoizedState),(G=Xi||C_(o,u,G,d,ee,fe,M)||!1)?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,fe,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,fe,M)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=fe),x.props=d,x.state=fe,x.context=M,d=G):(typeof x.componentDidUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),d=!1)}return Ep(i,o,u,d,y,m)}function Ep(i,o,u,d,m,y){B_(i,o);var x=(o.flags&128)!==0;if(!d&&!x)return m&&Kv(o,u,!1),pi(i,o,y);d=o.stateNode,l1.current=o;var N=x&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&x?(o.child=Sa(o,i.child,null,y),o.child=Sa(o,null,N,y)):un(i,o,N,y),o.memoizedState=d.state,m&&Kv(o,u,!0),o.child}function $_(i){var o=i.stateNode;o.pendingContext?Wv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Wv(i,o.context,!1),ip(i,o.containerInfo)}function H_(i,o,u,d,m){return Ia(),Xf(m),o.flags|=256,un(i,o,u,d),o.child}var Tp={dehydrated:null,treeContext:null,retryLane:0};function xp(i){return{baseLanes:i,cachePool:null,transitions:null}}function W_(i,o,u){var d=o.pendingProps,m=st.current,y=!1,x=(o.flags&128)!==0,N;if((N=x)||(N=i!==null&&i.memoizedState===null?!1:(m&2)!==0),N?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),Ze(st,m&1),i===null)return Yf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(x=d.children,i=d.fallback,y?(d=o.mode,y=o.child,x={mode:"hidden",children:x},!(d&1)&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Uh(x,d,0,null),i=ho(i,d,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=xp(u),o.memoizedState=Tp,i):Ip(o,x));if(m=i.memoizedState,m!==null&&(N=m.dehydrated,N!==null))return u1(i,o,x,d,N,m,u);if(y){y=d.fallback,x=o.mode,m=i.child,N=m.sibling;var M={mode:"hidden",children:d.children};return!(x&1)&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=is(m,M),d.subtreeFlags=m.subtreeFlags&14680064),N!==null?y=is(N,y):(y=ho(y,x,u,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,x=i.child.memoizedState,x=x===null?xp(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=i.childLanes&~u,o.memoizedState=Tp,d}return y=i.child,i=y.sibling,d=is(y,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Ip(i,o){return o=Uh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ah(i,o,u,d){return d!==null&&Xf(d),Sa(o,i.child,null,u),i=Ip(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function u1(i,o,u,d,m,y,x){if(u)return o.flags&256?(o.flags&=-257,d=vp(Error(t(422))),Ah(i,o,x,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,m=o.mode,d=Uh({mode:"visible",children:d.children},m,0,null),y=ho(y,m,x,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,o.mode&1&&Sa(o,i.child,null,x),o.child.memoizedState=xp(x),o.memoizedState=Tp,y);if(!(o.mode&1))return Ah(i,o,x,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var N=d.dgst;return d=N,y=Error(t(419)),d=vp(y,d,void 0),Ah(i,o,x,d)}if(N=(x&i.childLanes)!==0,vn||N){if(d=Mt,d!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(d.suspendedLanes|x)?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,di(i,m),fr(d,i,m,-1))}return Up(),d=vp(Error(t(421))),Ah(i,o,x,d)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=T1.bind(null,i),m._reactRetry=o,null):(i=y.treeContext,Cn=Ki(m.nextSibling),Pn=o,it=!0,ur=null,i!==null&&(Fn[Un++]=ci,Fn[Un++]=hi,Fn[Un++]=no,ci=i.id,hi=i.overflow,no=o),o=Ip(o,d.children),o.flags|=4096,o)}function q_(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),tp(i.return,o,u)}function Sp(i,o,u,d,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=u,y.tailMode=m)}function K_(i,o,u){var d=o.pendingProps,m=d.revealOrder,y=d.tail;if(un(i,o,d.children,u),d=st.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&q_(i,u,o);else if(i.tag===19)q_(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Ze(st,d),!(o.mode&1))o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&wh(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Sp(o,!1,m,u,y);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&wh(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Sp(o,!0,u,null,y);break;case"together":Sp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ph(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function pi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ao|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=is(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=is(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function c1(i,o,u){switch(o.tag){case 3:$_(o),Ia();break;case 5:a_(o);break;case 1:yn(o.type)&&ch(o);break;case 4:ip(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;Ze(gh,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Ze(st,st.current&1),o.flags|=128,null):u&o.child.childLanes?W_(i,o,u):(Ze(st,st.current&1),i=pi(i,o,u),i!==null?i.sibling:null);Ze(st,st.current&1);break;case 19:if(d=(u&o.childLanes)!==0,i.flags&128){if(d)return K_(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ze(st,st.current),d)break;return null;case 22:case 23:return o.lanes=0,U_(i,o,u)}return pi(i,o,u)}var G_,Rp,Q_,Y_;G_=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Rp=function(){},Q_=function(i,o,u,d){var m=i.memoizedProps;if(m!==d){i=o.stateNode,so(kr.current);var y=null;switch(u){case"input":m=js(i,m),d=js(i,d),y=[];break;case"select":m=le({},m,{value:void 0}),d=le({},d,{value:void 0}),y=[];break;case"textarea":m=Cl(i,m),d=Cl(i,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=ah)}Ll(u,d);var x;u=null;for(G in m)if(!d.hasOwnProperty(G)&&m.hasOwnProperty(G)&&m[G]!=null)if(G==="style"){var N=m[G];for(x in N)N.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in d){var M=d[G];if(N=m!=null?m[G]:void 0,d.hasOwnProperty(G)&&M!==N&&(M!=null||N!=null))if(G==="style")if(N){for(x in N)!N.hasOwnProperty(x)||M&&M.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in M)M.hasOwnProperty(x)&&N[x]!==M[x]&&(u||(u={}),u[x]=M[x])}else u||(y||(y=[]),y.push(G,u)),u=M;else G==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,N=N?N.__html:void 0,M!=null&&N!==M&&(y=y||[]).push(G,M)):G==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(G,""+M):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(M!=null&&G==="onScroll"&&et("scroll",i),y||N===M||(y=[])):(y=y||[]).push(G,M))}u&&(y=y||[]).push("style",u);var G=y;(o.updateQueue=G)&&(o.flags|=4)}},Y_=function(i,o,u,d){u!==d&&(o.flags|=4)};function mu(i,o){if(!it)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Xt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function h1(i,o,u){var d=o.pendingProps;switch(Gf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(o),null;case 1:return yn(o.type)&&uh(),Xt(o),null;case 3:return d=o.stateNode,Pa(),tt(gn),tt(Qt),ap(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(ph(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,ur!==null&&(Mp(ur),ur=null))),Rp(i,o),Xt(o),null;case 5:sp(o);var m=so(cu.current);if(u=o.type,i!==null&&o.stateNode!=null)Q_(i,o,u,d,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return Xt(o),null}if(i=so(kr.current),ph(o)){d=o.stateNode,u=o.type;var y=o.memoizedProps;switch(d[Cr]=o,d[su]=y,i=(o.mode&1)!==0,u){case"dialog":et("cancel",d),et("close",d);break;case"iframe":case"object":case"embed":et("load",d);break;case"video":case"audio":for(m=0;m<nu.length;m++)et(nu[m],d);break;case"source":et("error",d);break;case"img":case"image":case"link":et("error",d),et("load",d);break;case"details":et("toggle",d);break;case"input":$o(d,y),et("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},et("invalid",d);break;case"textarea":Wo(d,y),et("invalid",d)}Ll(u,y),m=null;for(var x in y)if(y.hasOwnProperty(x)){var N=y[x];x==="children"?typeof N=="string"?d.textContent!==N&&(y.suppressHydrationWarning!==!0&&oh(d.textContent,N,i),m=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&oh(d.textContent,N,i),m=["children",""+N]):s.hasOwnProperty(x)&&N!=null&&x==="onScroll"&&et("scroll",d)}switch(u){case"input":Jr(d),Nc(d,y,!0);break;case"textarea":Jr(d),kl(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=ah)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=St(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=x.createElement(u,{is:d.is}):(i=x.createElement(u),u==="select"&&(x=i,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):i=x.createElementNS(i,u),i[Cr]=o,i[su]=d,G_(i,o,!1,!1),o.stateNode=i;e:{switch(x=Vl(u,d),u){case"dialog":et("cancel",i),et("close",i),m=d;break;case"iframe":case"object":case"embed":et("load",i),m=d;break;case"video":case"audio":for(m=0;m<nu.length;m++)et(nu[m],i);m=d;break;case"source":et("error",i),m=d;break;case"img":case"image":case"link":et("error",i),et("load",i),m=d;break;case"details":et("toggle",i),m=d;break;case"input":$o(i,d),m=js(i,d),et("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=le({},d,{value:void 0}),et("invalid",i);break;case"textarea":Wo(i,d),m=Cl(i,d),et("invalid",i);break;default:m=d}Ll(u,m),N=m;for(y in N)if(N.hasOwnProperty(y)){var M=N[y];y==="style"?Dl(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&bl(i,M)):y==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&Vi(i,M):typeof M=="number"&&Vi(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&et("scroll",i):M!=null&&q(i,y,M,x))}switch(u){case"input":Jr(i),Nc(i,d,!1);break;case"textarea":Jr(i),kl(i);break;case"option":d.value!=null&&i.setAttribute("value",""+We(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?ei(i,!!d.multiple,y,!1):d.defaultValue!=null&&ei(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=ah)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Xt(o),null;case 6:if(i&&o.stateNode!=null)Y_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=so(cu.current),so(kr.current),ph(o)){if(d=o.stateNode,u=o.memoizedProps,d[Cr]=o,(y=d.nodeValue!==u)&&(i=Pn,i!==null))switch(i.tag){case 3:oh(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&oh(d.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Cr]=o,o.stateNode=d}return Xt(o),null;case 13:if(tt(st),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(it&&Cn!==null&&o.mode&1&&!(o.flags&128))Zv(),Ia(),o.flags|=98560,y=!1;else if(y=ph(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Cr]=o}else Ia(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Xt(o),y=!1}else ur!==null&&(Mp(ur),ur=null),y=!0;if(!y)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||st.current&1?Ct===0&&(Ct=3):Up())),o.updateQueue!==null&&(o.flags|=4),Xt(o),null);case 4:return Pa(),Rp(i,o),i===null&&ru(o.stateNode.containerInfo),Xt(o),null;case 10:return ep(o.type._context),Xt(o),null;case 17:return yn(o.type)&&uh(),Xt(o),null;case 19:if(tt(st),y=o.memoizedState,y===null)return Xt(o),null;if(d=(o.flags&128)!==0,x=y.rendering,x===null)if(d)mu(y,!1);else{if(Ct!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(x=wh(i),x!==null){for(o.flags|=128,mu(y,!1),d=x.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)y=u,i=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,i=x.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ze(st,st.current&1|2),o.child}i=i.sibling}y.tail!==null&&Je()>Na&&(o.flags|=128,d=!0,mu(y,!1),o.lanes=4194304)}else{if(!d)if(i=wh(x),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),mu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!it)return Xt(o),null}else 2*Je()-y.renderingStartTime>Na&&u!==1073741824&&(o.flags|=128,d=!0,mu(y,!1),o.lanes=4194304);y.isBackwards?(x.sibling=o.child,o.child=x):(u=y.last,u!==null?u.sibling=x:o.child=x,y.last=x)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Je(),o.sibling=null,u=st.current,Ze(st,d?u&1|2:u&1),o):(Xt(o),null);case 22:case 23:return Fp(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?kn&1073741824&&(Xt(o),o.subtreeFlags&6&&(o.flags|=8192)):Xt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function d1(i,o){switch(Gf(o),o.tag){case 1:return yn(o.type)&&uh(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pa(),tt(gn),tt(Qt),ap(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return sp(o),null;case 13:if(tt(st),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ia()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return tt(st),null;case 4:return Pa(),null;case 10:return ep(o.type._context),null;case 22:case 23:return Fp(),null;case 24:return null;default:return null}}var Ch=!1,Jt=!1,f1=typeof WeakSet=="function"?WeakSet:Set,he=null;function ka(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){ct(i,o,d)}else u.current=null}function Ap(i,o,u){try{u()}catch(d){ct(i,o,d)}}var X_=!1;function p1(i,o){if(Ff=Hi,i=Cv(),bf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var x=0,N=-1,M=-1,G=0,te=0,ne=i,ee=null;t:for(;;){for(var ue;ne!==u||m!==0&&ne.nodeType!==3||(N=x+m),ne!==y||d!==0&&ne.nodeType!==3||(M=x+d),ne.nodeType===3&&(x+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)ee=ne,ne=ue;for(;;){if(ne===i)break t;if(ee===u&&++G===m&&(N=x),ee===y&&++te===d&&(M=x),(ue=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ue}u=N===-1||M===-1?null:{start:N,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(Uf={focusedElem:i,selectionRange:u},Hi=!1,he=o;he!==null;)if(o=he,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,he=i;else for(;he!==null;){o=he;try{var fe=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,yt=fe.memoizedState,W=o.stateNode,F=W.getSnapshotBeforeUpdate(o.elementType===o.type?pe:cr(o.type,pe),yt);W.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){ct(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,he=i;break}he=o.return}return fe=X_,X_=!1,fe}function gu(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var y=m.destroy;m.destroy=void 0,y!==void 0&&Ap(o,u,y)}m=m.next}while(m!==d)}}function kh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Pp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function J_(i){var o=i.alternate;o!==null&&(i.alternate=null,J_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Cr],delete o[su],delete o[Hf],delete o[YA],delete o[XA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Z_(i){return i.tag===5||i.tag===3||i.tag===4}function e0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Z_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cp(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ah));else if(d!==4&&(i=i.child,i!==null))for(Cp(i,o,u),i=i.sibling;i!==null;)Cp(i,o,u),i=i.sibling}function kp(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(kp(i,o,u),i=i.sibling;i!==null;)kp(i,o,u),i=i.sibling}var zt=null,hr=!1;function Zi(i,o,u){for(u=u.child;u!==null;)t0(i,o,u),u=u.sibling}function t0(i,o,u){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Ks,u)}catch{}switch(u.tag){case 5:Jt||ka(u,o);case 6:var d=zt,m=hr;zt=null,Zi(i,o,u),zt=d,hr=m,zt!==null&&(hr?(i=zt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):zt.removeChild(u.stateNode));break;case 18:zt!==null&&(hr?(i=zt,u=u.stateNode,i.nodeType===8?$f(i.parentNode,u):i.nodeType===1&&$f(i,u),or(i)):$f(zt,u.stateNode));break;case 4:d=zt,m=hr,zt=u.stateNode.containerInfo,hr=!0,Zi(i,o,u),zt=d,hr=m;break;case 0:case 11:case 14:case 15:if(!Jt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,x=y.destroy;y=y.tag,x!==void 0&&(y&2||y&4)&&Ap(u,o,x),m=m.next}while(m!==d)}Zi(i,o,u);break;case 1:if(!Jt&&(ka(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(N){ct(u,o,N)}Zi(i,o,u);break;case 21:Zi(i,o,u);break;case 22:u.mode&1?(Jt=(d=Jt)||u.memoizedState!==null,Zi(i,o,u),Jt=d):Zi(i,o,u);break;default:Zi(i,o,u)}}function n0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new f1),o.forEach(function(d){var m=x1.bind(null,i,d);u.has(d)||(u.add(d),d.then(m,m))})}}function dr(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var y=i,x=o,N=x;e:for(;N!==null;){switch(N.tag){case 5:zt=N.stateNode,hr=!1;break e;case 3:zt=N.stateNode.containerInfo,hr=!0;break e;case 4:zt=N.stateNode.containerInfo,hr=!0;break e}N=N.return}if(zt===null)throw Error(t(160));t0(y,x,m),zt=null,hr=!1;var M=m.alternate;M!==null&&(M.return=null),m.return=null}catch(G){ct(m,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)r0(o,i),o=o.sibling}function r0(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dr(o,i),Nr(i),d&4){try{gu(3,i,i.return),kh(3,i)}catch(pe){ct(i,i.return,pe)}try{gu(5,i,i.return)}catch(pe){ct(i,i.return,pe)}}break;case 1:dr(o,i),Nr(i),d&512&&u!==null&&ka(u,u.return);break;case 5:if(dr(o,i),Nr(i),d&512&&u!==null&&ka(u,u.return),i.flags&32){var m=i.stateNode;try{Vi(m,"")}catch(pe){ct(i,i.return,pe)}}if(d&4&&(m=i.stateNode,m!=null)){var y=i.memoizedProps,x=u!==null?u.memoizedProps:y,N=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&Al(m,y),Vl(N,x);var G=Vl(N,y);for(x=0;x<M.length;x+=2){var te=M[x],ne=M[x+1];te==="style"?Dl(m,ne):te==="dangerouslySetInnerHTML"?bl(m,ne):te==="children"?Vi(m,ne):q(m,te,ne,G)}switch(N){case"input":Pl(m,y);break;case"textarea":qo(m,y);break;case"select":var ee=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?ei(m,!!y.multiple,ue,!1):ee!==!!y.multiple&&(y.defaultValue!=null?ei(m,!!y.multiple,y.defaultValue,!0):ei(m,!!y.multiple,y.multiple?[]:"",!1))}m[su]=y}catch(pe){ct(i,i.return,pe)}}break;case 6:if(dr(o,i),Nr(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,y=i.memoizedProps;try{m.nodeValue=y}catch(pe){ct(i,i.return,pe)}}break;case 3:if(dr(o,i),Nr(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{or(o.containerInfo)}catch(pe){ct(i,i.return,pe)}break;case 4:dr(o,i),Nr(i);break;case 13:dr(o,i),Nr(i),m=i.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Dp=Je())),d&4&&n0(i);break;case 22:if(te=u!==null&&u.memoizedState!==null,i.mode&1?(Jt=(G=Jt)||te,dr(o,i),Jt=G):dr(o,i),Nr(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!te&&i.mode&1)for(he=i,te=i.child;te!==null;){for(ne=he=te;he!==null;){switch(ee=he,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:gu(4,ee,ee.return);break;case 1:ka(ee,ee.return);var fe=ee.stateNode;if(typeof fe.componentWillUnmount=="function"){d=ee,u=ee.return;try{o=d,fe.props=o.memoizedProps,fe.state=o.memoizedState,fe.componentWillUnmount()}catch(pe){ct(d,u,pe)}}break;case 5:ka(ee,ee.return);break;case 22:if(ee.memoizedState!==null){o0(ne);continue}}ue!==null?(ue.return=ee,he=ue):o0(ne)}te=te.sibling}e:for(te=null,ne=i;;){if(ne.tag===5){if(te===null){te=ne;try{m=ne.stateNode,G?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=ne.stateNode,M=ne.memoizedProps.style,x=M!=null&&M.hasOwnProperty("display")?M.display:null,N.style.display=Nl("display",x))}catch(pe){ct(i,i.return,pe)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(pe){ct(i,i.return,pe)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:dr(o,i),Nr(i),d&4&&n0(i);break;case 21:break;default:dr(o,i),Nr(i)}}function Nr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Z_(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Vi(m,""),d.flags&=-33);var y=e0(i);kp(i,y,m);break;case 3:case 4:var x=d.stateNode.containerInfo,N=e0(i);Cp(i,N,x);break;default:throw Error(t(161))}}catch(M){ct(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function m1(i,o,u){he=i,i0(i)}function i0(i,o,u){for(var d=(i.mode&1)!==0;he!==null;){var m=he,y=m.child;if(m.tag===22&&d){var x=m.memoizedState!==null||Ch;if(!x){var N=m.alternate,M=N!==null&&N.memoizedState!==null||Jt;N=Ch;var G=Jt;if(Ch=x,(Jt=M)&&!G)for(he=m;he!==null;)x=he,M=x.child,x.tag===22&&x.memoizedState!==null?a0(m):M!==null?(M.return=x,he=M):a0(m);for(;y!==null;)he=y,i0(y),y=y.sibling;he=m,Ch=N,Jt=G}s0(i)}else m.subtreeFlags&8772&&y!==null?(y.return=m,he=y):s0(i)}}function s0(i){for(;he!==null;){var o=he;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Jt||kh(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Jt)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:cr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&o_(o,y,d);break;case 3:var x=o.updateQueue;if(x!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}o_(o,x,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var te=G.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&or(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||o.flags&512&&Pp(o)}catch(ee){ct(o,o.return,ee)}}if(o===i){he=null;break}if(u=o.sibling,u!==null){u.return=o.return,he=u;break}he=o.return}}function o0(i){for(;he!==null;){var o=he;if(o===i){he=null;break}var u=o.sibling;if(u!==null){u.return=o.return,he=u;break}he=o.return}}function a0(i){for(;he!==null;){var o=he;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{kh(4,o)}catch(M){ct(o,u,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(M){ct(o,m,M)}}var y=o.return;try{Pp(o)}catch(M){ct(o,y,M)}break;case 5:var x=o.return;try{Pp(o)}catch(M){ct(o,x,M)}}}catch(M){ct(o,o.return,M)}if(o===i){he=null;break}var N=o.sibling;if(N!==null){N.return=o.return,he=N;break}he=o.return}}var g1=Math.ceil,bh=Y.ReactCurrentDispatcher,bp=Y.ReactCurrentOwner,$n=Y.ReactCurrentBatchConfig,ze=0,Mt=null,Tt=null,$t=0,kn=0,ba=Gi(0),Ct=0,yu=null,ao=0,Nh=0,Np=0,vu=null,_n=null,Dp=0,Na=1/0,mi=null,Dh=!1,Op=null,es=null,Oh=!1,ts=null,Lh=0,_u=0,Lp=null,Vh=-1,Mh=0;function cn(){return ze&6?Je():Vh!==-1?Vh:Vh=Je()}function ns(i){return i.mode&1?ze&2&&$t!==0?$t&-$t:ZA.transition!==null?(Mh===0&&(Mh=Qs()),Mh):(i=Le,i!==0||(i=window.event,i=i===void 0?16:Kl(i.type)),i):1}function fr(i,o,u,d){if(50<_u)throw _u=0,Lp=null,Error(t(185));Ui(i,u,d),(!(ze&2)||i!==Mt)&&(i===Mt&&(!(ze&2)&&(Nh|=u),Ct===4&&rs(i,$t)),wn(i,d),u===1&&ze===0&&!(o.mode&1)&&(Na=Je()+500,hh&&Yi()))}function wn(i,o){var u=i.callbackNode;ri(i,o);var d=Gs(i,i===Mt?$t:0);if(d===0)u!==null&&zl(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&zl(u),o===1)i.tag===0?JA(u0.bind(null,i)):Gv(u0.bind(null,i)),GA(function(){!(ze&6)&&Yi()}),u=null;else{switch(zi(d)){case 1:u=qs;break;case 4:u=Mi;break;case 16:u=Vn;break;case 536870912:u=Mc;break;default:u=Vn}u=y0(u,l0.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function l0(i,o){if(Vh=-1,Mh=0,ze&6)throw Error(t(327));var u=i.callbackNode;if(Da()&&i.callbackNode!==u)return null;var d=Gs(i,i===Mt?$t:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=jh(i,d);else{o=d;var m=ze;ze|=2;var y=h0();(Mt!==i||$t!==o)&&(mi=null,Na=Je()+500,uo(i,o));do try{_1();break}catch(N){c0(i,N)}while(!0);Zf(),bh.current=y,ze=m,Tt!==null?o=0:(Mt=null,$t=0,o=Ct)}if(o!==0){if(o===2&&(m=Sn(i),m!==0&&(d=m,o=Vp(i,m))),o===1)throw u=yu,uo(i,0),rs(i,d),wn(i,Je()),u;if(o===6)rs(i,d);else{if(m=i.current.alternate,!(d&30)&&!y1(m)&&(o=jh(i,d),o===2&&(y=Sn(i),y!==0&&(d=y,o=Vp(i,y))),o===1))throw u=yu,uo(i,0),rs(i,d),wn(i,Je()),u;switch(i.finishedWork=m,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:co(i,_n,mi);break;case 3:if(rs(i,d),(d&130023424)===d&&(o=Dp+500-Je(),10<o)){if(Gs(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){cn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=zf(co.bind(null,i,_n,mi),o);break}co(i,_n,mi);break;case 4:if(rs(i,d),(d&4194240)===d)break;for(o=i.eventTimes,m=-1;0<d;){var x=31-an(d);y=1<<x,x=o[x],x>m&&(m=x),d&=~y}if(d=m,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*g1(d/1960))-d,10<d){i.timeoutHandle=zf(co.bind(null,i,_n,mi),d);break}co(i,_n,mi);break;case 5:co(i,_n,mi);break;default:throw Error(t(329))}}}return wn(i,Je()),i.callbackNode===u?l0.bind(null,i):null}function Vp(i,o){var u=vu;return i.current.memoizedState.isDehydrated&&(uo(i,o).flags|=256),i=jh(i,o),i!==2&&(o=_n,_n=u,o!==null&&Mp(o)),i}function Mp(i){_n===null?_n=i:_n.push.apply(_n,i)}function y1(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],y=m.getSnapshot;m=m.value;try{if(!lr(y(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rs(i,o){for(o&=~Np,o&=~Nh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-an(o),d=1<<u;i[u]=-1,o&=~d}}function u0(i){if(ze&6)throw Error(t(327));Da();var o=Gs(i,0);if(!(o&1))return wn(i,Je()),null;var u=jh(i,o);if(i.tag!==0&&u===2){var d=Sn(i);d!==0&&(o=d,u=Vp(i,d))}if(u===1)throw u=yu,uo(i,0),rs(i,o),wn(i,Je()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,co(i,_n,mi),wn(i,Je()),null}function jp(i,o){var u=ze;ze|=1;try{return i(o)}finally{ze=u,ze===0&&(Na=Je()+500,hh&&Yi())}}function lo(i){ts!==null&&ts.tag===0&&!(ze&6)&&Da();var o=ze;ze|=1;var u=$n.transition,d=Le;try{if($n.transition=null,Le=1,i)return i()}finally{Le=d,$n.transition=u,ze=o,!(ze&6)&&Yi()}}function Fp(){kn=ba.current,tt(ba)}function uo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,KA(u)),Tt!==null)for(u=Tt.return;u!==null;){var d=u;switch(Gf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&uh();break;case 3:Pa(),tt(gn),tt(Qt),ap();break;case 5:sp(d);break;case 4:Pa();break;case 13:tt(st);break;case 19:tt(st);break;case 10:ep(d.type._context);break;case 22:case 23:Fp()}u=u.return}if(Mt=i,Tt=i=is(i.current,null),$t=kn=o,Ct=0,yu=null,Np=Nh=ao=0,_n=vu=null,io!==null){for(o=0;o<io.length;o++)if(u=io[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,y=u.pending;if(y!==null){var x=y.next;y.next=m,d.next=x}u.pending=d}io=null}return i}function c0(i,o){do{var u=Tt;try{if(Zf(),Eh.current=Sh,Th){for(var d=ot.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Th=!1}if(oo=0,Vt=Pt=ot=null,hu=!1,du=0,bp.current=null,u===null||u.return===null){Ct=1,yu=o,Tt=null;break}e:{var y=i,x=u.return,N=u,M=o;if(o=$t,N.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var G=M,te=N,ne=te.tag;if(!(te.mode&1)&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=L_(x);if(ue!==null){ue.flags&=-257,V_(ue,x,N,y,o),ue.mode&1&&O_(y,G,o),o=ue,M=G;var fe=o.updateQueue;if(fe===null){var pe=new Set;pe.add(M),o.updateQueue=pe}else fe.add(M);break e}else{if(!(o&1)){O_(y,G,o),Up();break e}M=Error(t(426))}}else if(it&&N.mode&1){var yt=L_(x);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),V_(yt,x,N,y,o),Xf(Ca(M,N));break e}}y=M=Ca(M,N),Ct!==4&&(Ct=2),vu===null?vu=[y]:vu.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var W=N_(y,M,o);s_(y,W);break e;case 1:N=M;var F=y.type,K=y.stateNode;if(!(y.flags&128)&&(typeof F.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(es===null||!es.has(K)))){y.flags|=65536,o&=-o,y.lanes|=o;var oe=D_(y,N,o);s_(y,oe);break e}}y=y.return}while(y!==null)}f0(u)}catch(me){o=me,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function h0(){var i=bh.current;return bh.current=Sh,i===null?Sh:i}function Up(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||!(ao&268435455)&&!(Nh&268435455)||rs(Mt,$t)}function jh(i,o){var u=ze;ze|=2;var d=h0();(Mt!==i||$t!==o)&&(mi=null,uo(i,o));do try{v1();break}catch(m){c0(i,m)}while(!0);if(Zf(),ze=u,bh.current=d,Tt!==null)throw Error(t(261));return Mt=null,$t=0,Ct}function v1(){for(;Tt!==null;)d0(Tt)}function _1(){for(;Tt!==null&&!Lc();)d0(Tt)}function d0(i){var o=g0(i.alternate,i,kn);i.memoizedProps=i.pendingProps,o===null?f0(i):Tt=o,bp.current=null}function f0(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=d1(u,o),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ct=6,Tt=null;return}}else if(u=h1(u,o,kn),u!==null){Tt=u;return}if(o=o.sibling,o!==null){Tt=o;return}Tt=o=i}while(o!==null);Ct===0&&(Ct=5)}function co(i,o,u){var d=Le,m=$n.transition;try{$n.transition=null,Le=1,w1(i,o,u,d)}finally{$n.transition=m,Le=d}return null}function w1(i,o,u,d){do Da();while(ts!==null);if(ze&6)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(Ye(i,y),i===Mt&&(Tt=Mt=null,$t=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Oh||(Oh=!0,y0(Vn,function(){return Da(),null})),y=(u.flags&15990)!==0,u.subtreeFlags&15990||y){y=$n.transition,$n.transition=null;var x=Le;Le=1;var N=ze;ze|=4,bp.current=null,p1(i,u),r0(u,i),UA(Uf),Hi=!!Ff,Uf=Ff=null,i.current=u,m1(u),xf(),ze=N,Le=x,$n.transition=y}else i.current=u;if(Oh&&(Oh=!1,ts=i,Lh=m),y=i.pendingLanes,y===0&&(es=null),jc(u.stateNode),wn(i,Je()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(Dh)throw Dh=!1,i=Op,Op=null,i;return Lh&1&&i.tag!==0&&Da(),y=i.pendingLanes,y&1?i===Lp?_u++:(_u=0,Lp=i):_u=0,Yi(),null}function Da(){if(ts!==null){var i=zi(Lh),o=$n.transition,u=Le;try{if($n.transition=null,Le=16>i?16:i,ts===null)var d=!1;else{if(i=ts,ts=null,Lh=0,ze&6)throw Error(t(331));var m=ze;for(ze|=4,he=i.current;he!==null;){var y=he,x=y.child;if(he.flags&16){var N=y.deletions;if(N!==null){for(var M=0;M<N.length;M++){var G=N[M];for(he=G;he!==null;){var te=he;switch(te.tag){case 0:case 11:case 15:gu(8,te,y)}var ne=te.child;if(ne!==null)ne.return=te,he=ne;else for(;he!==null;){te=he;var ee=te.sibling,ue=te.return;if(J_(te),te===G){he=null;break}if(ee!==null){ee.return=ue,he=ee;break}he=ue}}}var fe=y.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var yt=pe.sibling;pe.sibling=null,pe=yt}while(pe!==null)}}he=y}}if(y.subtreeFlags&2064&&x!==null)x.return=y,he=x;else e:for(;he!==null;){if(y=he,y.flags&2048)switch(y.tag){case 0:case 11:case 15:gu(9,y,y.return)}var W=y.sibling;if(W!==null){W.return=y.return,he=W;break e}he=y.return}}var F=i.current;for(he=F;he!==null;){x=he;var K=x.child;if(x.subtreeFlags&2064&&K!==null)K.return=x,he=K;else e:for(x=F;he!==null;){if(N=he,N.flags&2048)try{switch(N.tag){case 0:case 11:case 15:kh(9,N)}}catch(me){ct(N,N.return,me)}if(N===x){he=null;break e}var oe=N.sibling;if(oe!==null){oe.return=N.return,he=oe;break e}he=N.return}}if(ze=m,Yi(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Ks,i)}catch{}d=!0}return d}finally{Le=u,$n.transition=o}}return!1}function p0(i,o,u){o=Ca(u,o),o=N_(i,o,1),i=Ji(i,o,1),o=cn(),i!==null&&(Ui(i,1,o),wn(i,o))}function ct(i,o,u){if(i.tag===3)p0(i,i,u);else for(;o!==null;){if(o.tag===3){p0(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(es===null||!es.has(d))){i=Ca(u,i),i=D_(o,i,1),o=Ji(o,i,1),i=cn(),o!==null&&(Ui(o,1,i),wn(o,i));break}}o=o.return}}function E1(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=cn(),i.pingedLanes|=i.suspendedLanes&u,Mt===i&&($t&u)===u&&(Ct===4||Ct===3&&($t&130023424)===$t&&500>Je()-Dp?uo(i,0):Np|=u),wn(i,o)}function m0(i,o){o===0&&(i.mode&1?(o=na,na<<=1,!(na&130023424)&&(na=4194304)):o=1);var u=cn();i=di(i,o),i!==null&&(Ui(i,o,u),wn(i,u))}function T1(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),m0(i,u)}function x1(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),m0(i,u)}var g0;g0=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||gn.current)vn=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return vn=!1,c1(i,o,u);vn=!!(i.flags&131072)}else vn=!1,it&&o.flags&1048576&&Qv(o,fh,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Ph(i,o),i=o.pendingProps;var m=Ea(o,Qt.current);Aa(o,u),m=cp(null,o,d,i,m,u);var y=hp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,yn(d)?(y=!0,ch(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,rp(o),m.updater=Rh,o.stateNode=m,m._reactInternals=o,yp(o,d,i,u),o=Ep(null,o,d,!0,y,u)):(o.tag=0,it&&y&&Kf(o),un(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Ph(i,o),i=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=S1(d),i=cr(d,i),m){case 0:o=wp(null,o,d,i,u);break e;case 1:o=z_(null,o,d,i,u);break e;case 11:o=M_(null,o,d,i,u);break e;case 14:o=j_(null,o,d,cr(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:cr(d,m),wp(i,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:cr(d,m),z_(i,o,d,m,u);case 3:e:{if($_(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,m=y.element,i_(i,o),_h(o,d,null,u);var x=o.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=Ca(Error(t(423)),o),o=H_(i,o,d,u,m);break e}else if(d!==m){m=Ca(Error(t(424)),o),o=H_(i,o,d,u,m);break e}else for(Cn=Ki(o.stateNode.containerInfo.firstChild),Pn=o,it=!0,ur=null,u=n_(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ia(),d===m){o=pi(i,o,u);break e}un(i,o,d,u)}o=o.child}return o;case 5:return a_(o),i===null&&Yf(o),d=o.type,m=o.pendingProps,y=i!==null?i.memoizedProps:null,x=m.children,Bf(d,m)?x=null:y!==null&&Bf(d,y)&&(o.flags|=32),B_(i,o),un(i,o,x,u),o.child;case 6:return i===null&&Yf(o),null;case 13:return W_(i,o,u);case 4:return ip(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Sa(o,null,d,u):un(i,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:cr(d,m),M_(i,o,d,m,u);case 7:return un(i,o,o.pendingProps,u),o.child;case 8:return un(i,o,o.pendingProps.children,u),o.child;case 12:return un(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,y=o.memoizedProps,x=m.value,Ze(gh,d._currentValue),d._currentValue=x,y!==null)if(lr(y.value,x)){if(y.children===m.children&&!gn.current){o=pi(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var N=y.dependencies;if(N!==null){x=y.child;for(var M=N.firstContext;M!==null;){if(M.context===d){if(y.tag===1){M=fi(-1,u&-u),M.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var te=G.pending;te===null?M.next=M:(M.next=te.next,te.next=M),G.pending=M}}y.lanes|=u,M=y.alternate,M!==null&&(M.lanes|=u),tp(y.return,u,o),N.lanes|=u;break}M=M.next}}else if(y.tag===10)x=y.type===o.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=u,N=x.alternate,N!==null&&(N.lanes|=u),tp(x,u,o),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===o){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}un(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,Aa(o,u),m=Bn(m),d=d(m),o.flags|=1,un(i,o,d,u),o.child;case 14:return d=o.type,m=cr(d,o.pendingProps),m=cr(d.type,m),j_(i,o,d,m,u);case 15:return F_(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:cr(d,m),Ph(i,o),o.tag=1,yn(d)?(i=!0,ch(o)):i=!1,Aa(o,u),k_(o,d,m),yp(o,d,m,u),Ep(null,o,d,!0,i,u);case 19:return K_(i,o,u);case 22:return U_(i,o,u)}throw Error(t(156,o.tag))};function y0(i,o){return ea(i,o)}function I1(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(i,o,u,d){return new I1(i,o,u,d)}function Bp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function S1(i){if(typeof i=="function")return Bp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===wt)return 14}return 2}function is(i,o){var u=i.alternate;return u===null?(u=Hn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Fh(i,o,u,d,m,y){var x=2;if(d=i,typeof i=="function")Bp(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case D:return ho(u.children,m,y,o);case R:x=8,m|=8;break;case A:return i=Hn(12,u,o,m|2),i.elementType=A,i.lanes=y,i;case O:return i=Hn(13,u,o,m),i.elementType=O,i.lanes=y,i;case Qe:return i=Hn(19,u,o,m),i.elementType=Qe,i.lanes=y,i;case Re:return Uh(u,m,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:x=10;break e;case j:x=9;break e;case z:x=11;break e;case wt:x=14;break e;case It:x=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Hn(x,u,o,m),o.elementType=i,o.type=d,o.lanes=y,o}function ho(i,o,u,d){return i=Hn(7,i,d,o),i.lanes=u,i}function Uh(i,o,u,d){return i=Hn(22,i,d,o),i.elementType=Re,i.lanes=u,i.stateNode={isHidden:!1},i}function zp(i,o,u){return i=Hn(6,i,null,o),i.lanes=u,i}function $p(i,o,u){return o=Hn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function R1(i,o,u,d,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Hp(i,o,u,d,m,y,x,N,M){return i=new R1(i,o,u,N,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Hn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},rp(y),i}function A1(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function v0(i){if(!i)return Qi;i=i._reactInternals;e:{if(tr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(yn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(yn(u))return qv(i,u,o)}return o}function _0(i,o,u,d,m,y,x,N,M){return i=Hp(u,d,!0,i,m,y,x,N,M),i.context=v0(null),u=i.current,d=cn(),m=ns(u),y=fi(d,m),y.callback=o??null,Ji(u,y,m),i.current.lanes=m,Ui(i,m,d),wn(i,d),i}function Bh(i,o,u,d){var m=o.current,y=cn(),x=ns(m);return u=v0(u),o.context===null?o.context=u:o.pendingContext=u,o=fi(y,x),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Ji(m,o,x),i!==null&&(fr(i,m,x,y),vh(i,m,x)),x}function zh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function w0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Wp(i,o){w0(i,o),(i=i.alternate)&&w0(i,o)}var E0=typeof reportError=="function"?reportError:function(i){console.error(i)};function qp(i){this._internalRoot=i}$h.prototype.render=qp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Bh(i,o,null,null)},$h.prototype.unmount=qp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;lo(function(){Bh(null,i,null,null)}),o[li]=null}};function $h(i){this._internalRoot=i}$h.prototype.unstable_scheduleHydration=function(i){if(i){var o=$c();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Sr.length&&o!==0&&o<Sr[u].priority;u++);Sr.splice(u,0,i),u===0&&qc(i)}};function Kp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Hh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function T0(){}function P1(i,o,u,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var G=zh(x);y.call(G)}}var x=_0(o,d,i,0,null,!1,!1,"",T0);return i._reactRootContainer=x,i[li]=x.current,ru(i.nodeType===8?i.parentNode:i),lo(),x}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var N=d;d=function(){var G=zh(M);N.call(G)}}var M=Hp(i,0,!1,null,null,!1,!1,"",T0);return i._reactRootContainer=M,i[li]=M.current,ru(i.nodeType===8?i.parentNode:i),lo(function(){Bh(o,M,u,d)}),M}function Wh(i,o,u,d,m){var y=u._reactRootContainer;if(y){var x=y;if(typeof m=="function"){var N=m;m=function(){var M=zh(x);N.call(M)}}Bh(o,x,i,m)}else x=P1(u,o,i,m,d);return zh(x)}Bc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=ji(o.pendingLanes);u!==0&&(Bi(o,u|1),wn(o,Je()),!(ze&6)&&(Na=Je()+500,Yi()))}break;case 13:lo(function(){var d=di(i,1);if(d!==null){var m=cn();fr(d,i,1,m)}}),Wp(i,1)}},ra=function(i){if(i.tag===13){var o=di(i,134217728);if(o!==null){var u=cn();fr(o,i,134217728,u)}Wp(i,134217728)}},zc=function(i){if(i.tag===13){var o=ns(i),u=di(i,o);if(u!==null){var d=cn();fr(u,i,o,d)}Wp(i,o)}},$c=function(){return Le},Hc=function(i,o){var u=Le;try{return Le=i,o()}finally{Le=u}},Go=function(i,o,u){switch(o){case"input":if(Pl(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var m=lh(d);if(!m)throw Error(t(90));zo(d),Pl(d,m)}}}break;case"textarea":qo(i,u);break;case"select":o=u.value,o!=null&&ei(i,!!u.multiple,o,!1)}},zs=jp,jl=lo;var C1={usingClientEntryPoint:!1,Events:[ou,_a,lh,xr,Ml,jp]},wu={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k1={bundleType:wu.bundleType,version:wu.version,rendererPackageName:wu.rendererPackageName,rendererConfig:wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Bl(i),i===null?null:i.stateNode},findFiberByHostInstance:wu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{Ks=qh.inject(k1),In=qh}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1,En.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kp(o))throw Error(t(200));return A1(i,o,null,u)},En.createRoot=function(i,o){if(!Kp(i))throw Error(t(299));var u=!1,d="",m=E0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Hp(i,1,!1,null,null,u,!1,d,m),i[li]=o.current,ru(i.nodeType===8?i.parentNode:i),new qp(o)},En.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Bl(o),i=i===null?null:i.stateNode,i},En.flushSync=function(i){return lo(i)},En.hydrate=function(i,o,u){if(!Hh(o))throw Error(t(200));return Wh(null,i,o,!0,u)},En.hydrateRoot=function(i,o,u){if(!Kp(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,y="",x=E0;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),o=_0(o,null,i,1,u??null,m,!1,y,x),i[li]=o.current,ru(i),d)for(i=0;i<d.length;i++)u=d[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new $h(o)},En.render=function(i,o,u){if(!Hh(o))throw Error(t(200));return Wh(null,i,o,!1,u)},En.unmountComponentAtNode=function(i){if(!Hh(i))throw Error(t(40));return i._reactRootContainer?(lo(function(){Wh(null,null,i,!1,function(){i._reactRootContainer=null,i[li]=null})}),!0):!1},En.unstable_batchedUpdates=jp,En.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!Hh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Wh(i,o,u,!1,d)},En.version="18.3.1-next-f1338f8080-20240426",En}var b0;function BT(){if(b0)return Xp.exports;b0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xp.exports=M1(),Xp.exports}var N0;function j1(){if(N0)return Gh;N0=1;var n=BT();return Gh.createRoot=n.createRoot,Gh.hydrateRoot=n.hydrateRoot,Gh}var F1=j1(),C=kg();function U1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const Qh=C.forwardRef(U1);function B1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const z1=C.forwardRef(B1);function $1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const bg=C.forwardRef($1);function H1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const W1=C.forwardRef(H1);function q1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const K1=C.forwardRef(q1);function G1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 16.318A4.486 4.486 0 0 0 12.016 15a4.486 4.486 0 0 0-3.198 1.318M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))}const Q1=C.forwardRef(G1);function Y1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const Ng=C.forwardRef(Y1);function X1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const J1=C.forwardRef(X1);function Z1({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const eP=C.forwardRef(Z1);function tP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75v-4.5m0 4.5h4.5m-4.5 0 6-6m-3 18c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 0 1 4.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 0 0-.38 1.21 12.035 12.035 0 0 0 7.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 0 1 1.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 0 1-2.25 2.25h-2.25Z"}))}const nP=C.forwardRef(tP);function rP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const iP=C.forwardRef(rP);function sP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const oP=C.forwardRef(sP);function aP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const zT=C.forwardRef(aP);function lP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const $T=C.forwardRef(lP);function uP({title:n,titleId:e,...t},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const cP=C.forwardRef(uP),hP={cart:[],favorites:[],total:0},dP=(n,e)=>{switch(e.type){case"SET_CART":return{...n,cart:e.payload};case"SET_FAVORITES":return{...n,favorites:e.payload};case"ADD_TO_CART":return n.cart.find(r=>r.id===e.payload.id)?{...n,cart:n.cart.map(r=>r.id===e.payload.id?{...r,quantity:r.quantity+1}:r)}:{...n,cart:[...n.cart,{...e.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...n,cart:n.cart.filter(t=>t.id!==e.payload)};case"CLEAR_CART":return{...n,cart:[]};case"INCREMENT_QUANTITY":return{...n,cart:n.cart.map(t=>t.id===e.payload?{...t,quantity:t.quantity+1}:t),total:n.total+1};case"DECREMENT_QUANTITY":return{...n,cart:n.cart.map(t=>t.id===e.payload?{...t,quantity:t.quantity-1}:t),total:n.total-1};case"ADD_TO_FAVORITES":return n.favorites.find(r=>r.id===e.payload.id)?n:{...n,favorites:[...n.favorites,e.payload]};case"REMOVE_FROM_FAVORITES":return{...n,favorites:n.favorites.filter(t=>t.id!==e.payload)}}},fP=(n,e)=>{const[t,r]=C.useState(()=>{const s=localStorage.getItem(n);return s?JSON.parse(s):e});return C.useEffect(()=>{localStorage.setItem(n,JSON.stringify(t))},[n,t]),[t,r]};var fc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Co=typeof window>"u"||"Deno"in globalThis;function Gn(){}function pP(n,e){return typeof n=="function"?n(e):n}function Pm(n){return typeof n=="number"&&n>=0&&n!==1/0}function HT(n,e){return Math.max(n+(e||0)-Date.now(),0)}function $a(n,e){return typeof n=="function"?n(e):n}function yr(n,e){return typeof n=="function"?n(e):n}function D0(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:h}=n;if(l){if(r){if(e.queryHash!==Dg(l,e.options))return!1}else if(!qu(e.queryKey,l))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||s&&s!==e.state.fetchStatus||a&&!a(e))}function O0(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Wu(e.options.mutationKey)!==Wu(a))return!1}else if(!qu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Dg(n,e){return((e==null?void 0:e.queryKeyHashFn)||Wu)(n)}function Wu(n){return JSON.stringify(n,(e,t)=>km(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function qu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!qu(n[t],e[t])):!1}function WT(n,e){if(n===e)return n;const t=L0(n)&&L0(e);if(t||km(n)&&km(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),l=a.length,h=t?[]:{};let f=0;for(let p=0;p<l;p++){const v=t?p:a[p];(!t&&r.includes(v)||t)&&n[v]===void 0&&e[v]===void 0?(h[v]=void 0,f++):(h[v]=WT(n[v],e[v]),h[v]===n[v]&&n[v]!==void 0&&f++)}return s===l&&f===s?n:h}return e}function Cm(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function L0(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function km(n){if(!V0(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!V0(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function V0(n){return Object.prototype.toString.call(n)==="[object Object]"}function mP(n){return new Promise(e=>{setTimeout(e,n)})}function bm(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?WT(n,e):e}function gP(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function yP(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Og=Symbol();function qT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Og?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var wo,fs,Ga,NT,vP=(NT=class extends fc{constructor(){super();Se(this,wo);Se(this,fs);Se(this,Ga);de(this,Ga,e=>{if(!Co&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){U(this,fs)||this.setEventListener(U(this,Ga))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,fs))==null||e.call(this),de(this,fs,void 0))}setEventListener(e){var t;de(this,Ga,e),(t=U(this,fs))==null||t.call(this),de(this,fs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){U(this,wo)!==e&&(de(this,wo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof U(this,wo)=="boolean"?U(this,wo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wo=new WeakMap,fs=new WeakMap,Ga=new WeakMap,NT),Lg=new vP,Qa,ps,Ya,DT,_P=(DT=class extends fc{constructor(){super();Se(this,Qa,!0);Se(this,ps);Se(this,Ya);de(this,Ya,e=>{if(!Co&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,ps)||this.setEventListener(U(this,Ya))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,ps))==null||e.call(this),de(this,ps,void 0))}setEventListener(e){var t;de(this,Ya,e),(t=U(this,ps))==null||t.call(this),de(this,ps,e(this.setOnline.bind(this)))}setOnline(e){U(this,Qa)!==e&&(de(this,Qa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return U(this,Qa)}},Qa=new WeakMap,ps=new WeakMap,Ya=new WeakMap,DT),Id=new _P;function Nm(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function wP(n){return Math.min(1e3*2**n,3e4)}function KT(n){return(n??"online")==="online"?Id.isOnline():!0}var GT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function em(n){return n instanceof GT}function QT(n){let e=!1,t=0,r=!1,s;const a=Nm(),l=b=>{var P;r||(E(new GT(b)),(P=n.abort)==null||P.call(n))},h=()=>{e=!0},f=()=>{e=!1},p=()=>Lg.isFocused()&&(n.networkMode==="always"||Id.isOnline())&&n.canRun(),v=()=>KT(n.networkMode)&&n.canRun(),_=b=>{var P;r||(r=!0,(P=n.onSuccess)==null||P.call(n,b),s==null||s(),a.resolve(b))},E=b=>{var P;r||(r=!0,(P=n.onError)==null||P.call(n,b),s==null||s(),a.reject(b))},I=()=>new Promise(b=>{var P;s=V=>{(r||p())&&b(V)},(P=n.onPause)==null||P.call(n)}).then(()=>{var b;s=void 0,r||(b=n.onContinue)==null||b.call(n)}),k=()=>{if(r)return;let b;const P=t===0?n.initialPromise:void 0;try{b=P??n.fn()}catch(V){b=Promise.reject(V)}Promise.resolve(b).then(_).catch(V=>{var se;if(r)return;const B=n.retry??(Co?0:3),q=n.retryDelay??wP,Y=typeof q=="function"?q(t,V):q,Z=B===!0||typeof B=="number"&&t<B||typeof B=="function"&&B(t,V);if(e||!Z){E(V);return}t++,(se=n.onFail)==null||se.call(n,t,V),mP(Y).then(()=>p()?void 0:I()).then(()=>{e?E(V):k()})})};return{promise:a,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:h,continueRetry:f,canStart:v,start:()=>(v()?k():I().then(k),a)}}function EP(){let n=[],e=0,t=h=>{h()},r=h=>{h()},s=h=>setTimeout(h,0);const a=h=>{e?n.push(h):s(()=>{t(h)})},l=()=>{const h=n;n=[],h.length&&s(()=>{r(()=>{h.forEach(f=>{t(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||l()}return f},batchCalls:h=>(...f)=>{a(()=>{h(...f)})},schedule:a,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{s=h}}}var qt=EP(),Eo,OT,YT=(OT=class{constructor(){Se(this,Eo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pm(this.gcTime)&&de(this,Eo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Co?1/0:5*60*1e3))}clearGcTimeout(){U(this,Eo)&&(clearTimeout(U(this,Eo)),de(this,Eo,void 0))}},Eo=new WeakMap,OT),Xa,Ja,Kn,en,uc,To,mr,gi,LT,TP=(LT=class extends YT{constructor(t){super();Se(this,mr);Se(this,Xa);Se(this,Ja);Se(this,Kn);Se(this,en);Se(this,uc);Se(this,To);de(this,To,!1),de(this,uc,t.defaultOptions),this.setOptions(t.options),this.observers=[],de(this,Kn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,de(this,Xa,xP(this.options)),this.state=t.state??U(this,Xa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=U(this,en))==null?void 0:t.promise}setOptions(t){this.options={...U(this,uc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,Kn).remove(this)}setData(t,r){const s=bm(this.state.data,t,this.options);return Ve(this,mr,gi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Ve(this,mr,gi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=U(this,en))==null?void 0:s.promise;return(a=U(this,en))==null||a.cancel(t),r?r.then(Gn).catch(Gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Xa))}isActive(){return this.observers.some(t=>yr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Og||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!HT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,en))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,en))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),U(this,Kn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(U(this,en)&&(U(this,To)?U(this,en).cancel({revert:!0}):U(this,en).cancelRetry()),this.scheduleGc()),U(this,Kn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ve(this,mr,gi).call(this,{type:"invalidate"})}fetch(t,r){var p,v,_;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,en))return U(this,en).continueRetry(),U(this,en).promise}if(t&&this.setOptions(t),!this.options.queryFn){const E=this.observers.find(I=>I.options.queryFn);E&&this.setOptions(E.options)}const s=new AbortController,a=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(de(this,To,!0),s.signal)})},l=()=>{const E=qT(this.options,r),I={queryKey:this.queryKey,meta:this.meta};return a(I),de(this,To,!1),this.options.persister?this.options.persister(E,I,this):E(I)},h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};a(h),(p=this.options.behavior)==null||p.onFetch(h,this),de(this,Ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&Ve(this,mr,gi).call(this,{type:"fetch",meta:(_=h.fetchOptions)==null?void 0:_.meta});const f=E=>{var I,k,b,P;em(E)&&E.silent||Ve(this,mr,gi).call(this,{type:"error",error:E}),em(E)||((k=(I=U(this,Kn).config).onError)==null||k.call(I,E,this),(P=(b=U(this,Kn).config).onSettled)==null||P.call(b,this.state.data,E,this)),this.scheduleGc()};return de(this,en,QT({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:E=>{var I,k,b,P;if(E===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(V){f(V);return}(k=(I=U(this,Kn).config).onSuccess)==null||k.call(I,E,this),(P=(b=U(this,Kn).config).onSettled)==null||P.call(b,E,this.state.error,this),this.scheduleGc()},onError:f,onFail:(E,I)=>{Ve(this,mr,gi).call(this,{type:"failed",failureCount:E,error:I})},onPause:()=>{Ve(this,mr,gi).call(this,{type:"pause"})},onContinue:()=>{Ve(this,mr,gi).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),U(this,en).start()}},Xa=new WeakMap,Ja=new WeakMap,Kn=new WeakMap,en=new WeakMap,uc=new WeakMap,To=new WeakMap,mr=new WeakSet,gi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...XT(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return em(a)&&a.revert&&U(this,Ja)?{...U(this,Ja),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),qt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),U(this,Kn).notify({query:this,type:"updated",action:t})})},LT);function XT(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:KT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function xP(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Or,VT,IP=(VT=class extends fc{constructor(e={}){super();Se(this,Or);this.config=e,de(this,Or,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??Dg(s,t);let l=this.get(a);return l||(l=new TP({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){U(this,Or).has(e.queryHash)||(U(this,Or).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=U(this,Or).get(e.queryHash);t&&(e.destroy(),t===e&&U(this,Or).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,Or).get(e)}getAll(){return[...U(this,Or).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D0(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>D0(e,r)):t}notify(e){qt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Or=new WeakMap,VT),Lr,dn,xo,Vr,as,MT,SP=(MT=class extends YT{constructor(t){super();Se(this,Vr);Se(this,Lr);Se(this,dn);Se(this,xo);this.mutationId=t.mutationId,de(this,dn,t.mutationCache),de(this,Lr,[]),this.state=t.state||RP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){U(this,Lr).includes(t)||(U(this,Lr).push(t),this.clearGcTimeout(),U(this,dn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){de(this,Lr,U(this,Lr).filter(r=>r!==t)),this.scheduleGc(),U(this,dn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){U(this,Lr).length||(this.state.status==="pending"?this.scheduleGc():U(this,dn).remove(this))}continue(){var t;return((t=U(this,xo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,h,f,p,v,_,E,I,k,b,P,V,B,q,Y,Z,se,D,R;de(this,xo,QT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,L)=>{Ve(this,Vr,as).call(this,{type:"failed",failureCount:A,error:L})},onPause:()=>{Ve(this,Vr,as).call(this,{type:"pause"})},onContinue:()=>{Ve(this,Vr,as).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,dn).canRun(this)}));const r=this.state.status==="pending",s=!U(this,xo).canStart();try{if(!r){Ve(this,Vr,as).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(a=U(this,dn).config).onMutate)==null?void 0:l.call(a,t,this));const L=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,t));L!==this.state.context&&Ve(this,Vr,as).call(this,{type:"pending",context:L,variables:t,isPaused:s})}const A=await U(this,xo).start();return await((v=(p=U(this,dn).config).onSuccess)==null?void 0:v.call(p,A,t,this.state.context,this)),await((E=(_=this.options).onSuccess)==null?void 0:E.call(_,A,t,this.state.context)),await((k=(I=U(this,dn).config).onSettled)==null?void 0:k.call(I,A,null,this.state.variables,this.state.context,this)),await((P=(b=this.options).onSettled)==null?void 0:P.call(b,A,null,t,this.state.context)),Ve(this,Vr,as).call(this,{type:"success",data:A}),A}catch(A){try{throw await((B=(V=U(this,dn).config).onError)==null?void 0:B.call(V,A,t,this.state.context,this)),await((Y=(q=this.options).onError)==null?void 0:Y.call(q,A,t,this.state.context)),await((se=(Z=U(this,dn).config).onSettled)==null?void 0:se.call(Z,void 0,A,this.state.variables,this.state.context,this)),await((R=(D=this.options).onSettled)==null?void 0:R.call(D,void 0,A,t,this.state.context)),A}finally{Ve(this,Vr,as).call(this,{type:"error",error:A})}}finally{U(this,dn).runNext(this)}}},Lr=new WeakMap,dn=new WeakMap,xo=new WeakMap,Vr=new WeakSet,as=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),qt.batch(()=>{U(this,Lr).forEach(s=>{s.onMutationUpdate(t)}),U(this,dn).notify({mutation:this,type:"updated",action:t})})},MT);function RP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vi,gr,cc,jT,AP=(jT=class extends fc{constructor(e={}){super();Se(this,vi);Se(this,gr);Se(this,cc);this.config=e,de(this,vi,new Set),de(this,gr,new Map),de(this,cc,0)}build(e,t,r){const s=new SP({mutationCache:this,mutationId:++Kh(this,cc)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){U(this,vi).add(e);const t=Yh(e);if(typeof t=="string"){const r=U(this,gr).get(t);r?r.push(e):U(this,gr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(U(this,vi).delete(e)){const t=Yh(e);if(typeof t=="string"){const r=U(this,gr).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&U(this,gr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yh(e);if(typeof t=="string"){const r=U(this,gr).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Yh(e);if(typeof t=="string"){const s=(r=U(this,gr).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qt.batch(()=>{U(this,vi).forEach(e=>{this.notify({type:"removed",mutation:e})}),U(this,vi).clear(),U(this,gr).clear()})}getAll(){return Array.from(U(this,vi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>O0(t,r))}findAll(e={}){return this.getAll().filter(t=>O0(e,t))}notify(e){qt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return qt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Gn))))}},vi=new WeakMap,gr=new WeakMap,cc=new WeakMap,jT);function Yh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function M0(n){return{onFetch:(e,t)=>{var v,_,E,I,k;const r=e.options,s=(E=(_=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:_.fetchMore)==null?void 0:E.direction,a=((I=e.state.data)==null?void 0:I.pages)||[],l=((k=e.state.data)==null?void 0:k.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const p=async()=>{let b=!1;const P=q=>{Object.defineProperty(q,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},V=qT(e.options,e.fetchOptions),B=async(q,Y,Z)=>{if(b)return Promise.reject();if(Y==null&&q.pages.length)return Promise.resolve(q);const se={queryKey:e.queryKey,pageParam:Y,direction:Z?"backward":"forward",meta:e.options.meta};P(se);const D=await V(se),{maxPages:R}=e.options,A=Z?yP:gP;return{pages:A(q.pages,D,R),pageParams:A(q.pageParams,Y,R)}};if(s&&a.length){const q=s==="backward",Y=q?PP:j0,Z={pages:a,pageParams:l},se=Y(r,Z);h=await B(Z,se,q)}else{const q=n??a.length;do{const Y=f===0?l[0]??r.initialPageParam:j0(r,h);if(f>0&&Y==null)break;h=await B(h,Y),f++}while(f<q)}return h};e.options.persister?e.fetchFn=()=>{var b,P;return(P=(b=e.options).persister)==null?void 0:P.call(b,p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function j0(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function PP(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ht,ms,gs,Za,el,ys,tl,nl,FT,CP=(FT=class{constructor(n={}){Se(this,ht);Se(this,ms);Se(this,gs);Se(this,Za);Se(this,el);Se(this,ys);Se(this,tl);Se(this,nl);de(this,ht,n.queryCache||new IP),de(this,ms,n.mutationCache||new AP),de(this,gs,n.defaultOptions||{}),de(this,Za,new Map),de(this,el,new Map),de(this,ys,0)}mount(){Kh(this,ys)._++,U(this,ys)===1&&(de(this,tl,Lg.subscribe(async n=>{n&&(await this.resumePausedMutations(),U(this,ht).onFocus())})),de(this,nl,Id.subscribe(async n=>{n&&(await this.resumePausedMutations(),U(this,ht).onOnline())})))}unmount(){var n,e;Kh(this,ys)._--,U(this,ys)===0&&((n=U(this,tl))==null||n.call(this),de(this,tl,void 0),(e=U(this,nl))==null||e.call(this),de(this,nl,void 0))}isFetching(n){return U(this,ht).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return U(this,ms).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=U(this,ht).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=U(this,ht).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime($a(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return U(this,ht).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=U(this,ht).get(r.queryHash),a=s==null?void 0:s.state.data,l=pP(e,a);if(l!==void 0)return U(this,ht).build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return qt.batch(()=>U(this,ht).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=U(this,ht).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=U(this,ht);qt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=U(this,ht),r={type:"active",...n};return qt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=qt.batch(()=>U(this,ht).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Gn).catch(Gn)}invalidateQueries(n,e={}){return qt.batch(()=>{if(U(this,ht).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=qt.batch(()=>U(this,ht).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(Gn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Gn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=U(this,ht).build(this,e);return t.isStaleByTime($a(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Gn).catch(Gn)}fetchInfiniteQuery(n){return n.behavior=M0(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Gn).catch(Gn)}ensureInfiniteQueryData(n){return n.behavior=M0(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Id.isOnline()?U(this,ms).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,ht)}getMutationCache(){return U(this,ms)}getDefaultOptions(){return U(this,gs)}setDefaultOptions(n){de(this,gs,n)}setQueryDefaults(n,e){U(this,Za).set(Wu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...U(this,Za).values()],t={};return e.forEach(r=>{qu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){U(this,el).set(Wu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...U(this,el).values()];let t={};return e.forEach(r=>{qu(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...U(this,gs).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Dg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Og&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...U(this,gs).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){U(this,ht).clear(),U(this,ms).clear()}},ht=new WeakMap,ms=new WeakMap,gs=new WeakMap,Za=new WeakMap,el=new WeakMap,ys=new WeakMap,tl=new WeakMap,nl=new WeakMap,FT),Tn,Me,hc,fn,Io,rl,vs,Mr,dc,il,sl,So,Ro,_s,ol,qe,Ru,Dm,Om,Lm,Vm,Mm,jm,Fm,JT,UT,kP=(UT=class extends fc{constructor(e,t){super();Se(this,qe);Se(this,Tn);Se(this,Me);Se(this,hc);Se(this,fn);Se(this,Io);Se(this,rl);Se(this,vs);Se(this,Mr);Se(this,dc);Se(this,il);Se(this,sl);Se(this,So);Se(this,Ro);Se(this,_s);Se(this,ol,new Set);this.options=t,de(this,Tn,e),de(this,Mr,null),de(this,vs,Nm()),this.options.experimental_prefetchInRender||U(this,vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,Me).addObserver(this),F0(U(this,Me),this.options)?Ve(this,qe,Ru).call(this):this.updateResult(),Ve(this,qe,Vm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Um(U(this,Me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Um(U(this,Me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ve(this,qe,Mm).call(this),Ve(this,qe,jm).call(this),U(this,Me).removeObserver(this)}setOptions(e,t){const r=this.options,s=U(this,Me);if(this.options=U(this,Tn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yr(this.options.enabled,U(this,Me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ve(this,qe,Fm).call(this),U(this,Me).setOptions(this.options),r._defaulted&&!Cm(this.options,r)&&U(this,Tn).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,Me),observer:this});const a=this.hasListeners();a&&U0(U(this,Me),s,this.options,r)&&Ve(this,qe,Ru).call(this),this.updateResult(t),a&&(U(this,Me)!==s||yr(this.options.enabled,U(this,Me))!==yr(r.enabled,U(this,Me))||$a(this.options.staleTime,U(this,Me))!==$a(r.staleTime,U(this,Me)))&&Ve(this,qe,Dm).call(this);const l=Ve(this,qe,Om).call(this);a&&(U(this,Me)!==s||yr(this.options.enabled,U(this,Me))!==yr(r.enabled,U(this,Me))||l!==U(this,_s))&&Ve(this,qe,Lm).call(this,l)}getOptimisticResult(e){const t=U(this,Tn).getQueryCache().build(U(this,Tn),e),r=this.createResult(t,e);return NP(this,r)&&(de(this,fn,r),de(this,rl,this.options),de(this,Io,U(this,Me).state)),r}getCurrentResult(){return U(this,fn)}trackResult(e,t){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),r}trackProp(e){U(this,ol).add(e)}getCurrentQuery(){return U(this,Me)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=U(this,Tn).defaultQueryOptions(e),r=U(this,Tn).getQueryCache().build(U(this,Tn),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ve(this,qe,Ru).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,fn)))}createResult(e,t){var R;const r=U(this,Me),s=this.options,a=U(this,fn),l=U(this,Io),h=U(this,rl),p=e!==r?e.state:U(this,hc),{state:v}=e;let _={...v},E=!1,I;if(t._optimisticResults){const A=this.hasListeners(),L=!A&&F0(e,t),j=A&&U0(e,r,t,s);(L||j)&&(_={..._,...XT(v.data,e.options)}),t._optimisticResults==="isRestoring"&&(_.fetchStatus="idle")}let{error:k,errorUpdatedAt:b,status:P}=_;if(t.select&&_.data!==void 0)if(a&&_.data===(l==null?void 0:l.data)&&t.select===U(this,dc))I=U(this,il);else try{de(this,dc,t.select),I=t.select(_.data),I=bm(a==null?void 0:a.data,I,t),de(this,il,I),de(this,Mr,null)}catch(A){de(this,Mr,A)}else I=_.data;if(t.placeholderData!==void 0&&I===void 0&&P==="pending"){let A;if(a!=null&&a.isPlaceholderData&&t.placeholderData===(h==null?void 0:h.placeholderData))A=a.data;else if(A=typeof t.placeholderData=="function"?t.placeholderData((R=U(this,sl))==null?void 0:R.state.data,U(this,sl)):t.placeholderData,t.select&&A!==void 0)try{A=t.select(A),de(this,Mr,null)}catch(L){de(this,Mr,L)}A!==void 0&&(P="success",I=bm(a==null?void 0:a.data,A,t),E=!0)}U(this,Mr)&&(k=U(this,Mr),I=U(this,il),b=Date.now(),P="error");const V=_.fetchStatus==="fetching",B=P==="pending",q=P==="error",Y=B&&V,Z=I!==void 0,D={status:P,fetchStatus:_.fetchStatus,isPending:B,isSuccess:P==="success",isError:q,isInitialLoading:Y,isLoading:Y,data:I,dataUpdatedAt:_.dataUpdatedAt,error:k,errorUpdatedAt:b,failureCount:_.fetchFailureCount,failureReason:_.fetchFailureReason,errorUpdateCount:_.errorUpdateCount,isFetched:_.dataUpdateCount>0||_.errorUpdateCount>0,isFetchedAfterMount:_.dataUpdateCount>p.dataUpdateCount||_.errorUpdateCount>p.errorUpdateCount,isFetching:V,isRefetching:V&&!B,isLoadingError:q&&!Z,isPaused:_.fetchStatus==="paused",isPlaceholderData:E,isRefetchError:q&&Z,isStale:Vg(e,t),refetch:this.refetch,promise:U(this,vs)};if(this.options.experimental_prefetchInRender){const A=z=>{D.status==="error"?z.reject(D.error):D.data!==void 0&&z.resolve(D.data)},L=()=>{const z=de(this,vs,D.promise=Nm());A(z)},j=U(this,vs);switch(j.status){case"pending":e.queryHash===r.queryHash&&A(j);break;case"fulfilled":(D.status==="error"||D.data!==j.value)&&L();break;case"rejected":(D.status!=="error"||D.error!==j.reason)&&L();break}}return D}updateResult(e){const t=U(this,fn),r=this.createResult(U(this,Me),this.options);if(de(this,Io,U(this,Me).state),de(this,rl,this.options),U(this,Io).data!==void 0&&de(this,sl,U(this,Me)),Cm(r,t))return;de(this,fn,r);const s={},a=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,h=typeof l=="function"?l():l;if(h==="all"||!h&&!U(this,ol).size)return!0;const f=new Set(h??U(this,ol));return this.options.throwOnError&&f.add("error"),Object.keys(U(this,fn)).some(p=>{const v=p;return U(this,fn)[v]!==t[v]&&f.has(v)})};(e==null?void 0:e.listeners)!==!1&&a()&&(s.listeners=!0),Ve(this,qe,JT).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ve(this,qe,Vm).call(this)}},Tn=new WeakMap,Me=new WeakMap,hc=new WeakMap,fn=new WeakMap,Io=new WeakMap,rl=new WeakMap,vs=new WeakMap,Mr=new WeakMap,dc=new WeakMap,il=new WeakMap,sl=new WeakMap,So=new WeakMap,Ro=new WeakMap,_s=new WeakMap,ol=new WeakMap,qe=new WeakSet,Ru=function(e){Ve(this,qe,Fm).call(this);let t=U(this,Me).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Gn)),t},Dm=function(){Ve(this,qe,Mm).call(this);const e=$a(this.options.staleTime,U(this,Me));if(Co||U(this,fn).isStale||!Pm(e))return;const r=HT(U(this,fn).dataUpdatedAt,e)+1;de(this,So,setTimeout(()=>{U(this,fn).isStale||this.updateResult()},r))},Om=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,Me)):this.options.refetchInterval)??!1},Lm=function(e){Ve(this,qe,jm).call(this),de(this,_s,e),!(Co||yr(this.options.enabled,U(this,Me))===!1||!Pm(U(this,_s))||U(this,_s)===0)&&de(this,Ro,setInterval(()=>{(this.options.refetchIntervalInBackground||Lg.isFocused())&&Ve(this,qe,Ru).call(this)},U(this,_s)))},Vm=function(){Ve(this,qe,Dm).call(this),Ve(this,qe,Lm).call(this,Ve(this,qe,Om).call(this))},Mm=function(){U(this,So)&&(clearTimeout(U(this,So)),de(this,So,void 0))},jm=function(){U(this,Ro)&&(clearInterval(U(this,Ro)),de(this,Ro,void 0))},Fm=function(){const e=U(this,Tn).getQueryCache().build(U(this,Tn),this.options);if(e===U(this,Me))return;const t=U(this,Me);de(this,Me,e),de(this,hc,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},JT=function(e){qt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(U(this,fn))}),U(this,Tn).getQueryCache().notify({query:U(this,Me),type:"observerResultsUpdated"})})},UT);function bP(n,e){return yr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function F0(n,e){return bP(n,e)||n.state.data!==void 0&&Um(n,e,e.refetchOnMount)}function Um(n,e,t){if(yr(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Vg(n,e)}return!1}function U0(n,e,t,r){return(n!==e||yr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Vg(n,t)}function Vg(n,e){return yr(e.enabled,n)!==!1&&n.isStaleByTime($a(e.staleTime,n))}function NP(n,e){return!Cm(n.getCurrentResult(),e)}var ZT=C.createContext(void 0),DP=n=>{const e=C.useContext(ZT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},OP=({client:n,children:e})=>(C.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),T.jsx(ZT.Provider,{value:n,children:e})),ex=C.createContext(!1),LP=()=>C.useContext(ex);ex.Provider;function VP(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var MP=C.createContext(VP()),jP=()=>C.useContext(MP);function FP(n,e){return typeof n=="function"?n(...e):!!n}function B0(){}var UP=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},BP=n=>{C.useEffect(()=>{n.clearReset()},[n])},zP=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&FP(t,[n.error,r]),$P=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},HP=(n,e)=>n.isLoading&&n.isFetching&&!e,WP=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,z0=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function qP(n,e,t){var _,E,I,k,b;const r=DP(),s=LP(),a=jP(),l=r.defaultQueryOptions(n);(E=(_=r.getDefaultOptions().queries)==null?void 0:_._experimental_beforeQuery)==null||E.call(_,l),l._optimisticResults=s?"isRestoring":"optimistic",$P(l),UP(l,a),BP(a);const h=!r.getQueryCache().get(l.queryHash),[f]=C.useState(()=>new e(r,l)),p=f.getOptimisticResult(l),v=!s&&n.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(P=>{const V=v?f.subscribe(qt.batchCalls(P)):B0;return f.updateResult(),V},[f,v]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),C.useEffect(()=>{f.setOptions(l,{listeners:!1})},[l,f]),WP(l,p))throw z0(l,f,a);if(zP({result:p,errorResetBoundary:a,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw p.error;if((k=(I=r.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||k.call(I,l,p),l.experimental_prefetchInRender&&!Co&&HP(p,s)){const P=h?z0(l,f,a):(b=r.getQueryCache().get(l.queryHash))==null?void 0:b.promise;P==null||P.catch(B0).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?p:f.trackResult(p)}function KP(n,e){return qP(n,kP)}const GP="AIzaSyBXhQtZXjWIiWQKI_7cJaVb40WRz2-cwo4",QP="https://www.googleapis.com/books/v1/volumes",YP="psychology",XP="ru",tx=()=>fetch(`${QP}?q=${YP}&langRestrict=${XP}&maxResults=30&key=${GP}`).then(n=>n.json()),pc=()=>{const{isLoading:n,isError:e,data:t}=KP({queryKey:["books"],queryFn:()=>tx()});return{isLoading:n,isError:e,books:t}},Di=C.createContext(),JP=({children:n})=>{const{isLoading:e,isError:t,books:r}=pc(),[s,a]=C.useState([]),[l,h]=C.useReducer(dP,hP),[f,p]=fP("cart",[]);return C.useEffect(()=>{h({type:"SET_CART",payload:f}),h({type:"SET_FAVORITES",payload:f})},[]),C.useEffect(()=>{p(l.cart,l.favorites)},[l.cart,l.favorites]),T.jsx(Di.Provider,{value:{books:r,isLoading:e,isError:t,fetchBooks:tx,cartID:s,setCartID:a,state:l,dispatch:h},children:n})};var $0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ZP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},rx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,v=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,I=p&63;f||(I=64,l||(E=64)),r.push(t[v],t[_],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||_==null)throw new eC;const E=a<<2|h>>4;if(r.push(E),p!==64){const I=h<<4&240|p>>2;if(r.push(I),_!==64){const k=p<<6&192|_;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tC=function(n){const e=nx(n);return rx.encodeByteArray(e,!0)},Sd=function(n){return tC(n).replace(/\./g,"")},ix=function(n){try{return rx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=()=>nC().__FIREBASE_DEFAULTS__,iC=()=>{if(typeof process>"u"||typeof $0>"u")return;const n=$0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ix(n[1]);return e&&JSON.parse(e)},Yd=()=>{try{return rC()||iC()||sC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sx=n=>{var e,t;return(t=(e=Yd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ox=n=>{const e=sx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ax=()=>{var n;return(n=Yd())===null||n===void 0?void 0:n.config},lx=n=>{var e;return(e=Yd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sd(JSON.stringify(t)),Sd(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function lC(){var n;const e=(n=Yd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dC(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fC(){return!lC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pC(){try{return typeof indexedDB=="object"}catch{return!1}}function mC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="FirebaseError";class Gr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gC,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?yC(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Gr(s,h,r)}}function yC(n,e){return n.replace(vC,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vC=/\{\$([^}]+)}/g;function _C(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rd(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(H0(a)&&H0(l)){if(!Rd(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function H0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Au(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Pu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wC(n,e){const t=new EC(n,e);return t.subscribe.bind(t)}class EC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TC(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=tm),s.error===void 0&&(s.error=tm),s.complete===void 0&&(s.complete=tm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n){return n&&n._delegate?n._delegate:n}class Rs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new oC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SC(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IC(n){return n===po?void 0:n}function SC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const AC={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},PC=De.INFO,CC={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},kC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=CC[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=PC,this._logHandler=kC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const bC=(n,e)=>e.some(t=>n instanceof t);let W0,q0;function NC(){return W0||(W0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DC(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cx=new WeakMap,Bm=new WeakMap,hx=new WeakMap,nm=new WeakMap,jg=new WeakMap;function OC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Es(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&cx.set(t,n)}).catch(()=>{}),jg.set(e,n),e}function LC(n){if(Bm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Bm.set(n,e)}let zm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VC(n){zm=n(zm)}function MC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rm(this),e,...t);return hx.set(r,e.sort?e.sort():[e]),Es(r)}:DC().includes(n)?function(...e){return n.apply(rm(this),e),Es(cx.get(this))}:function(...e){return Es(n.apply(rm(this),e))}}function jC(n){return typeof n=="function"?MC(n):(n instanceof IDBTransaction&&LC(n),bC(n,NC())?new Proxy(n,zm):n)}function Es(n){if(n instanceof IDBRequest)return OC(n);if(nm.has(n))return nm.get(n);const e=jC(n);return e!==n&&(nm.set(n,e),jg.set(e,n)),e}const rm=n=>jg.get(n);function FC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=Es(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Es(l.result),f.oldVersion,f.newVersion,Es(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const UC=["get","getKey","getAll","getAllKeys","count"],BC=["put","add","delete","clear"],im=new Map;function K0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(im.get(e))return im.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=BC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||UC.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return im.set(e,a),a}VC(n=>({...n,get:(e,t,r)=>K0(e,t)||n.get(e,t,r),has:(e,t)=>!!K0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($C(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $C(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",G0="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Mg("@firebase/app"),HC="@firebase/app-compat",WC="@firebase/analytics-compat",qC="@firebase/analytics",KC="@firebase/app-check-compat",GC="@firebase/app-check",QC="@firebase/auth",YC="@firebase/auth-compat",XC="@firebase/database",JC="@firebase/data-connect",ZC="@firebase/database-compat",ek="@firebase/functions",tk="@firebase/functions-compat",nk="@firebase/installations",rk="@firebase/installations-compat",ik="@firebase/messaging",sk="@firebase/messaging-compat",ok="@firebase/performance",ak="@firebase/performance-compat",lk="@firebase/remote-config",uk="@firebase/remote-config-compat",ck="@firebase/storage",hk="@firebase/storage-compat",dk="@firebase/firestore",fk="@firebase/vertexai",pk="@firebase/firestore-compat",mk="firebase",gk="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",yk={[$m]:"fire-core",[HC]:"fire-core-compat",[qC]:"fire-analytics",[WC]:"fire-analytics-compat",[GC]:"fire-app-check",[KC]:"fire-app-check-compat",[QC]:"fire-auth",[YC]:"fire-auth-compat",[XC]:"fire-rtdb",[JC]:"fire-data-connect",[ZC]:"fire-rtdb-compat",[ek]:"fire-fn",[tk]:"fire-fn-compat",[nk]:"fire-iid",[rk]:"fire-iid-compat",[ik]:"fire-fcm",[sk]:"fire-fcm-compat",[ok]:"fire-perf",[ak]:"fire-perf-compat",[lk]:"fire-rc",[uk]:"fire-rc-compat",[ck]:"fire-gcs",[hk]:"fire-gcs-compat",[dk]:"fire-fst",[pk]:"fire-fst-compat",[fk]:"fire-vertex","fire-js":"fire-js",[mk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,vk=new Map,Wm=new Map;function Q0(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ko(n){const e=n.name;if(Wm.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,n);for(const t of Ad.values())Q0(t,n);for(const t of vk.values())Q0(t,n);return!0}function Xd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new mc("app","Firebase",_k);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=gk;function dx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ts.create("bad-app-name",{appName:String(s)});if(t||(t=ax()),!t)throw Ts.create("no-options");const a=Ad.get(s);if(a){if(Rd(t,a.options)&&Rd(r,a.config))return a;throw Ts.create("duplicate-app",{appName:s})}const l=new RC(s);for(const f of Wm.values())l.addComponent(f);const h=new wk(t,r,l);return Ad.set(s,h),h}function Fg(n=Hm){const e=Ad.get(n);if(!e&&n===Hm&&ax())return dx();if(!e)throw Ts.create("no-app",{appName:n});return e}function Fr(n,e,t){var r;let s=(r=yk[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(h.join(" "));return}ko(new Rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="firebase-heartbeat-database",Tk=1,Ku="firebase-heartbeat-store";let sm=null;function fx(){return sm||(sm=FC(Ek,Tk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),sm}async function xk(n){try{const t=(await fx()).transaction(Ku),r=await t.objectStore(Ku).get(px(n));return await t.done,r}catch(e){if(e instanceof Gr)Pi.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function Y0(n,e){try{const r=(await fx()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(e,px(n)),await r.done}catch(t){if(t instanceof Gr)Pi.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(r.message)}}}function px(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=1024,Sk=30*24*60*60*1e3;class Rk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=X0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=Sk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=X0(),{heartbeatsToSend:r,unsentEntries:s}=Ak(this._heartbeatsCache.heartbeats),a=Sd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pi.warn(t),""}}}function X0(){return new Date().toISOString().substring(0,10)}function Ak(n,e=Ik){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),J0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),J0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Pk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pC()?mC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J0(n){return Sd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){ko(new Rs("platform-logger",e=>new zC(e),"PRIVATE")),ko(new Rs("heartbeat",e=>new Rk(e),"PRIVATE")),Fr($m,G0,n),Fr($m,G0,"esm2017"),Fr("fire-js","")}Ck("");var kk="firebase",bk="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(kk,bk,"app");function Ug(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function mx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nk=mx,gx=new mc("auth","Firebase",mx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Mg("@firebase/auth");function Dk(n,...e){Pd.logLevel<=De.WARN&&Pd.warn(`Auth (${Lo}): ${n}`,...e)}function cd(n,...e){Pd.logLevel<=De.ERROR&&Pd.error(`Auth (${Lo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(n,...e){throw zg(n,...e)}function wr(n,...e){return zg(n,...e)}function Bg(n,e,t){const r=Object.assign(Object.assign({},Nk()),{[e]:t});return new mc("auth","Firebase",r).create(e,{appName:n.name})}function xi(n){return Bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ok(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(n,"argument-error"),Bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gx.create(n,...e)}function we(n,e,...t){if(!n)throw zg(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cd(e),new Error(e)}function Ci(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Lk(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lk()||cC()||"connection"in navigator)?navigator.onLine:!0}function Mk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ci(t>e,"Short delay should be less than long delay!"),this.isMobile=aC()||hC()}get(){return Vk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n,e){Ci(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new yc(3e4,6e4);function Oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Qr(n,e,t,r,s={}){return vx(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=gc(Object.assign({key:n.config.apiKey},l)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return uC()||(p.referrerPolicy="no-referrer"),yx.fetch()(_x(n,n.config.apiHost,t,h),p)})}async function vx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},jk),e);try{const s=new Bk(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Xh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Xh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Xh(n,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Bg(n,v,p);Xn(n,v)}}catch(s){if(s instanceof Gr)throw s;Xn(n,"network-request-failed",{message:String(s)})}}async function vc(n,e,t,r,s={}){const a=await Qr(n,e,t,r,s);return"mfaPendingCredential"in a&&Xn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function _x(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?$g(n.config,s):`${n.config.apiScheme}://${s}`}function Uk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(wr(this.auth,"network-request-failed")),Fk.get())})}}function Xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=wr(n,e,r);return s.customData._tokenResponse=t,s}function ew(n){return n!==void 0&&n.enterprise!==void 0}class zk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Uk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $k(n,e){return Qr(n,"GET","/v2/recaptchaConfig",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e){return Qr(n,"POST","/v1/accounts:delete",e)}async function wx(n,e){return Qr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Wk(n,e=!1){const t=Dt(n),r=await t.getIdToken(e),s=Hg(r);we(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Lu(om(s.auth_time)),issuedAtTime:Lu(om(s.iat)),expirationTime:Lu(om(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function om(n){return Number(n)*1e3}function Hg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const s=ix(t);return s?JSON.parse(s):(cd("Failed to decode base64 JWT payload"),null)}catch(s){return cd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tw(n){const e=Hg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gr&&qk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function qk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n){var e;const t=n.auth,r=await n.getIdToken(),s=await al(n,wx(t,{idToken:r}));we(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ex(a.providerUserInfo):[],h=Qk(n.providerData,l),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),v=f?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Km(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,_)}async function Gk(n){const e=Dt(n);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qk(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ex(n){return n.map(e=>{var{providerId:t}=e,r=Ug(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(n,e){const t=await vx(n,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=_x(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",yx.fetch()(l,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Xk(n,e){return Qr(n,"POST","/v2/accounts:revokeToken",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=tw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await Yk(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Ha;return r&&(we(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(we(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Km(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await al(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Wk(this,e)}reload(){return Gk(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await al(this,Hk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,l,h,f,p,v;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,I=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,k=(l=t.photoURL)!==null&&l!==void 0?l:void 0,b=(h=t.tenantId)!==null&&h!==void 0?h:void 0,P=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,V=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:q,emailVerified:Y,isAnonymous:Z,providerData:se,stsTokenManager:D}=t;we(q&&D,e,"internal-error");const R=Ha.fromJSON(this.name,D);we(typeof q=="string",e,"internal-error"),os(_,e.name),os(E,e.name),we(typeof Y=="boolean",e,"internal-error"),we(typeof Z=="boolean",e,"internal-error"),os(I,e.name),os(k,e.name),os(b,e.name),os(P,e.name),os(V,e.name),os(B,e.name);const A=new Ei({uid:q,auth:e,email:E,emailVerified:Y,displayName:_,isAnonymous:Z,photoURL:k,phoneNumber:I,tenantId:b,stsTokenManager:R,createdAt:V,lastLoginAt:B});return se&&Array.isArray(se)&&(A.providerData=se.map(L=>Object.assign({},L))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ha;s.updateFromServerResponse(t);const a=new Ei({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];we(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Ex(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Ha;h.updateFromIdToken(r);const f=new Ei({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Km(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;function Ti(n){Ci(n instanceof Function,"Expected a class definition");let e=nw.get(n);return e?(Ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tx.type="NONE";const rw=Tx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Wa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=hd(this.userKey,s.apiKey,a),this.fullPersistenceKey=hd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Wa(Ti(rw),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Ti(rw);const l=hd(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(l);if(v){const _=Ei._fromJSON(e,v);p!==a&&(h=_),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wa(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Wa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Px(e))return"Blackberry";if(Cx(e))return"Webos";if(Ix(e))return"Safari";if((e.includes("chrome/")||Sx(e))&&!e.includes("edge/"))return"Chrome";if(Ax(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xx(n=on()){return/firefox\//i.test(n)}function Ix(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sx(n=on()){return/crios\//i.test(n)}function Rx(n=on()){return/iemobile/i.test(n)}function Ax(n=on()){return/android/i.test(n)}function Px(n=on()){return/blackberry/i.test(n)}function Cx(n=on()){return/webos/i.test(n)}function Wg(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Jk(n=on()){var e;return Wg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Zk(){return dC()&&document.documentMode===10}function kx(n=on()){return Wg(n)||Ax(n)||Cx(n)||Px(n)||/windows phone/i.test(n)||Rx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n,e=[]){let t;switch(n){case"Browser":t=iw(on());break;case"Worker":t=`${iw(on())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n,e={}){return Qr(n,"GET","/v2/passwordPolicy",Oi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=6;class rb{constructor(e){var t,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:nb,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sw(this),this.idTokenSubscription=new sw(this),this.beforeStateQueue=new eb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wx(this,{idToken:e}),r=await Ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(vr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(xi(this));const t=e?Dt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tb(this),t=new rb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Xk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ti(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[Ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Dk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ls(n){return Dt(n)}class sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=wC(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sb(n){Jd=n}function Nx(n){return Jd.loadJS(n)}function ob(){return Jd.recaptchaEnterpriseScript}function ab(){return Jd.gapiScript}function lb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ub{constructor(){this.enterprise=new cb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class cb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hb="recaptcha-enterprise",Dx="NO_RECAPTCHA";class db{constructor(e){this.type=hb,this.auth=Ls(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{$k(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new zk(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function s(a,l,h){const f=window.grecaptcha;ew(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(Dx)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ub().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&ew(window.grecaptcha))s(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ob();f.length!==0&&(f+=h),Nx(f).then(()=>{s(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function ow(n,e,t,r=!1,s=!1){const a=new db(n);let l;if(s)l=Dx;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Gm(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ow(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ow(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n,e){const t=Xd(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Rd(a,e??{}))return s;Xn(s,"already-initialized")}return t.initialize({options:e})}function pb(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ti);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mb(n,e,t){const r=Ls(n);we(r._canInitEmulator,r,"emulator-config-failed"),we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Ox(e),{host:l,port:h}=gb(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),yb()}function Ox(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gb(n){const e=Ox(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:aw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:aw(l)}}}function aw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function vb(n,e){return Qr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(n,e){return vc(n,"POST","/v1/accounts:signInWithPassword",Oi(n,e))}async function wb(n,e){return Qr(n,"POST","/v1/accounts:sendOobCode",Oi(n,e))}async function Eb(n,e){return wb(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(n,e){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))}async function xb(n,e){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends qg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,t,"signInWithPassword",_b);case"emailLink":return Tb(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signUpPassword",vb);case"emailLink":return xb(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n,e){return vc(n,"POST","/v1/accounts:signInWithIdp",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="http://localhost";class bo extends qg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Ug(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new bo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return qa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,qa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qa(e,t)}buildRequest(){const e={requestUri:Ib,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Rb(n){const e=Au(Pu(n)).link,t=e?Au(Pu(e)).deep_link_id:null,r=Au(Pu(n)).deep_link_id;return(r?Au(Pu(r)).link:null)||r||t||e||n}class Kg{constructor(e){var t,r,s,a,l,h;const f=Au(Pu(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,_=Sb((s=f.mode)!==null&&s!==void 0?s:null);we(p&&v&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=Rb(e);try{return new Kg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Kg.parseLink(t);return we(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends _c{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _i.credential(t,r)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends _c{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends _c{constructor(){super("twitter.com")}static credential(e,t){return bo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(n,e){return vc(n,"POST","/v1/accounts:signUp",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Ei._fromIdTokenResponse(e,r,s),l=lw(r);return new No({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=lw(r);return new No({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function lw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Gr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new kd(e,t,r,s)}}function Lx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,a,e,r):a})}async function Pb(n,e,t=!1){const r=await al(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(n,e,t=!1){const{auth:r}=n;if(vr(r.app))return Promise.reject(xi(r));const s="reauthenticate";try{const a=await al(n,Lx(r,s,e,n),t);we(a.idToken,r,"internal-error");const l=Hg(a.idToken);we(l,r,"internal-error");const{sub:h}=l;return we(n.uid===h,r,"user-mismatch"),No._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(n,e,t=!1){if(vr(n.app))return Promise.reject(xi(n));const r="signIn",s=await Lx(n,r,e),a=await No._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function kb(n,e){return Vx(Ls(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n,e,t){var r;we(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),we(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(we(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(we(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(n){const e=Ls(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nb(n,e,t){if(vr(n.app))return Promise.reject(xi(n));const r=Ls(n),l=await Gm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ab).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Mx(n),f}),h=await No._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function Db(n,e,t){return vr(n.app)?Promise.reject(xi(n)):kb(Dt(n),vl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Mx(n),r})}async function Ob(n,e){const t=Dt(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};bb(t.auth,s,e);const{email:a}=await Eb(t.auth,s);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(n,e){return Qr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Dt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await al(r,Lb(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function Mb(n,e,t,r){return Dt(n).onIdTokenChanged(e,t,r)}function jb(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}function Fb(n,e,t,r){return Dt(n).onAuthStateChanged(e,t,r)}function Ub(n){return Dt(n).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=1e3,zb=10;class Fx extends jx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Zk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zb):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fx.type="LOCAL";const $b=Fx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends jx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ux.type="SESSION";const Bx=Ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Zd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await Hb(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=Qg("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const E=_;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function qb(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function Kb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Qb(){return zx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="firebaseLocalStorageDb",Yb=1,Nd="firebaseLocalStorage",Hx="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ef(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function Xb(){const n=indexedDB.deleteDatabase($x);return new wc(n).toPromise()}function Qm(){const n=indexedDB.open($x,Yb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nd,{keyPath:Hx})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nd)?e(r):(r.close(),await Xb(),e(await Qm()))})})}async function uw(n,e,t){const r=ef(n,!0).put({[Hx]:e,value:t});return new wc(r).toPromise()}async function Jb(n,e){const t=ef(n,!1).get(e),r=await new wc(t).toPromise();return r===void 0?null:r.value}function cw(n,e){const t=ef(n,!0).delete(e);return new wc(t).toPromise()}const Zb=800,e2=3;class Wx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>e2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zd._getInstance(Qb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Kb(),!this.activeServiceWorker)return;this.sender=new Wb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await uw(e,bd,"1"),await cw(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Jb(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=ef(s,!1).getAll();return new wc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wx.type="LOCAL";const t2=Wx;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(n,e){return e?Ti(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends qg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n2(n){return Vx(n.auth,new Yg(n),n.bypassAuthState)}function r2(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),Cb(t,new Yg(n),n.bypassAuthState)}async function i2(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),Pb(t,new Yg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return r2;default:Xn(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new yc(2e3,1e4);async function o2(n,e,t){if(vr(n.app))return Promise.reject(wr(n,"operation-not-supported-in-this-environment"));const r=Ls(n);Ok(n,e,Gg);const s=qx(r,t);return new yo(r,"signInViaPopup",e,s).executeNotNull()}class yo extends Kx{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s2.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="pendingRedirect",dd=new Map;class l2 extends Kx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const r=await u2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u2(n,e){const t=d2(e),r=h2(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function c2(n,e){dd.set(n._key(),e)}function h2(n){return Ti(n._redirectPersistence)}function d2(n){return hd(a2,n.config.apiKey,n.name)}async function f2(n,e,t=!1){if(vr(n.app))return Promise.reject(xi(n));const r=Ls(n),s=qx(r,e),l=await new l2(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=10*60*1e3;class m2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Gx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(wr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p2&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(e))}saveEventToCache(e){this.cachedEventUids.add(hw(e)),this.lastProcessedEventTime=Date.now()}}function hw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Gx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n,e={}){return Qr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_2=/^https?/;async function w2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await y2(n);for(const t of e)try{if(E2(t))return}catch{}Xn(n,"unauthorized-domain")}function E2(n){const e=qm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!_2.test(t))return!1;if(v2.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new yc(3e4,6e4);function dw(){const n=Ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x2(n){return new Promise((e,t)=>{var r,s,a;function l(){dw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dw(),t(wr(n,"network-request-failed"))},timeout:T2.get()})}if(!((s=(r=Ur().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ur().gapi)===null||a===void 0)&&a.load)l();else{const h=lb("iframefcb");return Ur()[h]=()=>{gapi.load?l():t(wr(n,"network-request-failed"))},Nx(`${ab()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw fd=null,e})}let fd=null;function I2(n){return fd=fd||x2(n),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new yc(5e3,15e3),R2="__/auth/iframe",A2="emulator/auth/iframe",P2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k2(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$g(e,A2):`https://${n.config.authDomain}/${R2}`,r={apiKey:e.apiKey,appName:n.name,v:Lo},s=C2.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${gc(r).slice(1)}`}async function b2(n){const e=await I2(n),t=Ur().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:k2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P2,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=wr(n,"network-request-failed"),h=Ur().setTimeout(()=>{a(l)},S2.get());function f(){Ur().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D2=500,O2=600,L2="_blank",V2="http://localhost";class fw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M2(n,e,t,r=D2,s=O2){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},N2),{width:r.toString(),height:s.toString(),top:a,left:l}),p=on().toLowerCase();t&&(h=Sx(p)?L2:t),xx(p)&&(e=e||V2,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[I,k])=>`${E}${I}=${k},`,"");if(Jk(p)&&h!=="_self")return j2(e||"",h),new fw(null);const _=window.open(e||"",h,v);we(_,n,"popup-blocked");try{_.focus()}catch{}return new fw(_)}function j2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="__/auth/handler",U2="emulator/auth/handler",B2=encodeURIComponent("fac");async function pw(n,e,t,r,s,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lo,eventId:s};if(e instanceof Gg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",_C(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))l[v]=_}if(e instanceof _c){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(l.scopes=v.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),p=f?`#${B2}=${encodeURIComponent(f)}`:"";return`${z2(n)}?${gc(h).slice(1)}${p}`}function z2({config:n}){return n.emulator?$g(n,U2):`https://${n.authDomain}/${F2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="webStorageSupport";class $2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bx,this._completeRedirectFn=f2,this._overrideRedirectResult=c2}async _openPopup(e,t,r,s){var a;Ci((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await pw(e,t,r,qm(),s);return M2(e,l,Qg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await pw(e,t,r,qm(),s);return qb(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ci(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await b2(e),r=new m2(e);return t.register("authEvent",s=>(we(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(am,{type:am},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[am];l!==void 0&&t(!!l),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kx()||Ix()||Wg()}}const H2=$2;var mw="@firebase/auth",gw="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K2(n){ko(new Rs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;we(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bx(n)},p=new ib(r,s,a,f);return pb(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ko(new Rs("auth-internal",e=>{const t=Ls(e.getProvider("auth").getImmediate());return(r=>new W2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(mw,gw,q2(n)),Fr(mw,gw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=5*60,Q2=lx("authIdTokenMaxAge")||G2;let yw=null;const Y2=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Q2)return;const s=t==null?void 0:t.token;yw!==s&&(yw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function X2(n=Fg()){const e=Xd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fb(n,{popupRedirectResolver:H2,persistence:[t2,$b,Bx]}),r=lx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Y2(a.toString());jb(t,l,()=>l(t.currentUser)),Mb(t,h=>l(h))}}const s=sx("auth");return s&&mb(t,`http://${s}`),t}function J2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sb({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=wr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",J2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K2("Browser");var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,Qx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function A(){}A.prototype=R.prototype,D.D=R.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(L,j,z){for(var O=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)O[Qe-2]=arguments[Qe];return R.prototype[j].apply(L,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,R,A){A||(A=0);var L=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)L[j]=R.charCodeAt(A++)|R.charCodeAt(A++)<<8|R.charCodeAt(A++)<<16|R.charCodeAt(A++)<<24;else for(j=0;16>j;++j)L[j]=R[A++]|R[A++]<<8|R[A++]<<16|R[A++]<<24;R=D.g[0],A=D.g[1],j=D.g[2];var z=D.g[3],O=R+(z^A&(j^z))+L[0]+3614090360&4294967295;R=A+(O<<7&4294967295|O>>>25),O=z+(j^R&(A^j))+L[1]+3905402710&4294967295,z=R+(O<<12&4294967295|O>>>20),O=j+(A^z&(R^A))+L[2]+606105819&4294967295,j=z+(O<<17&4294967295|O>>>15),O=A+(R^j&(z^R))+L[3]+3250441966&4294967295,A=j+(O<<22&4294967295|O>>>10),O=R+(z^A&(j^z))+L[4]+4118548399&4294967295,R=A+(O<<7&4294967295|O>>>25),O=z+(j^R&(A^j))+L[5]+1200080426&4294967295,z=R+(O<<12&4294967295|O>>>20),O=j+(A^z&(R^A))+L[6]+2821735955&4294967295,j=z+(O<<17&4294967295|O>>>15),O=A+(R^j&(z^R))+L[7]+4249261313&4294967295,A=j+(O<<22&4294967295|O>>>10),O=R+(z^A&(j^z))+L[8]+1770035416&4294967295,R=A+(O<<7&4294967295|O>>>25),O=z+(j^R&(A^j))+L[9]+2336552879&4294967295,z=R+(O<<12&4294967295|O>>>20),O=j+(A^z&(R^A))+L[10]+4294925233&4294967295,j=z+(O<<17&4294967295|O>>>15),O=A+(R^j&(z^R))+L[11]+2304563134&4294967295,A=j+(O<<22&4294967295|O>>>10),O=R+(z^A&(j^z))+L[12]+1804603682&4294967295,R=A+(O<<7&4294967295|O>>>25),O=z+(j^R&(A^j))+L[13]+4254626195&4294967295,z=R+(O<<12&4294967295|O>>>20),O=j+(A^z&(R^A))+L[14]+2792965006&4294967295,j=z+(O<<17&4294967295|O>>>15),O=A+(R^j&(z^R))+L[15]+1236535329&4294967295,A=j+(O<<22&4294967295|O>>>10),O=R+(j^z&(A^j))+L[1]+4129170786&4294967295,R=A+(O<<5&4294967295|O>>>27),O=z+(A^j&(R^A))+L[6]+3225465664&4294967295,z=R+(O<<9&4294967295|O>>>23),O=j+(R^A&(z^R))+L[11]+643717713&4294967295,j=z+(O<<14&4294967295|O>>>18),O=A+(z^R&(j^z))+L[0]+3921069994&4294967295,A=j+(O<<20&4294967295|O>>>12),O=R+(j^z&(A^j))+L[5]+3593408605&4294967295,R=A+(O<<5&4294967295|O>>>27),O=z+(A^j&(R^A))+L[10]+38016083&4294967295,z=R+(O<<9&4294967295|O>>>23),O=j+(R^A&(z^R))+L[15]+3634488961&4294967295,j=z+(O<<14&4294967295|O>>>18),O=A+(z^R&(j^z))+L[4]+3889429448&4294967295,A=j+(O<<20&4294967295|O>>>12),O=R+(j^z&(A^j))+L[9]+568446438&4294967295,R=A+(O<<5&4294967295|O>>>27),O=z+(A^j&(R^A))+L[14]+3275163606&4294967295,z=R+(O<<9&4294967295|O>>>23),O=j+(R^A&(z^R))+L[3]+4107603335&4294967295,j=z+(O<<14&4294967295|O>>>18),O=A+(z^R&(j^z))+L[8]+1163531501&4294967295,A=j+(O<<20&4294967295|O>>>12),O=R+(j^z&(A^j))+L[13]+2850285829&4294967295,R=A+(O<<5&4294967295|O>>>27),O=z+(A^j&(R^A))+L[2]+4243563512&4294967295,z=R+(O<<9&4294967295|O>>>23),O=j+(R^A&(z^R))+L[7]+1735328473&4294967295,j=z+(O<<14&4294967295|O>>>18),O=A+(z^R&(j^z))+L[12]+2368359562&4294967295,A=j+(O<<20&4294967295|O>>>12),O=R+(A^j^z)+L[5]+4294588738&4294967295,R=A+(O<<4&4294967295|O>>>28),O=z+(R^A^j)+L[8]+2272392833&4294967295,z=R+(O<<11&4294967295|O>>>21),O=j+(z^R^A)+L[11]+1839030562&4294967295,j=z+(O<<16&4294967295|O>>>16),O=A+(j^z^R)+L[14]+4259657740&4294967295,A=j+(O<<23&4294967295|O>>>9),O=R+(A^j^z)+L[1]+2763975236&4294967295,R=A+(O<<4&4294967295|O>>>28),O=z+(R^A^j)+L[4]+1272893353&4294967295,z=R+(O<<11&4294967295|O>>>21),O=j+(z^R^A)+L[7]+4139469664&4294967295,j=z+(O<<16&4294967295|O>>>16),O=A+(j^z^R)+L[10]+3200236656&4294967295,A=j+(O<<23&4294967295|O>>>9),O=R+(A^j^z)+L[13]+681279174&4294967295,R=A+(O<<4&4294967295|O>>>28),O=z+(R^A^j)+L[0]+3936430074&4294967295,z=R+(O<<11&4294967295|O>>>21),O=j+(z^R^A)+L[3]+3572445317&4294967295,j=z+(O<<16&4294967295|O>>>16),O=A+(j^z^R)+L[6]+76029189&4294967295,A=j+(O<<23&4294967295|O>>>9),O=R+(A^j^z)+L[9]+3654602809&4294967295,R=A+(O<<4&4294967295|O>>>28),O=z+(R^A^j)+L[12]+3873151461&4294967295,z=R+(O<<11&4294967295|O>>>21),O=j+(z^R^A)+L[15]+530742520&4294967295,j=z+(O<<16&4294967295|O>>>16),O=A+(j^z^R)+L[2]+3299628645&4294967295,A=j+(O<<23&4294967295|O>>>9),O=R+(j^(A|~z))+L[0]+4096336452&4294967295,R=A+(O<<6&4294967295|O>>>26),O=z+(A^(R|~j))+L[7]+1126891415&4294967295,z=R+(O<<10&4294967295|O>>>22),O=j+(R^(z|~A))+L[14]+2878612391&4294967295,j=z+(O<<15&4294967295|O>>>17),O=A+(z^(j|~R))+L[5]+4237533241&4294967295,A=j+(O<<21&4294967295|O>>>11),O=R+(j^(A|~z))+L[12]+1700485571&4294967295,R=A+(O<<6&4294967295|O>>>26),O=z+(A^(R|~j))+L[3]+2399980690&4294967295,z=R+(O<<10&4294967295|O>>>22),O=j+(R^(z|~A))+L[10]+4293915773&4294967295,j=z+(O<<15&4294967295|O>>>17),O=A+(z^(j|~R))+L[1]+2240044497&4294967295,A=j+(O<<21&4294967295|O>>>11),O=R+(j^(A|~z))+L[8]+1873313359&4294967295,R=A+(O<<6&4294967295|O>>>26),O=z+(A^(R|~j))+L[15]+4264355552&4294967295,z=R+(O<<10&4294967295|O>>>22),O=j+(R^(z|~A))+L[6]+2734768916&4294967295,j=z+(O<<15&4294967295|O>>>17),O=A+(z^(j|~R))+L[13]+1309151649&4294967295,A=j+(O<<21&4294967295|O>>>11),O=R+(j^(A|~z))+L[4]+4149444226&4294967295,R=A+(O<<6&4294967295|O>>>26),O=z+(A^(R|~j))+L[11]+3174756917&4294967295,z=R+(O<<10&4294967295|O>>>22),O=j+(R^(z|~A))+L[2]+718787259&4294967295,j=z+(O<<15&4294967295|O>>>17),O=A+(z^(j|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+z&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var A=R-this.blockSize,L=this.B,j=this.h,z=0;z<R;){if(j==0)for(;z<=A;)s(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<R;)if(L[j++]=D.charCodeAt(z++),j==this.blockSize){s(this,L),j=0;break}}else for(;z<R;)if(L[j++]=D[z++],j==this.blockSize){s(this,L),j=0;break}}this.h=j,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var A=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=A&255,A/=256;for(this.u(D),D=Array(16),R=A=0;4>R;++R)for(var L=0;32>L;L+=8)D[A++]=this.g[R]>>>L&255;return D};function a(D,R){var A=h;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=R(D)}function l(D,R){this.h=R;for(var A=[],L=!0,j=D.length-1;0<=j;j--){var z=D[j]|0;L&&z==R||(A[j]=z,L=!1)}this.g=A}var h={};function f(D){return-128<=D&&128>D?a(D,function(R){return new l([R|0],0>R?-1:0)}):new l([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return _;if(0>D)return P(p(-D));for(var R=[],A=1,L=0;D>=A;L++)R[L]=D/A|0,A*=4294967296;return new l(R,0)}function v(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return P(v(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(R,8)),L=_,j=0;j<D.length;j+=8){var z=Math.min(8,D.length-j),O=parseInt(D.substring(j,j+z),R);8>z?(z=p(Math.pow(R,z)),L=L.j(z).add(p(O))):(L=L.j(A),L=L.add(p(O)))}return L}var _=f(0),E=f(1),I=f(16777216);n=l.prototype,n.m=function(){if(b(this))return-P(this).m();for(var D=0,R=1,A=0;A<this.g.length;A++){var L=this.i(A);D+=(0<=L?L:4294967296+L)*R,R*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(b(this))return"-"+P(this).toString(D);for(var R=p(Math.pow(D,6)),A=this,L="";;){var j=Y(A,R).g;A=V(A,j.j(R));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=j,k(A))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function b(D){return D.h==-1}n.l=function(D){return D=V(this,D),b(D)?-1:k(D)?0:1};function P(D){for(var R=D.g.length,A=[],L=0;L<R;L++)A[L]=~D.g[L];return new l(A,~D.h).add(E)}n.abs=function(){return b(this)?P(this):this},n.add=function(D){for(var R=Math.max(this.g.length,D.g.length),A=[],L=0,j=0;j<=R;j++){var z=L+(this.i(j)&65535)+(D.i(j)&65535),O=(z>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);L=O>>>16,z&=65535,O&=65535,A[j]=O<<16|z}return new l(A,A[A.length-1]&-2147483648?-1:0)};function V(D,R){return D.add(P(R))}n.j=function(D){if(k(this)||k(D))return _;if(b(this))return b(D)?P(this).j(P(D)):P(P(this).j(D));if(b(D))return P(this.j(P(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var R=this.g.length+D.g.length,A=[],L=0;L<2*R;L++)A[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<D.g.length;j++){var z=this.i(L)>>>16,O=this.i(L)&65535,Qe=D.i(j)>>>16,wt=D.i(j)&65535;A[2*L+2*j]+=O*wt,B(A,2*L+2*j),A[2*L+2*j+1]+=z*wt,B(A,2*L+2*j+1),A[2*L+2*j+1]+=O*Qe,B(A,2*L+2*j+1),A[2*L+2*j+2]+=z*Qe,B(A,2*L+2*j+2)}for(L=0;L<R;L++)A[L]=A[2*L+1]<<16|A[2*L];for(L=R;L<2*R;L++)A[L]=0;return new l(A,0)};function B(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function q(D,R){this.g=D,this.h=R}function Y(D,R){if(k(R))throw Error("division by zero");if(k(D))return new q(_,_);if(b(D))return R=Y(P(D),R),new q(P(R.g),P(R.h));if(b(R))return R=Y(D,P(R)),new q(P(R.g),R.h);if(30<D.g.length){if(b(D)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var A=E,L=R;0>=L.l(D);)A=Z(A),L=Z(L);var j=se(A,1),z=se(L,1);for(L=se(L,2),A=se(A,2);!k(L);){var O=z.add(L);0>=O.l(D)&&(j=j.add(A),z=O),L=se(L,1),A=se(A,1)}return R=V(D,j.j(R)),new q(j,R)}for(j=_;0<=D.l(R);){for(A=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(A)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=p(A),O=z.j(R);b(O)||0<O.l(D);)A-=L,z=p(A),O=z.j(R);k(z)&&(z=E),j=j.add(z),D=V(D,O)}return new q(j,D)}n.A=function(D){return Y(this,D).h},n.and=function(D){for(var R=Math.max(this.g.length,D.g.length),A=[],L=0;L<R;L++)A[L]=this.i(L)&D.i(L);return new l(A,this.h&D.h)},n.or=function(D){for(var R=Math.max(this.g.length,D.g.length),A=[],L=0;L<R;L++)A[L]=this.i(L)|D.i(L);return new l(A,this.h|D.h)},n.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),A=[],L=0;L<R;L++)A[L]=this.i(L)^D.i(L);return new l(A,this.h^D.h)};function Z(D){for(var R=D.g.length+1,A=[],L=0;L<R;L++)A[L]=D.i(L)<<1|D.i(L-1)>>>31;return new l(A,D.h)}function se(D,R){var A=R>>5;R%=32;for(var L=D.g.length-A,j=[],z=0;z<L;z++)j[z]=0<R?D.i(z+A)>>>R|D.i(z+A+1)<<32-R:D.i(z+A);return new l(j,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,xs=l}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yx,Cu,Xx,pd,Ym,Jx,Zx,eI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var w=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var H=c[S];if(!(H in w))break e;w=w[H]}c=c[c.length-1],S=w[c],g=g(S),g!=S&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,S=!1,H={next:function(){if(!S&&w<c.length){var Q=w++;return{value:g(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,w){return c.call.apply(c.bind,arguments)}function _(c,g,w){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),c.apply(g,H)}}return function(){return c.apply(g,arguments)}}function E(c,g,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:_,E.apply(null,arguments)}function I(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function k(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(S,H,Q){for(var ae=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ae[Ge-2]=arguments[Ge];return g.prototype[H].apply(S,ae)}}function b(c){const g=c.length;if(0<g){const w=Array(g);for(let S=0;S<g;S++)w[S]=c[S];return w}return[]}function P(c,g){for(let w=1;w<arguments.length;w++){const S=arguments[w];if(f(S)){const H=c.length||0,Q=S.length||0;c.length=H+Q;for(let ae=0;ae<Q;ae++)c[H+ae]=S[ae]}else c.push(S)}}class V{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function B(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function Y(c){return Y[" "](c),c}Y[" "]=function(){};var Z=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function se(c,g,w){for(const S in c)g.call(w,c[S],S,c)}function D(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function R(c){const g={};for(const w in c)g[w]=c[w];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,g){let w,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(w in S)c[w]=S[w];for(let Q=0;Q<A.length;Q++)w=A[Q],Object.prototype.hasOwnProperty.call(S,w)&&(c[w]=S[w])}}function j(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function z(c){h.setTimeout(()=>{throw c},0)}function O(){var c=ge;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Qe{constructor(){this.h=this.g=null}add(g,w){const S=wt.get();S.set(g,w),this.h?this.h.next=S:this.g=S,this.h=S}}var wt=new V(()=>new It,c=>c.reset());class It{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,ie=!1,ge=new Qe,le=()=>{const c=h.Promise.resolve(void 0);Re=()=>{c.then($)}};var $=()=>{for(var c;c=O();){try{c.h.call(c.g)}catch(w){z(w)}var g=wt;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};h.addEventListener("test",w,g),h.removeEventListener("test",w,g)}catch{}return c}();function be(c,g){if(ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Z){e:{try{Y(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&be.aa.h.call(this)}}k(be,ye);var Fe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),We=0;function Xe(c,g,w,S,H){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!S,this.ha=H,this.key=++We,this.da=this.fa=!1}function Ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jr(c){this.src=c,this.g={},this.h=0}Jr.prototype.add=function(c,g,w,S,H){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ae=Li(c,g,S,H);return-1<ae?(g=c[ae],w||(g.fa=!1)):(g=new Xe(g,this.src,Q,!!S,H),g.fa=w,c.push(g)),g};function zo(c,g){var w=g.type;if(w in c.g){var S=c.g[w],H=Array.prototype.indexOf.call(S,g,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(S,H,1),Q&&(Ot(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Li(c,g,w,S){for(var H=0;H<c.length;++H){var Q=c[H];if(!Q.da&&Q.listener==g&&Q.capture==!!w&&Q.ha==S)return H}return-1}var js="closure_lm_"+(1e6*Math.random()|0),$o={};function Al(c,g,w,S,H){if(Array.isArray(g)){for(var Q=0;Q<g.length;Q++)Al(c,g[Q],w,S,H);return null}return w=kl(w),c&&c[He]?c.K(g,w,p(S)?!!S.capture:!1,H):Pl(c,g,w,!1,S,H)}function Pl(c,g,w,S,H,Q){if(!g)throw Error("Invalid event type");var ae=p(H)?!!H.capture:!!H,Ge=Wo(c);if(Ge||(c[js]=Ge=new Jr(c)),w=Ge.add(g,w,S,ae,Q),w.proxy)return w;if(S=Nc(),w.proxy=S,S.src=c,S.listener=w,c.addEventListener)ke||(H=ae),H===void 0&&(H=!1),c.addEventListener(g.toString(),S,H);else if(c.attachEvent)c.attachEvent(ei(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Nc(){function c(w){return g.call(c.src,c.listener,w)}const g=Cl;return c}function Ho(c,g,w,S,H){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Ho(c,g[Q],w,S,H);else S=p(S)?!!S.capture:!!S,w=kl(w),c&&c[He]?(c=c.i,g=String(g).toString(),g in c.g&&(Q=c.g[g],w=Li(Q,w,S,H),-1<w&&(Ot(Q[w]),Array.prototype.splice.call(Q,w,1),Q.length==0&&(delete c.g[g],c.h--)))):c&&(c=Wo(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Li(g,w,S,H)),(w=-1<c?g[c]:null)&&Zr(w))}function Zr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[He])zo(g.i,c);else{var w=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(w,S,c.capture):g.detachEvent?g.detachEvent(ei(w),S):g.addListener&&g.removeListener&&g.removeListener(S),(w=Wo(g))?(zo(w,c),w.h==0&&(w.src=null,g[js]=null)):Ot(c)}}}function ei(c){return c in $o?$o[c]:$o[c]="on"+c}function Cl(c,g){if(c.da)c=!0;else{g=new be(g,this);var w=c.listener,S=c.ha||c.src;c.fa&&Zr(c),c=w.call(S,g)}return c}function Wo(c){return c=c[js],c instanceof Jr?c:null}var qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function kl(c){return typeof c=="function"?c:(c[qo]||(c[qo]=function(g){return c.handleEvent(g)}),c[qo])}function St(){J.call(this),this.i=new Jr(this),this.M=this,this.F=null}k(St,J),St.prototype[He]=!0,St.prototype.removeEventListener=function(c,g,w,S){Ho(this,c,g,w,S)};function Rt(c,g){var w,S=c.F;if(S)for(w=[];S;S=S.F)w.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new ye(g,c);else if(g instanceof ye)g.target=g.target||c;else{var H=g;g=new ye(S,c),L(g,H)}if(H=!0,w)for(var Q=w.length-1;0<=Q;Q--){var ae=g.g=w[Q];H=ti(ae,S,!0,g)&&H}if(ae=g.g=c,H=ti(ae,S,!0,g)&&H,H=ti(ae,S,!1,g)&&H,w)for(Q=0;Q<w.length;Q++)ae=g.g=w[Q],H=ti(ae,S,!1,g)&&H}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],S=0;S<w.length;S++)Ot(w[S]);delete c.g[g],c.h--}}this.F=null},St.prototype.K=function(c,g,w,S){return this.i.add(String(c),g,!1,w,S)},St.prototype.L=function(c,g,w,S){return this.i.add(String(c),g,!0,w,S)};function ti(c,g,w,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,Q=0;Q<g.length;++Q){var ae=g[Q];if(ae&&!ae.da&&ae.capture==w){var Ge=ae.listener,At=ae.ha||ae.src;ae.fa&&zo(c.i,ae),H=Ge.call(At,S)!==!1&&H}}return H&&!S.defaultPrevented}function bl(c,g,w){if(typeof c=="function")w&&(c=E(c,w));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Vi(c){c.g=bl(()=>{c.g=null,c.i&&(c.i=!1,Vi(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Fs extends J{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(c){J.call(this),this.h=c,this.g={}}k(Us,J);var Nl=[];function Dl(c){se(c.g,function(g,w){this.g.hasOwnProperty(w)&&Zr(g)},c),c.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Dl(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ol=h.JSON.stringify,Ll=h.JSON.parse,Vl=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Bs(){}Bs.prototype.h=null;function Ko(c){return c.h||(c.h=c.i())}function Go(){}var Ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){ye.call(this,"d")}k(Tr,ye);function Qo(){ye.call(this,"c")}k(Qo,ye);var xr={},Ml=null;function zs(){return Ml=Ml||new St}xr.La="serverreachability";function jl(c){ye.call(this,xr.La,c)}k(jl,ye);function ni(c){const g=zs();Rt(g,new jl(g))}xr.STAT_EVENT="statevent";function Fl(c,g){ye.call(this,xr.STAT_EVENT,c),this.stat=g}k(Fl,ye);function gt(c){const g=zs();Rt(g,new Fl(g,c))}xr.Ma="timingevent";function Yo(c,g){ye.call(this,xr.Ma,c),this.size=g}k(Yo,ye);function Zn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function Hs(c,g,w,S,H,Q){c.info(function(){if(c.g)if(Q)for(var ae="",Ge=Q.split("&"),At=0;At<Ge.length;At++){var Ue=Ge[At].split("=");if(1<Ue.length){var Lt=Ue[0];Ue=Ue[1];var Et=Lt.split("_");ae=2<=Et.length&&Et[1]=="type"?ae+(Lt+"="+Ue+"&"):ae+(Lt+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+g+`
`+w+`
`+ae})}function Xo(c,g,w,S,H,Q,ae){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+g+`
`+w+`
`+Q+" "+ae})}function er(c,g,w,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Tf(c,w)+(S?" "+S:"")})}function Ul(c,g){c.info(function(){return"TIMEOUT: "+g})}$s.prototype.info=function(){};function Tf(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var S=w[c];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return Ol(w)}catch{return g}}var Jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function Ws(){}k(Ws,Bs),Ws.prototype.g=function(){return new XMLHttpRequest},Ws.prototype.i=function(){return{}},tr=new Ws;function nr(c,g,w,S){this.j=c,this.i=g,this.l=w,this.R=S||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oc}function Oc(){this.i=null,this.g="",this.h=!1}var Bl={},Zo={};function ea(c,g,w){c.L=1,c.v=Bi(Sn(g)),c.m=w,c.P=!0,zl(c,null)}function zl(c,g){c.F=Date.now(),Je(c),c.A=Sn(c.v);var w=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),$i(w.i,"t",S),c.C=0,w=c.j.J,c.h=new Oc,c.g=Jc(c.j,w?g:null,!c.m),0<c.O&&(c.M=new Fs(E(c.Y,c,c.g),c.O)),g=c.U,w=c.g,S=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Nl[0]=H.toString()),H=Nl);for(var Q=0;Q<H.length;Q++){var ae=Al(w,H[Q],S||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),ni(),Hs(c.i,c.u,c.A,c.l,c.R,c.m)}nr.prototype.ca=function(c){c=c.target;const g=this.M;g&&mn(c)==3?g.j():this.Y(c)},nr.prototype.Y=function(c){try{if(c==this.g)e:{const Et=mn(this.g);var g=this.g.Ba();const jn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||Gl(this.g)))){this.J||Et!=4||g==7||(g==8||0>=jn?ni(3):ni(2)),qs(this);var w=this.g.Z();this.X=w;t:if(Lc(this)){var S=Gl(this.g);c="";var H=S.length,Q=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),Mi(this);var ae="";break t}this.h.i=new h.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(Q&&g==H-1)});S.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=w==200,Xo(this.i,this.u,this.A,this.l,this.R,Et,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,At=this.g;if((Ge=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ge)){var Ue=Ge;break t}}Ue=null}if(w=Ue)er(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$l(this,w);else{this.o=!1,this.s=3,gt(12),Vn(this),Mi(this);break e}}if(this.P){w=!0;let An;for(;!this.J&&this.C<ae.length;)if(An=xf(this,ae),An==Zo){Et==4&&(this.s=4,gt(14),w=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Bl){this.s=4,gt(15),er(this.i,this.l,ae,"[Invalid Chunk]"),w=!1;break}else er(this.i,this.l,An,null),$l(this,An);if(Lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||ae.length!=0||this.h.h||(this.s=1,gt(16),w=!1),this.o=this.o&&w,!w)er(this.i,this.l,ae,"[Invalid Chunked Response]"),Vn(this),Mi(this);else if(0<ae.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Yl(Lt),Lt.M=!0,gt(11))}}else er(this.i,this.l,ae,null),$l(this,ae);Et==4&&Vn(this),this.o&&!this.J&&(Et==4?ha(this.j,this):(this.o=!1,Je(this)))}else oa(this.g),w==400&&0<ae.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Vn(this),Mi(this)}}}catch{}finally{}};function Lc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xf(c,g){var w=c.C,S=g.indexOf(`
`,w);return S==-1?Zo:(w=Number(g.substring(w,S)),isNaN(w)?Bl:(S+=1,S+w>g.length?Zo:(g=g.slice(S,S+w),c.C=S+w,g)))}nr.prototype.cancel=function(){this.J=!0,Vn(this)};function Je(c){c.S=Date.now()+c.I,Vc(c,c.I)}function Vc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Zn(E(c.ba,c),g)}function qs(c){c.B&&(h.clearTimeout(c.B),c.B=null)}nr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ul(this.i,this.A),this.L!=2&&(ni(),gt(17)),Vn(this),this.s=2,Mi(this)):Vc(this,this.S-c)};function Mi(c){c.j.G==0||c.J||ha(c.j,c)}function Vn(c){qs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Dl(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function $l(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||an(w.h,c))){if(!c.K&&an(w.h,c)&&w.G==3){try{var S=w.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)ca(w),ar(w);else break e;ua(w),gt(18)}}else w.za=H[1],0<w.za-w.T&&37500>H[2]&&w.F&&w.v==0&&!w.C&&(w.C=Zn(E(w.Za,w),6e3));if(1>=jc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ai(w,11)}else if((c.K||w.g==c)&&ca(w),!B(g))for(H=w.Da.g.parse(g),g=0;g<H.length;g++){let Ue=H[g];if(w.T=Ue[0],Ue=Ue[1],w.G==2)if(Ue[0]=="c"){w.K=Ue[1],w.ia=Ue[2];const Lt=Ue[3];Lt!=null&&(w.la=Lt,w.j.info("VER="+w.la));const Et=Ue[4];Et!=null&&(w.Aa=Et,w.j.info("SVER="+w.Aa));const jn=Ue[5];jn!=null&&typeof jn=="number"&&0<jn&&(S=1.5*jn,w.L=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const An=c.g;if(An){const Zs=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zs){var Q=S.h;Q.g||Zs.indexOf("spdy")==-1&&Zs.indexOf("quic")==-1&&Zs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Hl(Q,Q.h),Q.h=null))}if(S.D){const fa=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(S.ya=fa,Ye(S.I,S.D,fa))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),S=w;var ae=c;if(S.qa=Xc(S,S.J?S.ia:null,S.W),ae.K){Fc(S.h,ae);var Ge=ae,At=S.L;At&&(Ge.I=At),Ge.B&&(qs(Ge),Je(Ge)),S.g=ae}else Js(S);0<w.i.length&&Ar(w)}else Ue[0]!="stop"&&Ue[0]!="close"||ai(w,7);else w.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ai(w,7):Bt(w):Ue[0]!="noop"&&w.l&&w.l.ta(Ue),w.v=0)}}ni(4)}catch{}}var Mc=class{constructor(c,g){this.g=c,this.map=g}};function Ks(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function In(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function jc(c){return c.h?1:c.g?c.g.size:0}function an(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Hl(c,g){c.g?c.g.add(g):c.h=g}function Fc(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ks.prototype.cancel=function(){if(this.i=Uc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return b(c.i)}function ta(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,S=0;S<w;S++)g.push(c[S]);return g}g=[],w=0;for(S in c)g[w++]=c[S];return g}function na(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const S in c)g[w++]=S;return g}}}function ji(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=na(c),S=ta(c),H=S.length,Q=0;Q<H;Q++)g.call(void 0,S[Q],w&&w[Q],c)}var Gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var S=c[w].indexOf("="),H=null;if(0<=S){var Q=c[w].substring(0,S);H=c[w].substring(S+1)}else Q=c[w];g(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,Qs(this,c.j),this.o=c.o,this.g=c.g,Fi(this,c.s),this.l=c.l;var g=c.i,w=new Ir;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Ui(this,w),this.m=c.m}else c&&(g=String(c).match(Gs))?(this.h=!1,Qs(this,g[1]||"",!0),this.o=Le(g[2]||""),this.g=Le(g[3]||"",!0),Fi(this,g[4]),this.l=Le(g[5]||"",!0),Ui(this,g[6]||"",!0),this.m=Le(g[7]||"")):(this.h=!1,this.i=new Ir(null,this.h))}ri.prototype.toString=function(){var c=[],g=this.j;g&&c.push(zi(g,ra,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(zi(g,ra,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(zi(w,w.charAt(0)=="/"?$c:zc,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",zi(w,Wl)),c.join("")};function Sn(c){return new ri(c)}function Qs(c,g,w){c.j=w?Le(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Fi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ui(c,g,w){g instanceof Ir?(c.i=g,Sr(c.i,c.h)):(w||(g=zi(g,Hc)),c.i=new Ir(g,c.h))}function Ye(c,g,w){c.i.set(g,w)}function Bi(c){return Ye(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Le(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zi(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Bc),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Bc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ra=/[#\/\?@]/g,zc=/[#\?:]/g,$c=/[#\?]/g,Hc=/[#\?@]/g,Wl=/#/g;function Ir(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ut(c){c.g||(c.g=new Map,c.h=0,c.i&&If(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=Ir.prototype,n.add=function(c,g){Ut(this),this.i=null,c=Mn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function rr(c,g){Ut(c),g=Mn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function ir(c,g){return Ut(c),g=Mn(c,g),c.g.has(g)}n.forEach=function(c,g){Ut(this),this.g.forEach(function(w,S){w.forEach(function(H){c.call(g,H,S,this)},this)},this)},n.na=function(){Ut(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let S=0;S<g.length;S++){const H=c[S];for(let Q=0;Q<H.length;Q++)w.push(g[S])}return w},n.V=function(c){Ut(this);let g=[];if(typeof c=="string")ir(this,c)&&(g=g.concat(this.g.get(Mn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Ut(this),this.i=null,c=Mn(this,c),ir(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function $i(c,g,w){rr(c,g),0<w.length&&(c.i=null,c.g.set(Mn(c,g),b(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var S=g[w];const Q=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var H=Q;ae[S]!==""&&(H+="="+encodeURIComponent(String(ae[S]))),c.push(H)}}return this.i=c.join("&")};function Mn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Sr(c,g){g&&!c.j&&(Ut(c),c.i=null,c.g.forEach(function(w,S){var H=S.toLowerCase();S!=H&&(rr(this,S),$i(this,H,w))},c)),c.j=g}function Sf(c,g){const w=new $s;if(h.Image){const S=new Image;S.onload=I(pn,w,"TestLoadImage: loaded",!0,g,S),S.onerror=I(pn,w,"TestLoadImage: error",!1,g,S),S.onabort=I(pn,w,"TestLoadImage: abort",!1,g,S),S.ontimeout=I(pn,w,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function Wc(c,g){const w=new $s,S=new AbortController,H=setTimeout(()=>{S.abort(),pn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(H),Q.ok?pn(w,"TestPingServer: ok",!0,g):pn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),pn(w,"TestPingServer: error",!1,g)})}function pn(c,g,w,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(w)}catch{}}function Rf(){this.g=new Vl}function qc(c,g,w){const S=w||"";try{ji(c,function(H,Q){let ae=H;p(H)&&(ae=Ol(H)),g.push(S+Q+"="+encodeURIComponent(ae))})}catch(H){throw g.push(S+"type="+encodeURIComponent("_badmap")),H}}function ii(c){this.l=c.Ub||null,this.j=c.eb||!1}k(ii,Bs),ii.prototype.g=function(){return new Ys(this.l,this.j)},ii.prototype.i=function(c){return function(){return c}}({});function Ys(c,g){St.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ys,St),n=Ys.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,or(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?sr(this):or(this),this.readyState==3&&Kc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,sr(this))},n.Qa=function(c){this.g&&(this.response=c,sr(this))},n.ga=function(){this.g&&sr(this)};function sr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,or(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function or(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function si(c){let g="";return se(c,function(w,S){g+=S,g+=":",g+=w,g+=`\r
`}),g}function Hi(c,g,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=si(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):Ye(c,g,w))}function rt(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rt,St);var Af=/^https?$/i,ql=["POST","PUT"];n=rt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?Ko(this.o):Ko(tr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Q){Xs(this,Q);return}if(c=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)w.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())w.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ql,g,void 0))||S||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of w)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){Xs(this,Q)}};function Xs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ia(c),Rn(c)}function ia(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),Rn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rn(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kl(this):this.bb())},n.bb=function(){Kl(this)};function Kl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||mn(c)!=4||c.Z()!=2)){if(c.u&&mn(c)==4)bl(c.Ea,0,c);else if(Rt(c,"readystatechange"),mn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var S;if(S=ae===0){var H=String(c.D).match(Gs)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),S=!Af.test(H?H.toLowerCase():"")}w=S}if(w)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var Q=2<mn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",ia(c)}}finally{Rn(c)}}}}function Rn(c,g){if(c.g){sa(c);const w=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Rt(c,"ready");try{w.onreadystatechange=S}catch{}}}function sa(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function mn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ll(g)}};function Gl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(c){const g={};c=(c.g&&2<=mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(B(c[S]))continue;var w=j(c[S]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=g[H]||[];g[H]=Q,Q.push(w)}D(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Ql(c){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,c),this.cb=Rr("retryDelaySeedMs",1e4,c),this.Wa=Rr("forwardChannelMaxRetries",2,c),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ks(c&&c.concurrentRequestLimit),this.Da=new Rf,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ql.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,S){gt(0),this.W=c,this.H=g||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.I=Xc(this,null,this.W),Ar(this)};function Bt(c){if(aa(c),c.G==3){var g=c.U++,w=Sn(c.I);if(Ye(w,"SID",c.K),Ye(w,"RID",g),Ye(w,"TYPE","terminate"),oi(c,w),g=new nr(c,c.j,g),g.L=2,g.v=Bi(Sn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=g.v,w=!0),w||(g.g=Jc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Je(g)}Yc(c)}function ar(c){c.g&&(Yl(c),c.g.cancel(),c.g=null)}function aa(c){ar(c),c.u&&(h.clearTimeout(c.u),c.u=null),ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Ar(c){if(!In(c.h)&&!c.s){c.s=!0;var g=c.Ga;Re||le(),ie||(Re(),ie=!0),ge.add(g,c),c.B=0}}function Pf(c,g){return jc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Zn(E(c.Ga,c,g),Qc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new nr(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=R(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Wi(this,H,g),w=Sn(this.I),Ye(w,"RID",c),Ye(w,"CVER",22),this.D&&Ye(w,"X-HTTP-Session-Id",this.D),oi(this,w),Q&&(this.O?g="headers="+encodeURIComponent(String(si(Q)))+"&"+g:this.m&&Hi(w,this.m,Q)),Hl(this.h,H),this.Ua&&Ye(w,"TYPE","init"),this.P?(Ye(w,"$req",g),Ye(w,"SID","null"),H.T=!0,ea(H,w,null)):ea(H,w,g),this.G=2}}else this.G==3&&(c?la(this,c):this.i.length==0||In(this.h)||la(this))};function la(c,g){var w;g?w=g.l:w=c.U++;const S=Sn(c.I);Ye(S,"SID",c.K),Ye(S,"RID",w),Ye(S,"AID",c.T),oi(c,S),c.m&&c.o&&Hi(S,c.m,c.o),w=new nr(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Wi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hl(c.h,w),ea(w,S,g)}function oi(c,g){c.H&&se(c.H,function(w,S){Ye(g,S,w)}),c.l&&ji({},function(w,S){Ye(g,S,w)})}function Wi(c,g,w){w=Math.min(c.i.length,w);var S=c.l?E(c.l.Na,c.l,c):null;e:{var H=c.i;let Q=-1;for(;;){const ae=["count="+w];Q==-1?0<w?(Q=H[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let Ge=!0;for(let At=0;At<w;At++){let Ue=H[At].g;const Lt=H[At].map;if(Ue-=Q,0>Ue)Q=Math.max(0,H[At].g-100),Ge=!1;else try{qc(Lt,ae,"req"+Ue+"_")}catch{S&&S(Lt)}}if(Ge){S=ae.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,S}function Js(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Re||le(),ie||(Re(),ie=!0),ge.add(g,c),c.v=0}}function ua(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Zn(E(c.Fa,c),Qc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Gc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Zn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ar(this),Gc(this))};function Yl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Gc(c){c.g=new nr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Sn(c.qa);Ye(g,"RID","rpc"),Ye(g,"SID",c.K),Ye(g,"AID",c.T),Ye(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ye(g,"TO",c.ja),Ye(g,"TYPE","xmlhttp"),oi(c,g),c.m&&c.o&&Hi(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Bi(Sn(g)),w.m=null,w.P=!0,zl(w,c)}n.Za=function(){this.C!=null&&(this.C=null,ar(this),ua(this),gt(19))};function ca(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ha(c,g){var w=null;if(c.g==g){ca(c),Yl(c),c.g=null;var S=2}else if(an(c.h,g))w=g.D,Fc(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var H=c.B;S=zs(),Rt(S,new Yo(S,w)),Ar(c)}else Js(c);else if(H=g.s,H==3||H==0&&0<g.X||!(S==1&&Pf(c,g)||S==2&&ua(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),H){case 1:ai(c,5);break;case 4:ai(c,10);break;case 3:ai(c,6);break;default:ai(c,2)}}}function Qc(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function ai(c,g){if(c.j.info("Error code "+g),g==2){var w=E(c.fb,c),S=c.Xa;const H=!S;S=new ri(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qs(S,"https"),Bi(S),H?Sf(S.toString(),w):Wc(S.toString(),w)}else gt(2);c.G=0,c.l&&c.l.sa(g),Yc(c),aa(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Yc(c){if(c.G=0,c.ka=[],c.l){const g=Uc(c.h);(g.length!=0||c.i.length!=0)&&(P(c.ka,g),P(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function Xc(c,g,w){var S=w instanceof ri?Sn(w):new ri(w);if(S.g!="")g&&(S.g=g+"."+S.g),Fi(S,S.s);else{var H=h.location;S=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var Q=new ri(null);S&&Qs(Q,S),g&&(Q.g=g),H&&Fi(Q,H),w&&(Q.l=w),S=Q}return w=c.D,g=c.ya,w&&g&&Ye(S,w,g),Ye(S,"VER",c.la),oi(c,S),S}function Jc(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new rt(new ii({eb:w})):new rt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}n=Xl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function da(){}da.prototype.g=function(c,g){return new ln(c,g)};function ln(c,g){St.call(this),this.g=new Ql(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!B(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!B(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Pr(this)}k(ln,St),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Bt(this.g)},ln.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Ol(c),c=w);g.i.push(new Mc(g.Ya++,c)),g.G==3&&Ar(g)},ln.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,ln.aa.N.call(this)};function Zc(c){Tr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}k(Zc,Tr);function eh(){Qo.call(this),this.status=1}k(eh,Qo);function Pr(c){this.g=c}k(Pr,Xl),Pr.prototype.ua=function(){Rt(this.g,"a")},Pr.prototype.ta=function(c){Rt(this.g,new Zc(c))},Pr.prototype.sa=function(c){Rt(this.g,new eh)},Pr.prototype.ra=function(){Rt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,eI=function(){return new da},Zx=function(){return zs()},Jx=xr,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jo.NO_ERROR=0,Jo.TIMEOUT=8,Jo.HTTP_ERROR=6,pd=Jo,Dc.COMPLETE="complete",Xx=Dc,Go.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",St.prototype.listen=St.prototype.K,Cu=Go,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Yx=rt}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const _w="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Mg("@firebase/firestore");function Oa(){return Do.logLevel}function ce(n,...e){if(Do.logLevel<=De.DEBUG){const t=e.map(Xg);Do.debug(`Firestore (${_l}): ${n}`,...t)}}function ki(n,...e){if(Do.logLevel<=De.ERROR){const t=e.map(Xg);Do.error(`Firestore (${_l}): ${n}`,...t)}}function ll(n,...e){if(Do.logLevel<=De.WARN){const t=e.map(Xg);Do.warn(`Firestore (${_l}): ${n}`,...t)}}function Xg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: `+n;throw ki(e),new Error(e)}function Ke(n,e){n||Ae()}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class eN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Is,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Is)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new tI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new nn(e)}}class nN{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class rN{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nN(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const r=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new iN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=oN(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function ul(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new bt(0,0))}static max(){return new Pe(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Dr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=Dr.isNumericId(e),s=Dr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class ft extends Dr{construct(e,t,r){return new ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ft(t)}static emptyPath(){return new ft([])}}const aN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Dr{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return aN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new Ee(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ee(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new Ee(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ft.fromString(e))}static fromName(e){return new Te(ft.fromString(e).popFirst(5))}static empty(){return new Te(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ft(e.slice()))}}function lN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new bt(t+1,0):new bt(t,r));return new As(s,Te.empty(),e)}function uN(n){return new As(n.readTime,n.key,-1)}class As{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new As(Pe.min(),Te.empty(),-1)}static max(){return new As(Pe.max(),Te.empty(),-1)}}function cN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==hN)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let s=0,a=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++a,l&&a===s&&t()},f=>r(f))}),l=!0,a===s&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(s=>s?X.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new X((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next(v=>{l[p]=v,++h,h===a&&r(l)},v=>s(v))}})}static doWhile(e,t){return new X((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function fN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function El(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tf.oe=-1;function nf(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function pN(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ww(e)),e=gN(n.get(t),e);return ww(e)}function gN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function ww(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=a??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Wt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,s,a){return this}insert(e,t,r){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tw(this.data.getIterator())}getIteratorFrom(e){return new Tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class Tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new _r([])}unionWith(e){let t=new Nt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iI("Invalid base64 string: "+a):a}}(e);return new Gt(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const yN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=yN.exec(n);if(Ke(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function rf(n){const e=n.mapValue.fields.__previous_value__;return Jg(e)?rf(e):e}function Qu(n){const e=Ps(n.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t,r,s,a,l,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}class Yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jg(n)?4:wN(n)?9007199254740991:_N(n)?10:11:Ae()}function Wr(n,e){if(n===e)return!0;const t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qu(n).isEqual(Qu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Ps(s.timestampValue),h=Ps(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Cs(s.bytesValue).isEqual(Cs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return _t(s.geoPointValue.latitude)===_t(a.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return _t(s.integerValue)===_t(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=_t(s.doubleValue),h=_t(a.doubleValue);return l===h?Dd(l)===Dd(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return ul(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(Ew(l)!==Ew(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Wr(l[f],h[f])))return!1;return!0}(n,e);default:return Ae()}}function Xu(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function cl(n,e){if(n===e)return 0;const t=ks(n),r=ks(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(a,l){const h=_t(a.integerValue||a.doubleValue),f=_t(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return xw(n.timestampValue,e.timestampValue);case 4:return xw(Qu(n),Qu(e));case 5:return je(n.stringValue,e.stringValue);case 6:return function(a,l){const h=Cs(a),f=Cs(l);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const v=je(h[p],f[p]);if(v!==0)return v}return je(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const h=je(_t(a.latitude),_t(l.latitude));return h!==0?h:je(_t(a.longitude),_t(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Iw(n.arrayValue,e.arrayValue);case 10:return function(a,l){var h,f,p,v;const _=a.fields||{},E=l.fields||{},I=(h=_.value)===null||h===void 0?void 0:h.arrayValue,k=(f=E.value)===null||f===void 0?void 0:f.arrayValue,b=je(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((v=k==null?void 0:k.values)===null||v===void 0?void 0:v.length)||0);return b!==0?b:Iw(I,k)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===ed.mapValue&&l===ed.mapValue)return 0;if(a===ed.mapValue)return 1;if(l===ed.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let _=0;_<f.length&&_<v.length;++_){const E=je(f[_],v[_]);if(E!==0)return E;const I=cl(h[f[_]],p[v[_]]);if(I!==0)return I}return je(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function xw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Ps(n),r=Ps(e),s=je(t.seconds,r.seconds);return s!==0?s:je(t.nanos,r.nanos)}function Iw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=cl(t[s],r[s]);if(a)return a}return je(t.length,r.length)}function hl(n){return Xm(n)}function Xm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ps(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Xm(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Xm(t.fields[l])}`;return s+"}"}(n.mapValue):Ae()}function md(n){switch(ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+md(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+md(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Vo(r.fields,(a,l)=>{s+=a.length+md(l)}),s}(n.mapValue);default:throw Ae()}}function Jm(n){return!!n&&"integerValue"in n}function Zg(n){return!!n&&"arrayValue"in n}function Sw(n){return!!n&&"nullValue"in n}function Rw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gd(n){return!!n&&"mapValue"in n}function _N(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=Kt.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=Vu(l):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];gd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Vo(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Qn(Vu(this.value))}}function sI(n){const e=[];return Vo(n.fields,(t,r)=>{const s=new Kt([t]);if(gd(r)){const a=sI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new rn(e,0,Pe.min(),Pe.min(),Pe.min(),Qn.empty(),0)}static newFoundDocument(e,t,r,s){return new rn(e,1,t,Pe.min(),r,s,0)}static newNoDocument(e,t){return new rn(e,2,t,Pe.min(),Pe.min(),Qn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,Pe.min(),Pe.min(),Qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.position=e,this.inclusive=t}}function Aw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=Te.comparator(Te.fromName(l.referenceValue),t.key):r=cl(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function EN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oI=class{};class kt extends oI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xN(e,t,r):t==="array-contains"?new RN(e,r):t==="in"?new AN(e,r):t==="not-in"?new PN(e,r):t==="array-contains-any"?new CN(e,r):new kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IN(e,r):new SN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cl(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends oI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new qr(e,t)}matches(e){return aI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aI(n){return n.op==="and"}function lI(n){return TN(n)&&aI(n)}function TN(n){for(const e of n.filters)if(e instanceof qr)return!1;return!0}function Zm(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+hl(n.value);if(lI(n))return n.filters.map(e=>Zm(e)).join(",");{const e=n.filters.map(t=>Zm(t)).join(",");return`${n.op}(${e})`}}function uI(n,e){return n instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&Wr(r.value,s.value)}(n,e):n instanceof qr?function(r,s){return s instanceof qr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,l,h)=>a&&uI(l,s.filters[h]),!0):!1}(n,e):void Ae()}function cI(n){return n instanceof kt?function(t){return`${t.field.canonicalString()} ${t.op} ${hl(t.value)}`}(n):n instanceof qr?function(t){return t.op.toString()+" {"+t.getFilters().map(cI).join(" ,")+"}"}(n):"Filter"}class xN extends kt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class IN extends kt{constructor(e,t){super(e,"in",t),this.keys=hI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SN extends kt{constructor(e,t){super(e,"not-in",t),this.keys=hI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class RN extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zg(t)&&Xu(t.arrayValue,this.value)}}class AN extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}}class PN extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Xu(this.value.arrayValue,t)}}class CN extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.ue=null}}function Cw(n,e=null,t=[],r=[],s=null,a=null,l=null){return new kN(n,e,t,r,s,a,l)}function ey(n){const e=Ce(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hl(r)).join(",")),e.ue=t}return e.ue}function ty(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function eg(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bN(n,e,t,r,s,a,l,h){return new sf(n,e,t,r,s,a,l,h)}function ny(n){return new sf(n)}function kw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NN(n){return n.collectionGroup!==null}function Mu(n){const e=Ce(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Nt(Kt.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Ld(a,r))}),t.has(Kt.keyField().canonicalString())||e.ce.push(new Ld(Kt.keyField(),r))}return e.ce}function Br(n){const e=Ce(n);return e.le||(e.le=DN(e,Mu(n))),e.le}function DN(n,e){if(n.limitType==="F")return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ld(s.field,a)});const t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tg(n,e,t){return new sf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return ty(Br(n),Br(e))&&n.limitType===e.limitType}function dI(n){return`${ey(Br(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>cI(s)).join(", ")}]`),nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>hl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>hl(s)).join(",")),`Target(${r})`}(Br(n))}; limitType=${n.limitType})`}function af(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Te.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Mu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,h,f){const p=Aw(l,h,f);return l.inclusive?p<=0:p<0}(r.startAt,Mu(r),s)||r.endAt&&!function(l,h,f){const p=Aw(l,h,f);return l.inclusive?p>=0:p>0}(r.endAt,Mu(r),s))}(n,e)}function ON(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fI(n){return(e,t)=>{let r=!1;for(const s of Mu(n)){const a=LN(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function LN(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?cl(f,p):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new ut(Te.comparator);function bi(){return VN}const pI=new ut(Te.comparator);function ku(...n){let e=pI;for(const t of n)e=e.insert(t.key,t);return e}function mI(n){let e=pI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vo(){return ju()}function gI(){return ju()}function ju(){return new Mo(n=>n.toString(),(n,e)=>n.isEqual(e))}const MN=new ut(Te.comparator),jN=new Nt(Te.comparator);function Oe(...n){let e=jN;for(const t of n)e=e.add(t);return e}const FN=new Nt(je);function UN(){return FN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function yI(n){return{integerValue:""+n}}function BN(n,e){return pN(e)?yI(e):ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function zN(n,e,t){return n instanceof Ju?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Jg(a)&&(a=rf(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Zu?_I(n,e):n instanceof ec?wI(n,e):function(s,a){const l=vI(s,a),h=bw(l)+bw(s.Pe);return Jm(l)&&Jm(s.Pe)?yI(h):ry(s.serializer,h)}(n,e)}function $N(n,e,t){return n instanceof Zu?_I(n,e):n instanceof ec?wI(n,e):t}function vI(n,e){return n instanceof Vd?function(r){return Jm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ju extends lf{}class Zu extends lf{constructor(e){super(),this.elements=e}}function _I(n,e){const t=EI(e);for(const r of n.elements)t.some(s=>Wr(s,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends lf{constructor(e){super(),this.elements=e}}function wI(n,e){let t=EI(e);for(const r of n.elements)t=t.filter(s=>!Wr(s,r));return{arrayValue:{values:t}}}class Vd extends lf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bw(n){return _t(n.integerValue||n.doubleValue)}function EI(n){return Zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.field=e,this.transform=t}}function WN(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Zu&&s instanceof Zu||r instanceof ec&&s instanceof ec?ul(r.elements,s.elements,Wr):r instanceof Vd&&s instanceof Vd?Wr(r.Pe,s.Pe):r instanceof Ju&&s instanceof Ju}(n.transform,e.transform)}class qN{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uf{}function TI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new II(n.key,Ii.none()):new Ec(n.key,n.data,Ii.none());{const t=n.data,r=Qn.empty();let s=new Nt(Kt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new jo(n.key,r,new _r(s.toArray()),Ii.none())}}function KN(n,e,t){n instanceof Ec?function(s,a,l){const h=s.value.clone(),f=Dw(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof jo?function(s,a,l){if(!yd(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=Dw(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(xI(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Fu(n,e,t,r){return n instanceof Ec?function(a,l,h,f){if(!yd(a.precondition,l))return h;const p=a.value.clone(),v=Ow(a.fieldTransforms,f,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof jo?function(a,l,h,f){if(!yd(a.precondition,l))return h;const p=Ow(a.fieldTransforms,f,l),v=l.data;return v.setAll(xI(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(a,l,h){return yd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(n,e,t)}function GN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=vI(r.transform,s||null);a!=null&&(t===null&&(t=Qn.empty()),t.set(r.field,a))}return t||null}function Nw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ul(r,s,(a,l)=>WN(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ec extends uf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class jo extends uf{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Dw(n,e,t){const r=new Map;Ke(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,$N(l,h,t[s]))}return r}function Ow(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,zN(a,l,e))}return r}class II extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QN extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&KN(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gI();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=TI(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,r)=>Nw(t,r))&&ul(this.baseMutations,e.baseMutations,(t,r)=>Nw(t,r))}}class iy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ke(e.mutations.length===r.length);let s=function(){return MN}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new iy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Be;function ZN(n){switch(n){default:return Ae();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function SI(n){if(n===void 0)return ki("GRPC error has no .code"),re.UNKNOWN;switch(n){case xt.OK:return re.OK;case xt.CANCELLED:return re.CANCELLED;case xt.UNKNOWN:return re.UNKNOWN;case xt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case xt.INTERNAL:return re.INTERNAL;case xt.UNAVAILABLE:return re.UNAVAILABLE;case xt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case xt.NOT_FOUND:return re.NOT_FOUND;case xt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case xt.ABORTED:return re.ABORTED;case xt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case xt.DATA_LOSS:return re.DATA_LOSS;default:return Ae()}}(Be=xt||(xt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new xs([4294967295,4294967295],0);function Lw(n){const e=eD().encode(n),t=new Qx;return t.update(e),new Uint8Array(t.digest())}function Vw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new xs([t,r],0),new xs([s,a],0)]}class sy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(r<0)throw new bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=xs.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(xs.fromNumber(r)));return s.compare(tD)===1&&(s=new xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Lw(e),[r,s]=Vw(t);for(let a=0;a<this.hashCount;a++){const l=this.de(r,s,a);if(!this.Ee(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new sy(a,s,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.Te===0)return;const t=Lw(e),[r,s]=Vw(t);for(let a=0;a<this.hashCount;a++){const l=this.de(r,s,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cf(Pe.min(),s,new ut(je),bi(),Oe())}}class Tc{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class RI{constructor(e,t){this.targetId=e,this.me=t}}class AI{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Mw{constructor(){this.fe=0,this.ge=jw(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),r=Oe();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ae()}}),new Tc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=jw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nD{constructor(e){this.Be=e,this.Le=new Map,this.ke=bi(),this.qe=td(),this.Qe=td(),this.Ke=new ut(je)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const a=s.target;if(eg(a))if(r===0){const l=new Te(a.path);this.We(t,l,rn.newNoDocument(l,Pe.min()))}else Ke(r===1);else{const l=this.Ze(t);if(l!==r){const h=this.Xe(e),f=h?this.et(h,e,l):1;if(f!==0){this.He(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=Cs(r).toUint8Array()}catch(f){if(f instanceof iI)return ll("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new sy(l,s,a)}catch(f){return ll(f instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Te===0?null:h}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const l=this.Be.nt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.We(t,a,null),s++)}),s}it(e){const t=new Map;this.Le.forEach((a,l)=>{const h=this.Ye(l);if(h){if(a.current&&eg(h.target)){const f=new Te(h.target.path);this.st(f).has(l)||this.ot(l,f)||this.We(l,f,rn.newNoDocument(f,e))}a.be&&(t.set(l,a.ve()),a.Ce())}});let r=Oe();this.Qe.forEach((a,l)=>{let h=!0;l.forEachWhile(f=>{const p=this.Ye(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,l)=>l.setReadTime(e));const s=new cf(e,t,this.Ke,this.ke,r);return this.ke=bi(),this.qe=td(),this.Qe=td(),this.Ke=new ut(je),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Mw,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Nt(je),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Nt(je),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Mw),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function td(){return new ut(Te.comparator)}function jw(){return new ut(Te.comparator)}const rD={asc:"ASCENDING",desc:"DESCENDING"},iD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sD={and:"AND",or:"OR"};class oD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ng(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aD(n,e){return Md(n,e.toTimestamp())}function zr(n){return Ke(!!n),Pe.fromTimestamp(function(t){const r=Ps(t);return new bt(r.seconds,r.nanos)}(n))}function oy(n,e){return rg(n,e).canonicalString()}function rg(n,e){const t=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CI(n){const e=ft.fromString(n);return Ke(OI(e)),e}function ig(n,e){return oy(n.databaseId,e.path)}function lm(n,e){const t=CI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(bI(t))}function kI(n,e){return oy(n.databaseId,e)}function lD(n){const e=CI(n);return e.length===4?ft.emptyPath():bI(e)}function sg(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bI(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Fw(n,e,t){return{name:ig(n,e),fields:t.value.mapValue.fields}}function uD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,v){return p.useProto3Json?(Ke(v===void 0||typeof v=="string"),Gt.fromBase64String(v||"")):(Ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Gt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const v=p.code===void 0?re.UNKNOWN:SI(p.code);return new Ee(v,p.message||"")}(l);t=new AI(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lm(n,r.document.name),a=zr(r.document.updateTime),l=r.document.createTime?zr(r.document.createTime):Pe.min(),h=new Qn({mapValue:{fields:r.document.fields}}),f=rn.newFoundDocument(s,a,l,h),p=r.targetIds||[],v=r.removedTargetIds||[];t=new vd(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lm(n,r.document),a=r.readTime?zr(r.readTime):Pe.min(),l=rn.newNoDocument(s,a),h=r.removedTargetIds||[];t=new vd([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lm(n,r.document),a=r.removedTargetIds||[];t=new vd([],a,s,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new JN(s,a),h=r.targetId;t=new RI(h,l)}}return t}function cD(n,e){let t;if(e instanceof Ec)t={update:Fw(n,e.key,e.value)};else if(e instanceof II)t={delete:ig(n,e.key)};else if(e instanceof jo)t={update:Fw(n,e.key,e.data),updateMask:_D(e.fieldMask)};else{if(!(e instanceof QN))return Ae();t={verify:ig(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof Ju)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ec)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Vd)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:aD(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()}(n,e.precondition)),t}function hD(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map(t=>function(s,a){let l=s.updateTime?zr(s.updateTime):zr(a);return l.isEqual(Pe.min())&&(l=zr(a)),new qN(l,s.transformResults||[])}(t,e))):[]}function dD(n,e){return{documents:[kI(n,e.path)]}}function fD(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kI(n,s);const a=function(p){if(p.length!==0)return DI(qr.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(v=>function(E){return{field:Va(E.field),direction:gD(E.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=ng(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ct:t,parent:s}}function pD(n){let e=lD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ke(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(_){const E=NI(_);return E instanceof qr&&lI(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(_){return _.map(E=>function(k){return new Ld(Ma(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(_){let E;return E=typeof _=="object"?_.value:_,nf(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(_){const E=!!_.before,I=_.values||[];return new Od(I,E)}(t.startAt));let p=null;return t.endAt&&(p=function(_){const E=!_.before,I=_.values||[];return new Od(I,E)}(t.endAt)),bN(e,s,l,a,h,"F",f,p)}function mD(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ma(t.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ma(t.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ma(t.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ma(t.unaryFilter.field);return kt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return kt.create(Ma(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return qr.create(t.compositeFilter.filters.map(r=>NI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function gD(n){return rD[n]}function yD(n){return iD[n]}function vD(n){return sD[n]}function Va(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Kt.fromServerFormat(n.fieldPath)}function DI(n){return n instanceof kt?function(t){if(t.op==="=="){if(Rw(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(Sw(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rw(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(Sw(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:yD(t.op),value:t.value}}}(n):n instanceof qr?function(t){const r=t.getFilters().map(s=>DI(s));return r.length===1?r[0]:{compositeFilter:{op:vD(t.op),filters:r}}}(n):Ae()}function _D(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,r,s,a=Pe.min(),l=Pe.min(),h=Gt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.ht=e}}function ED(n){const e=pD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.ln=new xD}addToCollectionParentIndex(e,t){return this.ln.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(As.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class xD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nt(ft.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(41943040,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new dl(0)}static Qn(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw([n,e],[t,r]){const s=je(n,t);return s===0?je(e,r):s}class ID{constructor(e){this.Gn=e,this.buffer=new Nt(Bw),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Bw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){El(t)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await wl(t)}await this.Yn(3e5)})}}class RD{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return X.resolve(tf.oe);const r=new ID(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Uw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uw):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,a,l,h,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(r=_,h=Date.now(),this.removeTargets(e,r,t))).next(_=>(a=_,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(p=Date.now(),Oa()<=De.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:_})))}}function AD(n,e){return new RD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.changes=new Mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Fu(r.mutation,s,_r.empty(),bt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){const s=vo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let l=ku();return a.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=vo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,s){let a=bi();const l=ju(),h=function(){return ju()}();return t.forEach((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof jo)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),Fu(v.mutation,p,v.mutation.getFieldMask(),bt.now())):l.set(p.key,_r.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,v)=>l.set(p,v)),t.forEach((p,v)=>{var _;return h.set(p,new CD(v,(_=l.get(p))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const r=ju();let s=new ut((l,h)=>l-h),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let v=r.get(f)||_r.empty();v=h.applyToLocalView(p,v),r.set(f,v);const _=(s.get(h.batchId)||Oe()).add(f);s=s.insert(h.batchId,_)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,v=f.value,_=gI();v.forEach(E=>{if(!a.has(E)){const I=TI(t.get(E),r.get(E));I!==null&&_.set(E,I),a=a.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return X.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):X.resolve(vo());let h=-1,f=a;return l.next(p=>X.forEach(p,(v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(v)?X.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{f=f.insert(v,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,Oe())).next(v=>({batchId:h,changes:mI(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let s=ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=ku();return this.indexManager.getCollectionParents(e,a).next(h=>X.forEach(h,f=>{const p=function(_,E){return new sf(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(v=>{v.forEach((_,E)=>{l=l.insert(_,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(l=>{a.forEach((f,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,rn.newInvalidDocument(v)))});let h=ku();return l.forEach((f,p)=>{const v=a.get(f);v!==void 0&&Fu(v.mutation,p,_r.empty(),bt.now()),af(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return X.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:zr(s.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:ED(s.bundledQuery),readTime:zr(s.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.overlays=new ut(Te.comparator),this.dr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vo();return X.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.Tt(e,t,a)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.dr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const s=vo(),a=t.length+1,l=new Te(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return X.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new ut((p,v)=>p-v);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=a.get(p.largestBatchId);v===null&&(v=vo(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=vo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=s)););return X.resolve(h)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.dr.get(s.largestBatchId).delete(r.key);this.dr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new XN(t,r));let a=this.dr.get(t);a===void 0&&(a=Oe(),this.dr.set(t,a)),this.dr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Er=new Nt(Ft.Ar),this.Rr=new Nt(Ft.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ft(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Te(new ft([])),r=new Ft(t,e),s=new Ft(t,e+1),a=[];return this.Rr.forEachInRange([r,s],l=>{this.gr(l),a.push(l.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Te(new ft([])),r=new Ft(t,e),s=new Ft(t,e+1);let a=Oe();return this.Rr.forEachInRange([r,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ft(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Te.comparator(e.key,t.key)||je(e.br,t.br)}static Vr(e,t){return je(e.br,t.br)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Nt(Ft.Ar)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new YN(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.vr=this.vr.add(new Ft(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return X.resolve(l)}lookupMutationBatch(e,t){return X.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),a=s<0?0:s;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,s],l=>{const h=this.Cr(l.br);a.push(h)}),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(je);return t.forEach(s=>{const a=new Ft(s,0),l=new Ft(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,l],h=>{r=r.add(h.br)})}),X.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Te.isDocumentKey(a)||(a=a.child(""));const l=new Ft(new Te(a),0);let h=new Nt(je);return this.vr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.br)),!0)},l),X.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ke(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return X.forEach(t.mutations,s=>{const a=new Ft(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){const r=new Ft(t,0),s=this.vr.firstAfterOrEqual(r);return X.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.Nr=e,this.docs=function(){return new ut(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():rn.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=bi();const l=t.path,h=new Te(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||cN(uN(v),r)<=0||(s.has(v.key)||af(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ae()}Br(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VD(this)}getSize(e){return X.resolve(this.size)}}class VD extends PD{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.persistence=e,this.Lr=new Mo(t=>ey(t),ty),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new ay,this.targetCount=0,this.Qr=dl.qn()}forEachTarget(e,t){return this.Lr.forEach((r,s)=>t(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),X.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new dl(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Un(t),X.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Lr.forEach((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Lr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),X.waitFor(a).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Lr.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t){this.Kr={},this.overlays={},this.$r=new tf(0),this.Ur=!1,this.Ur=!0,this.Wr=new DD,this.referenceDelegate=e(this),this.Gr=new MD(this),this.indexManager=new TD,this.remoteDocumentCache=function(s){return new LD(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new wD(t),this.jr=new bD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ND,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new OD(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const s=new jD(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(a=>this.referenceDelegate.Jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Yr(e,t){return X.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class jD extends dN{constructor(e){super(),this.currentSequenceNumber=e}}class ly{constructor(e){this.persistence=e,this.Zr=new ay,this.Xr=null}static ei(e){return new ly(e)}get ti(){if(this.Xr)return this.Xr;throw Ae()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),X.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ti,r=>{const s=Te.fromPath(r);return this.ni(e,s).next(a=>{a||t.removeEntry(s,Pe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return X.or([()=>X.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class jd{constructor(e,t){this.persistence=e,this.ri=new Mo(r=>mN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=AD(this,t)}static ei(e,t){return new jd(e,t)}Hr(){}Jr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return X.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(a=>a?X.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.Br(e,l=>this.ir(e,l,t).next(h=>{h||(r++,a.removeEntry(l,Pe.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=md(e.data.value)),t}ir(e,t,r){return X.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Oe(),s=Oe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new uy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return fC()?8:fN(on())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Xi(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.es(e,t,s,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new FD;return this.ts(e,t,l).next(h=>{if(a.result=h,this.Hi)return this.ns(e,t,l,h.size)})}).next(()=>a.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(Oa()<=De.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),X.resolve()):(Oa()<=De.DEBUG&&ce("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(Oa()<=De.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):X.resolve())}Xi(e,t){if(kw(t))return X.resolve(null);let r=Br(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=tg(t,null,"F"),r=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Oe(...a);return this.Zi.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.rs(t,h);return this.ss(t,p,l,f.readTime)?this.Xi(e,tg(t,null,"F")):this.os(e,p,t,f)}))})))}es(e,t,r,s){return kw(t)||s.isEqual(Pe.min())?X.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const l=this.rs(t,a);return this.ss(t,l,r,s)?X.resolve(null):(Oa()<=De.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),La(t)),this.os(e,l,t,lN(s,-1)).next(h=>h))})}rs(e,t){let r=new Nt(fI(e));return t.forEach((s,a)=>{af(e,a)&&(r=r.add(a))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ts(e,t,r){return Oa()<=De.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",La(t)),this.Zi.getDocumentsMatchingQuery(e,t,As.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new ut(je),this.cs=new Mo(a=>ey(a),ty),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kD(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function zD(n,e,t,r){return new BD(n,e,t,r)}async function VI(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let f=Oe();for(const p of s){l.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(p=>({Ts:p,removedBatchIds:l,addedBatchIds:h}))})})}function $D(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,f,p,v){const _=p.batch,E=_.keys();let I=X.resolve();return E.forEach(k=>{I=I.next(()=>v.getEntry(f,k)).next(b=>{const P=p.docVersions.get(k);Ke(P!==null),b.version.compareTo(P)<0&&(_.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),v.addEntry(b)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(f,_))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Oe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function MI(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function HD(n,e){const t=Ce(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const h=[];e.targetChanges.forEach((v,_)=>{const E=s.get(_);if(!E)return;h.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,_).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,_)));let I=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Gt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),s=s.insert(_,I),function(b,P,V){return b.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(E,I,v)&&h.push(t.Gr.updateTargetData(a,I))});let f=bi(),p=Oe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(WD(a,l,e.documentUpdates).next(v=>{f=v.Is,p=v.ds})),!r.isEqual(Pe.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(_=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return X.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(t.us=s,a))}function WD(n,e,t){let r=Oe(),s=Oe();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=bi();return t.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):ce("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Is:l,ds:s}})}function qD(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KD(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(a=>a?(s=a,X.resolve(s)):t.Gr.allocateTargetId(r).next(l=>(s=new ws(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function og(n,e,t){const r=Ce(n),s=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!El(l))throw l;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function zw(n,e,t){const r=Ce(n);let s=Pe.min(),a=Oe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,p,v){const _=Ce(f),E=_.cs.get(v);return E!==void 0?X.resolve(_.us.get(E)):_.Gr.getTargetData(p,v)}(r,l,Br(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(l,h.targetId).next(f=>{a=f})}).next(()=>r._s.getDocumentsMatchingQuery(l,e,t?s:Pe.min(),t?a:Oe())).next(h=>(GD(r,ON(e),h),{documents:h,Es:a})))}function GD(n,e,t){let r=n.ls.get(e)||Pe.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ls.set(e,r)}class $w{constructor(){this.activeTargetIds=UN()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QD{constructor(){this._o=new $w,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new $w,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function um(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class ZD extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Oo(t,r,s,a,l){const h=um(),f=this.No(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const p={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(p,a,l),this.Lo(t,f,p,s).then(v=>(ce("RestConnection",`Received RPC '${t}' ${h}: `,v),v),v=>{throw ll("RestConnection",`RPC '${t}' ${h} failed with error: `,v,"url: ",f,"request:",s),v})}ko(t,r,s,a,l,h){return this.Oo(t,r,s,a,l)}Bo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_l}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,l)=>t[l]=a),s&&s.headers.forEach((a,l)=>t[l]=a)}No(t,r){const s=XD[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,s){const a=um();return new Promise((l,h)=>{const f=new Yx;f.setWithCredentials(!0),f.listenOnce(Xx.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case pd.NO_ERROR:const v=f.getResponseJson();ce(Zt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case pd.TIMEOUT:ce(Zt,`RPC '${e}' ${a} timed out`),h(new Ee(re.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const _=f.getStatus();if(ce(Zt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const k=function(P){const V=P.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN}(I.status);h(new Ee(k,I.message))}else h(new Ee(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ee(re.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ce(Zt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);ce(Zt,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",p,r,15)})}qo(e,t,r){const s=um(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=eI(),h=Zx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");ce(Zt,`Creating RPC '${e}' stream ${s}: ${v}`,f);const _=l.createWebChannel(v,f);let E=!1,I=!1;const k=new JD({Eo:P=>{I?ce(Zt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(E||(ce(Zt,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),ce(Zt,`RPC '${e}' stream ${s} sending:`,P),_.send(P))},Ao:()=>_.close()}),b=(P,V,B)=>{P.listen(V,q=>{try{B(q)}catch(Y){setTimeout(()=>{throw Y},0)}})};return b(_,Cu.EventType.OPEN,()=>{I||(ce(Zt,`RPC '${e}' stream ${s} transport opened.`),k.So())}),b(_,Cu.EventType.CLOSE,()=>{I||(I=!0,ce(Zt,`RPC '${e}' stream ${s} transport closed`),k.Do())}),b(_,Cu.EventType.ERROR,P=>{I||(I=!0,ll(Zt,`RPC '${e}' stream ${s} transport errored:`,P),k.Do(new Ee(re.UNAVAILABLE,"The operation could not be completed")))}),b(_,Cu.EventType.MESSAGE,P=>{var V;if(!I){const B=P.data[0];Ke(!!B);const q=B,Y=(q==null?void 0:q.error)||((V=q[0])===null||V===void 0?void 0:V.error);if(Y){ce(Zt,`RPC '${e}' stream ${s} received error:`,Y);const Z=Y.status;let se=function(A){const L=xt[A];if(L!==void 0)return SI(L)}(Z),D=Y.message;se===void 0&&(se=re.INTERNAL,D="Unknown error status: "+Z+" with message "+Y.message),I=!0,k.Do(new Ee(se,D)),_.close()}else ce(Zt,`RPC '${e}' stream ${s} received:`,B),k.vo(B)}}),b(h,Jx.STAT_EVENT,P=>{P.stat===Ym.PROXY?ce(Zt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Ym.NOPROXY&&ce(Zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.bo()},0),k}}function cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){return new oD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,r=1e3,s=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t,r,s,a,l,h,f){this.li=e,this.Yo=r,this.Zo=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new jI(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new Ee(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.d_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eO extends FI{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=uD(this.serializer,e),r=function(a){if(!("targetChange"in a))return Pe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Pe.min():l.readTime?zr(l.readTime):Pe.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=sg(this.serializer),t.addTarget=function(a,l){let h;const f=l.target;if(h=eg(f)?{documents:dD(a,f)}:{query:fD(a,f).ct},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=PI(a,l.resumeToken);const p=ng(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(Pe.min())>0){h.readTime=Md(a,l.snapshotVersion.toTimestamp());const p=ng(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=mD(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=sg(this.serializer),t.removeTarget=e,this.c_(t)}}class tO extends FI{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=hD(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=sg(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cD(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Oo(e,rg(t,r),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(re.UNKNOWN,a.toString())})}ko(e,t,r,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.ko(e,rg(t,r),s,l,h,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(re.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class rO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ki(t),this.C_=!1):ce("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{r.enqueueAndForget(async()=>{Fo(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(f){const p=Ce(f);p.k_.add(4),await xc(p),p.K_.set("Unknown"),p.k_.delete(4),await df(p)}(this))})}),this.K_=new rO(r,s)}}async function df(n){if(Fo(n))for(const e of n.q_)await e(!0)}async function xc(n){for(const e of n.q_)await e(!1)}function UI(n,e){const t=Ce(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),fy(t)?dy(t):Tl(t).s_()&&hy(t,e))}function cy(n,e){const t=Ce(n),r=Tl(t);t.L_.delete(e),r.s_()&&BI(t,e),t.L_.size===0&&(r.s_()?r.a_():Fo(t)&&t.K_.set("Unknown"))}function hy(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tl(n).V_(e)}function BI(n,e){n.U_.xe(e),Tl(n).m_(e)}function dy(n){n.U_=new nD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Tl(n).start(),n.K_.F_()}function fy(n){return Fo(n)&&!Tl(n).i_()&&n.L_.size>0}function Fo(n){return Ce(n).k_.size===0}function zI(n){n.U_=void 0}async function sO(n){n.K_.set("Online")}async function oO(n){n.L_.forEach((e,t)=>{hy(n,e)})}async function aO(n,e){zI(n),fy(n)?(n.K_.O_(e),dy(n)):n.K_.set("Unknown")}async function lO(n,e,t){if(n.K_.set("Online"),e instanceof AI&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const h of a.targetIds)s.L_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.L_.delete(h),s.U_.removeTarget(h))}(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fd(n,r)}else if(e instanceof vd?n.U_.$e(e):e instanceof RI?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Pe.min()))try{const r=await MI(n.localStore);t.compareTo(r)>=0&&await function(a,l){const h=a.U_.it(l);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.L_.get(p);v&&a.L_.set(p,v.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,p)=>{const v=a.L_.get(f);if(!v)return;a.L_.set(f,v.withResumeToken(Gt.EMPTY_BYTE_STRING,v.snapshotVersion)),BI(a,f);const _=new ws(v.target,f,p,v.sequenceNumber);hy(a,_)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),await Fd(n,r)}}async function Fd(n,e,t){if(!El(e))throw e;n.k_.add(1),await xc(n),n.K_.set("Offline"),t||(t=()=>MI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await df(n)})}function $I(n,e){return e().catch(t=>Fd(n,t,e))}async function ff(n){const e=Ce(n),t=bs(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;uO(e);)try{const s=await qD(e.localStore,r);if(s===null){e.B_.length===0&&t.a_();break}r=s.batchId,cO(e,s)}catch(s){await Fd(e,s)}HI(e)&&WI(e)}function uO(n){return Fo(n)&&n.B_.length<10}function cO(n,e){n.B_.push(e);const t=bs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function HI(n){return Fo(n)&&!bs(n).i_()&&n.B_.length>0}function WI(n){bs(n).start()}async function hO(n){bs(n).w_()}async function dO(n){const e=bs(n);for(const t of n.B_)e.g_(t.mutations)}async function fO(n,e,t){const r=n.B_.shift(),s=iy.from(r,e,t);await $I(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await ff(n)}async function pO(n,e){e&&bs(n).f_&&await async function(r,s){if(function(l){return ZN(l)&&l!==re.ABORTED}(s.code)){const a=r.B_.shift();bs(r).__(),await $I(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await ff(r)}}(n,e),HI(n)&&WI(n)}async function Ww(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Fo(t);t.k_.add(3),await xc(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await df(t)}async function mO(n,e){const t=Ce(n);e?(t.k_.delete(2),await df(t)):e||(t.k_.add(2),await xc(t),t.K_.set("Unknown"))}function Tl(n){return n.W_||(n.W_=function(t,r,s){const a=Ce(t);return a.b_(),new eO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:sO.bind(null,n),mo:oO.bind(null,n),po:aO.bind(null,n),R_:lO.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),fy(n)?dy(n):n.K_.set("Unknown")):(await n.W_.stop(),zI(n))})),n.W_}function bs(n){return n.G_||(n.G_=function(t,r,s){const a=Ce(t);return a.b_(),new tO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:hO.bind(null,n),po:pO.bind(null,n),p_:dO.bind(null,n),y_:fO.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await ff(n)):(await n.G_.stop(),n.B_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new py(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(n,e){if(ki("AsyncQueue",`${e}: ${n}`),El(n))return new Ee(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(e){return new Ka(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=ku(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ka;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.z_=new ut(Te.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ae():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class fl{constructor(e,t,r,s,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new fl(e,t,Ka.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class yO{constructor(){this.queries=Kw(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Ce(t),a=s.queries;s.queries=Kw(),a.forEach((l,h)=>{for(const f of h.J_)f.onError(r)})})(this,new Ee(re.ABORTED,"Firestore shutting down"))}}function Kw(){return new Mo(n=>dI(n),of)}async function vO(n,e){const t=Ce(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Y_()&&e.Z_()&&(r=2):(a=new gO,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(s,!0);break;case 1:a.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=my(l,`Initialization of query '${La(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&gy(t)}async function _O(n,e){const t=Ce(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.J_.indexOf(e);l>=0&&(a.J_.splice(l,1),a.J_.length===0?s=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wO(n,e){const t=Ce(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.J_)h.ta(s)&&(r=!0);l.H_=s}}r&&gy(t)}function EO(n,e,t){const r=Ce(n),s=r.queries.get(e);if(s)for(const a of s.J_)a.onError(t);r.queries.delete(e)}function gy(n){n.X_.forEach(e=>{e.next()})}var ag,Gw;(Gw=ag||(ag={})).na="default",Gw.Cache="cache";class TO{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.key=e}}class KI{constructor(e){this.key=e}}class xO{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Oe(),this.mutatedKeys=Oe(),this.Va=fI(e),this.ma=new Ka(this.Va)}get fa(){return this.Ea}ga(e,t){const r=t?t.pa:new qw,s=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,_)=>{const E=s.get(v),I=af(this.query,_)?_:null,k=!!E&&this.mutatedKeys.has(E.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;E&&I?E.data.isEqual(I.data)?k!==b&&(r.track({type:3,doc:I}),P=!0):this.ya(E,I)||(r.track({type:2,doc:I}),P=!0,(f&&this.Va(I,f)>0||p&&this.Va(I,p)<0)&&(h=!0)):!E&&I?(r.track({type:0,doc:I}),P=!0):E&&!I&&(r.track({type:1,doc:E}),P=!0,(f||p)&&(h=!0)),P&&(I?(l=l.add(I),a=b?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{ma:l,pa:r,ss:h,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((v,_)=>function(I,k){const b=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return b(I)-b(k)}(v.type,_.type)||this.Va(v.doc,_.doc)),this.wa(r),s=s!=null&&s;const h=t&&!s?this.Sa():[],f=this.Ra.size===0&&this.current&&!s?1:0,p=f!==this.Aa;return this.Aa=f,l.length!==0||p?{snapshot:new fl(this.query,e.ma,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new qw,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Oe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new KI(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new qI(r))}),t}va(e){this.Ea=e.Es,this.Ra=Oe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return fl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class IO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SO{constructor(e){this.key=e,this.Fa=!1}}class RO{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new Mo(h=>dI(h),of),this.Oa=new Map,this.Na=new Set,this.Ba=new ut(Te.comparator),this.La=new Map,this.ka=new ay,this.qa={},this.Qa=new Map,this.Ka=dl.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function AO(n,e,t=!0){const r=ZI(n);let s;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Ca()):s=await GI(r,e,t,!0),s}async function PO(n,e){const t=ZI(n);await GI(t,e,!0,!1)}async function GI(n,e,t,r){const s=await KD(n.localStore,Br(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await CO(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&UI(n.remoteStore,s),h}async function CO(n,e,t,r,s){n.Ua=(_,E,I)=>async function(b,P,V,B){let q=P.view.ga(V);q.ss&&(q=await zw(b.localStore,P.query,!1).then(({documents:D})=>P.view.ga(D,q)));const Y=B&&B.targetChanges.get(P.targetId),Z=B&&B.targetMismatches.get(P.targetId)!=null,se=P.view.applyChanges(q,b.isPrimaryClient,Y,Z);return Yw(b,P.targetId,se.ba),se.snapshot}(n,_,E,I);const a=await zw(n.localStore,e,!0),l=new xO(e,a.Es),h=l.ga(a.documents),f=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(h,n.isPrimaryClient,f);Yw(n,t,p.ba);const v=new IO(e,t,l);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),p.snapshot}async function kO(n,e,t){const r=Ce(n),s=r.xa.get(e),a=r.Oa.get(s.targetId);if(a.length>1)return r.Oa.set(s.targetId,a.filter(l=>!of(l,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await og(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&cy(r.remoteStore,s.targetId),lg(r,s.targetId)}).catch(wl)):(lg(r,s.targetId),await og(r.localStore,s.targetId,!0))}async function bO(n,e){const t=Ce(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cy(t.remoteStore,r.targetId))}async function NO(n,e,t){const r=FO(n);try{const s=await function(l,h){const f=Ce(l),p=bt.now(),v=h.reduce((I,k)=>I.add(k.key),Oe());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=bi(),b=Oe();return f.hs.getEntries(I,v).next(P=>{k=P,k.forEach((V,B)=>{B.isValidDocument()||(b=b.add(V))})}).next(()=>f.localDocuments.getOverlayedDocuments(I,k)).next(P=>{_=P;const V=[];for(const B of h){const q=GN(B,_.get(B.key).overlayedDocument);q!=null&&V.push(new jo(B.key,q,sI(q.value.mapValue),Ii.exists(!0)))}return f.mutationQueue.addMutationBatch(I,p,V,h)}).next(P=>{E=P;const V=P.applyToLocalDocumentSet(_,b);return f.documentOverlayCache.saveOverlays(I,P.batchId,V)})}).then(()=>({batchId:E.batchId,changes:mI(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let p=l.qa[l.currentUser.toKey()];p||(p=new ut(je)),p=p.insert(h,f),l.qa[l.currentUser.toKey()]=p}(r,s.batchId,t),await Ic(r,s.changes),await ff(r.remoteStore)}catch(s){const a=my(s,"Failed to persist write");t.reject(a)}}async function QI(n,e){const t=Ce(n);try{const r=await HD(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.La.get(a);l&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Fa=!0:s.modifiedDocuments.size>0?Ke(l.Fa):s.removedDocuments.size>0&&(Ke(l.Fa),l.Fa=!1))}),await Ic(t,r,e)}catch(r){await wl(r)}}function Qw(n,e,t){const r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((a,l)=>{const h=l.view.ea(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const f=Ce(l);f.onlineState=h;let p=!1;f.queries.forEach((v,_)=>{for(const E of _.J_)E.ea(h)&&(p=!0)}),p&&gy(f)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DO(n,e,t){const r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.La.get(e),a=s&&s.key;if(a){let l=new ut(Te.comparator);l=l.insert(a,rn.newNoDocument(a,Pe.min()));const h=Oe().add(a),f=new cf(Pe.min(),new Map,new ut(je),l,h);await QI(r,f),r.Ba=r.Ba.remove(a),r.La.delete(e),yy(r)}else await og(r.localStore,e,!1).then(()=>lg(r,e,t)).catch(wl)}async function OO(n,e){const t=Ce(n),r=e.batch.batchId;try{const s=await $D(t.localStore,e);XI(t,r,null),YI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ic(t,s)}catch(s){await wl(s)}}async function LO(n,e,t){const r=Ce(n);try{const s=await function(l,h){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return f.mutationQueue.lookupMutationBatch(p,h).next(_=>(Ke(_!==null),v=_.keys(),f.mutationQueue.removeMutationBatch(p,_))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>f.localDocuments.getDocuments(p,v))})}(r.localStore,e);XI(r,e,t),YI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ic(r,s)}catch(s){await wl(s)}}function YI(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function XI(n,e,t){const r=Ce(n);let s=r.qa[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||JI(n,r)})}function JI(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(cy(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),yy(n))}function Yw(n,e,t){for(const r of t)r instanceof qI?(n.ka.addReference(r.key,e),VO(n,r)):r instanceof KI?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||JI(n,r.key)):Ae()}function VO(n,e){const t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.Na.add(r),yy(n))}function yy(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Te(ft.fromString(e)),r=n.Ka.next();n.La.set(r,new SO(t)),n.Ba=n.Ba.insert(t,r),UI(n.remoteStore,new ws(Br(ny(t.path)),r,"TargetPurposeLimboResolution",tf.oe))}}async function Ic(n,e,t){const r=Ce(n),s=[],a=[],l=[];r.xa.isEmpty()||(r.xa.forEach((h,f)=>{l.push(r.Ua(f,e,t).then(p=>{var v;if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){s.push(p);const _=uy.zi(f.targetId,p);a.push(_)}}))}),await Promise.all(l),r.Ma.R_(s),await async function(f,p){const v=Ce(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>X.forEach(p,E=>X.forEach(E.Wi,I=>v.persistence.referenceDelegate.addReference(_,E.targetId,I)).next(()=>X.forEach(E.Gi,I=>v.persistence.referenceDelegate.removeReference(_,E.targetId,I)))))}catch(_){if(!El(_))throw _;ce("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const I=v.us.get(E),k=I.snapshotVersion,b=I.withLastLimboFreeSnapshotVersion(k);v.us=v.us.insert(E,b)}}}(r.localStore,a))}async function MO(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=await VI(t.localStore,e);t.currentUser=e,function(a,l){a.Qa.forEach(h=>{h.forEach(f=>{f.reject(new Ee(re.CANCELLED,l))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ic(t,r.Ts)}}function jO(n,e){const t=Ce(n),r=t.La.get(e);if(r&&r.Fa)return Oe().add(r.key);{let s=Oe();const a=t.Oa.get(e);if(!a)return s;for(const l of a){const h=t.xa.get(l);s=s.unionWith(h.view.fa)}return s}}function ZI(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DO.bind(null,e),e.Ma.R_=wO.bind(null,e.eventManager),e.Ma.Wa=EO.bind(null,e.eventManager),e}function FO(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return zD(this.persistence,new UD,e.initialUser,this.serializer)}ja(e){return new LI(ly.ei,this.serializer)}za(e){return new QD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class UO extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ke(this.persistence.referenceDelegate instanceof jd);const r=this.persistence.referenceDelegate.garbageCollector;return new SD(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new LI(r=>jd.ei(r,t),this.serializer)}}class ug{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MO.bind(null,this.syncEngine),await mO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yO}()}createDatastore(e){const t=hf(e.databaseInfo.databaseId),r=function(a){return new ZD(a)}(e.databaseInfo);return function(a,l,h,f){return new nO(a,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,l,h){return new iO(r,s,a,l,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Qw(this.syncEngine,t,0),function(){return Hw.p()?new Hw:new YD}())}createSyncEngine(e,t){return function(s,a,l,h,f,p,v){const _=new RO(s,a,l,h,f,p);return v&&(_.$a=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=Ce(s);ce("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await xc(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ug.provider={build:()=>new ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=nI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{ce("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ce("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=my(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hm(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Xw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $O(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ww(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Ww(e.remoteStore,s)),n._onlineComponents=e}async function $O(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await hm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ll("Error using user provided cache. Falling back to memory cache: "+t),await hm(n,new Ud)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await hm(n,new UO(void 0));return n._offlineComponents}async function eS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Xw(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await Xw(n,new ug))),n._onlineComponents}function HO(n){return eS(n).then(e=>e.syncEngine)}async function WO(n){const e=await eS(n),t=e.eventManager;return t.onListen=AO.bind(null,e.syncEngine),t.onUnlisten=kO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bO.bind(null,e.syncEngine),t}function qO(n,e,t={}){const r=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,h,f,p){const v=new BO({next:E=>{v.eu(),l.enqueueAndForget(()=>_O(a,_));const I=E.docs.has(h);!I&&E.fromCache?p.reject(new Ee(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&f&&f.source==="server"?p.reject(new Ee(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new TO(ny(h.path),v,{includeMetadataChanges:!0,ua:!0});return vO(a,_)}(await WO(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n,e,t){if(!t)throw new Ee(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GO(n,e,t,r){if(e===!0&&r===!0)throw new Ee(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zw(n){if(!Te.isDocumentKey(n))throw new Ee(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function tc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vy(n);throw new Ee(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _y{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Z2;switch(r.type){case"firstParty":return new rN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Jw.get(t);r&&(ce("ComponentProvider","Removing Datastore"),Jw.delete(t),r.terminate())}(this),Promise.resolve()}}function QO(n,e,t,r={}){var s;const a=(n=tc(n,_y))._getSettings(),l=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=nn.MOCK_USER;else{h=ux(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ee(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new nn(p)}n._authCredentials=new eN(new tI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wy(this.firestore,e,this._query)}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class nc extends wy{constructor(e,t,r){super(e,t,ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new Te(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function nS(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=nI.newId()),KO("doc","path",e),n instanceof _y){const r=ft.fromString(e,...t);return Zw(r),new Yn(n,null,new Te(r))}{if(!(n instanceof Yn||n instanceof nc))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ft.fromString(e,...t));return Zw(r),new Yn(n.firestore,n instanceof nc?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new jI(this,"async_queue_retry"),this.fu=()=>{const r=cm();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=cm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=cm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Is;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!El(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw ki("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=py.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.Eu.push(s),s}pu(){this.Au&&Ae()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class Ey extends _y{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new tE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tE(e),this._firestoreClient=void 0,await e}}}function YO(n,e){const t=typeof n=="object"?n:Fg(),r=typeof n=="string"?n:"(default)",s=Xd(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=ox("firestore");a&&QO(s,...a)}return s}function rS(n){if(n._terminated)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XO(n),n._firestoreClient}function XO(n){var e,t,r;const s=n._freezeSettings(),a=function(h,f,p,v){return new vN(h,f,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,tS(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new zO(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(Gt.fromBase64String(e))}catch(t){throw new Ee(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^__.*__$/;class ZO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}function iS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Ry{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Ry(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Bu(e),s}Lu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Bd(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(iS(this.Mu)&&JO.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class eL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hf(e)}$u(e,t,r,s=!1){return new Ry({Mu:e,methodName:t,Ku:r,path:Kt.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tL(n){const e=n._freezeSettings(),t=hf(n._databaseId);return new eL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nL(n,e,t,r,s,a={}){const l=n.$u(a.merge||a.mergeFields?2:0,e,t,s);lS("Data must be an object, but it was:",l,r);const h=oS(r,l);let f,p;if(a.merge)f=new _r(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const _ of a.mergeFields){const E=rL(e,_,t);if(!l.contains(E))throw new Ee(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);sL(v,E)||v.push(E)}f=new _r(v),p=l.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=l.fieldTransforms;return new ZO(new Qn(h),f,p)}class Ay extends xy{_toFieldTransform(e){return new HN(e.path,new Ju)}isEqual(e){return e instanceof Ay}}function sS(n,e){if(aS(n=Dt(n)))return lS("Unsupported field value:",e,n),oS(n,e);if(n instanceof xy)return function(r,s){if(!iS(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const a=[];let l=0;for(const h of r){let f=sS(h,s.ku(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=Dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=bt.fromDate(r);return{timestampValue:Md(s.serializer,a)}}if(r instanceof bt){const a=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(s.serializer,a)}}if(r instanceof Iy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pl)return{bytesValue:PI(s.serializer,r._byteString)};if(r instanceof Yn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:oy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sy)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.qu("VectorValues must only contain numeric values.");return ry(h.serializer,f)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${vy(r)}`)}(n,e)}function oS(n,e){const t={};return rI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(r,s)=>{const a=sS(s,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function aS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof Iy||n instanceof pl||n instanceof Yn||n instanceof xy||n instanceof Sy)}function lS(n,e,t){if(!aS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=vy(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function rL(n,e,t){if((e=Dt(e))instanceof Ty)return e._internalPath;if(typeof e=="string")return uS(n,e);throw Bd("Field path arguments must be of type string or ",n,!1,void 0,t)}const iL=new RegExp("[~\\*/\\[\\]]");function uS(n,e,t){if(e.search(iL)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ty(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bd(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Ee(re.INVALID_ARGUMENT,h+n+f)}function sL(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oL extends cS{data(){return super.data()}}function hS(n,e){return typeof e=="string"?uS(n,e):e instanceof Ty?e._internalPath:e._delegate._internalPath}class aL{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vo(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>_t(l.doubleValue));return new Sy(a)}convertGeoPoint(e){return new Iy(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ft.fromString(e);Ke(OI(r));const s=new Yu(r.get(1),r.get(3)),a=new Te(r.popFirst(5));return s.isEqual(t)||ki(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n,e,t){let r;return r=n?t.merge||t.mergeFields?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dS extends cS{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cL extends dS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){n=tc(n,Yn);const e=tc(n.firestore,Ey);return qO(rS(e),n._key).then(t=>mL(e,n,t))}class dL extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function fL(n,e,t){n=tc(n,Yn);const r=tc(n.firestore,Ey),s=lL(n.converter,e,t);return pL(r,[nL(tL(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ii.none())])}function pL(n,e){return function(r,s){const a=new Is;return r.asyncQueue.enqueueAndForget(async()=>NO(await HO(r),s,a)),a.promise}(rS(n),e)}function mL(n,e,t){const r=t.docs.get(e._key),s=new dL(n);return new dS(n,s,e._key,r,new uL(t.hasPendingWrites,t.fromCache),e.converter)}function nE(){return new Ay("serverTimestamp")}(function(e,t=!0){(function(s){_l=s})(Lo),ko(new Rs("firestore",(r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Ey(new tN(r.getProvider("auth-internal")),new sN(r.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(p.options.projectId,v)}(l,s),l);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Fr(_w,"4.7.6",e),Fr(_w,"4.7.6","esm2017")})();const gL={apiKey:"AIzaSyCTMIlpX4l6UMyPmcI2651WDF_TYANEZZs",authDomain:"bookhub-bd59c.firebaseapp.com",projectId:"bookhub-bd59c",storageBucket:"bookhub-bd59c.firebasestorage.app",messagingSenderId:"898299245637",appId:"1:898299245637:web:ed19e9487d92b74e555f2c"},fS=dx(gL),bn=X2(fS),pS=YO(fS),mS=C.createContext(),yL=({children:n})=>{const[e,t]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>Fb(bn,h=>{t(h),s(!1)}),[]);const a={user:e,loading:r};return T.jsx(mS.Provider,{value:a,children:!r&&n})},gS=()=>C.useContext(mS);var vL=BT(),Tu={},rE;function _L(){if(rE)return Tu;rE=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.parse=l,Tu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function l(E,I){const k=new a,b=E.length;if(b<2)return k;const P=(I==null?void 0:I.decode)||v;let V=0;do{const B=E.indexOf("=",V);if(B===-1)break;const q=E.indexOf(";",V),Y=q===-1?b:q;if(B>Y){V=E.lastIndexOf(";",B-1)+1;continue}const Z=h(E,V,B),se=f(E,B,Z),D=E.slice(Z,se);if(k[D]===void 0){let R=h(E,B+1,Y),A=f(E,Y,R);const L=P(E.slice(R,A));k[D]=L}V=Y+1}while(V<b);return k}function h(E,I,k){do{const b=E.charCodeAt(I);if(b!==32&&b!==9)return I}while(++I<k);return k}function f(E,I,k){for(;I>k;){const b=E.charCodeAt(--I);if(b!==32&&b!==9)return I+1}return k}function p(E,I,k){const b=(k==null?void 0:k.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const P=b(I);if(!e.test(P))throw new TypeError(`argument val is invalid: ${I}`);let V=E+"="+P;if(!k)return V;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);V+="; Max-Age="+k.maxAge}if(k.domain){if(!t.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);V+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);V+="; Path="+k.path}if(k.expires){if(!_(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);V+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(V+="; HttpOnly"),k.secure&&(V+="; Secure"),k.partitioned&&(V+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return V}function v(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function _(E){return s.call(E)==="[object Date]"}return Tu}_L();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iE="popstate";function wL(n={}){function e(r,s){let{pathname:a,search:l,hash:h}=r.location;return cg("",{pathname:a,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:rc(s)}return TL(e,t,null,n)}function lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EL(){return Math.random().toString(36).substring(2,10)}function sE(n,e){return{usr:n.state,key:n.key,idx:e}}function cg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?xl(e):e,state:t,key:e&&e.key||r||EL()}}function rc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function xl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function TL(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,h="POP",f=null,p=v();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function v(){return(l.state||{idx:null}).idx}function _(){h="POP";let P=v(),V=P==null?null:P-p;p=P,f&&f({action:h,location:b.location,delta:V})}function E(P,V){h="PUSH";let B=cg(b.location,P,V);p=v()+1;let q=sE(B,p),Y=b.createHref(B);try{l.pushState(q,"",Y)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(Y)}a&&f&&f({action:h,location:b.location,delta:1})}function I(P,V){h="REPLACE";let B=cg(b.location,P,V);p=v();let q=sE(B,p),Y=b.createHref(B);l.replaceState(q,"",Y),a&&f&&f({action:h,location:b.location,delta:0})}function k(P){let V=s.location.origin!=="null"?s.location.origin:s.location.href,B=typeof P=="string"?P:rc(P);return B=B.replace(/ $/,"%20"),lt(V,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,V)}let b={get action(){return h},get location(){return n(s,l)},listen(P){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(iE,_),f=P,()=>{s.removeEventListener(iE,_),f=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let V=k(P);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:I,go(P){return l.go(P)}};return b}function yS(n,e,t="/"){return xL(n,e,t,!1)}function xL(n,e,t,r){let s=typeof e=="string"?xl(e):e,a=Ns(s.pathname||"/",t);if(a==null)return null;let l=vS(n);IL(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=LL(a);h=DL(l[f],p,r)}return h}function vS(n,e=[],t=[],r=""){let s=(a,l,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(lt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=Si([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(lt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),vS(a.children,e,v,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:bL(p,a.index),routesMeta:v})};return n.forEach((a,l)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,l);else for(let f of _S(a.path))s(a,l,f)}),e}function _S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=_S(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function IL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NL(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var SL=/^:[\w-]+$/,RL=3,AL=2,PL=1,CL=10,kL=-2,oE=n=>n==="*";function bL(n,e){let t=n.split("/"),r=t.length;return t.some(oE)&&(r+=kL),e&&(r+=AL),t.filter(s=>!oE(s)).reduce((s,a)=>s+(SL.test(a)?RL:a===""?PL:CL),r)}function NL(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function DL(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",_=zd({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),E=f.route;if(!_&&p&&t&&!r[r.length-1].route.index&&(_=zd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!_)return null;Object.assign(s,_.params),l.push({params:s,pathname:Si([a,_.pathname]),pathnameBase:FL(Si([a,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(a=Si([a,_.pathnameBase]))}return l}function zd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=OL(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:_},E)=>{if(v==="*"){let k=h[E]||"";l=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const I=h[E];return _&&!I?p[v]=void 0:p[v]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function OL(n,e=!1,t=!0){Kr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function LL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kr(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ns(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function VL(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?xl(n):n;return{pathname:t?t.startsWith("/")?t:ML(t,e):e,search:UL(r),hash:BL(s)}}function ML(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function dm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wS(n){let e=jL(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ES(n,e,t,r=!1){let s;typeof n=="string"?s=xl(n):(s={...n},lt(!s.pathname||!s.pathname.includes("?"),dm("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),dm("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),dm("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,h;if(l==null)h=t;else{let _=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),_-=1;s.pathname=E.join("/")}h=_>=0?e[_]:"/"}let f=VL(s,h),p=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var Si=n=>n.join("/").replace(/\/\/+/g,"/"),FL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var TS=["POST","PUT","PATCH","DELETE"];new Set(TS);var $L=["GET",...TS];new Set($L);var Il=C.createContext(null);Il.displayName="DataRouter";var pf=C.createContext(null);pf.displayName="DataRouterState";var xS=C.createContext({isTransitioning:!1});xS.displayName="ViewTransition";var HL=C.createContext(new Map);HL.displayName="Fetchers";var WL=C.createContext(null);WL.displayName="Await";var Yr=C.createContext(null);Yr.displayName="Navigation";var Sc=C.createContext(null);Sc.displayName="Location";var Xr=C.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var Py=C.createContext(null);Py.displayName="RouteError";function qL(n,{relative:e}={}){lt(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(Yr),{hash:s,pathname:a,search:l}=Ac(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:Si([t,a])),r.createHref({pathname:h,search:l,hash:s})}function Rc(){return C.useContext(Sc)!=null}function Uo(){return lt(Rc(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Sc).location}var IS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SS(n){C.useContext(Yr).static||C.useLayoutEffect(n)}function mf(){let{isDataRoute:n}=C.useContext(Xr);return n?oV():KL()}function KL(){lt(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Il),{basename:e,navigator:t}=C.useContext(Yr),{matches:r}=C.useContext(Xr),{pathname:s}=Uo(),a=JSON.stringify(wS(r)),l=C.useRef(!1);return SS(()=>{l.current=!0}),C.useCallback((f,p={})=>{if(Kr(l.current,IS),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=ES(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Si([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,a,s,n])}C.createContext(null);function GL(){let{matches:n}=C.useContext(Xr),e=n[n.length-1];return e?e.params:{}}function Ac(n,{relative:e}={}){let{matches:t}=C.useContext(Xr),{pathname:r}=Uo(),s=JSON.stringify(wS(t));return C.useMemo(()=>ES(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function QL(n,e){return RS(n,e)}function RS(n,e,t,r){var V;lt(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(Yr),{matches:a}=C.useContext(Xr),l=a[a.length-1],h=l?l.params:{},f=l?l.pathname:"/",p=l?l.pathnameBase:"/",v=l&&l.route;{let B=v&&v.path||"";AS(f,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let _=Uo(),E;if(e){let B=typeof e=="string"?xl(e):e;lt(p==="/"||((V=B.pathname)==null?void 0:V.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),E=B}else E=_;let I=E.pathname||"/",k=I;if(p!=="/"){let B=p.replace(/^\//,"").split("/");k="/"+I.replace(/^\//,"").split("/").slice(B.length).join("/")}let b=yS(n,{pathname:k});Kr(v||b!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Kr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=eV(b&&b.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:Si([p,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:Si([p,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),a,t,r);return e&&P?C.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function YL(){let n=sV(),e=zL(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:a},"ErrorBoundary")," or"," ",C.createElement("code",{style:a},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,l)}var XL=C.createElement(YL,null),JL=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(Xr.Provider,{value:this.props.routeContext},C.createElement(Py.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZL({routeContext:n,match:e,children:t}){let r=C.useContext(Il);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Xr.Provider,{value:n},t)}function eV(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);lt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:_}=t,E=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){l=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,v)=>{let _,E=!1,I=null,k=null;t&&(_=a&&p.route.id?a[p.route.id]:void 0,I=p.route.errorElement||XL,l&&(h<0&&v===0?(AS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,k=null):h===v&&(E=!0,k=p.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,v+1)),P=()=>{let V;return _?V=I:E?V=k:p.route.Component?V=C.createElement(p.route.Component,null):p.route.element?V=p.route.element:V=f,C.createElement(ZL,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:t!=null},children:V})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?C.createElement(JL,{location:t.location,revalidation:t.revalidation,component:I,error:_,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}function Cy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tV(n){let e=C.useContext(Il);return lt(e,Cy(n)),e}function nV(n){let e=C.useContext(pf);return lt(e,Cy(n)),e}function rV(n){let e=C.useContext(Xr);return lt(e,Cy(n)),e}function ky(n){let e=rV(n),t=e.matches[e.matches.length-1];return lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function iV(){return ky("useRouteId")}function sV(){var r;let n=C.useContext(Py),e=nV("useRouteError"),t=ky("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function oV(){let{router:n}=tV("useNavigate"),e=ky("useNavigate"),t=C.useRef(!1);return SS(()=>{t.current=!0}),C.useCallback(async(s,a={})=>{Kr(t.current,IS),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var aE={};function AS(n,e,t){!e&&!aE[n]&&(aE[n]=!0,Kr(!1,t))}C.memo(aV);function aV({routes:n,future:e,state:t}){return RS(n,void 0,t,e)}function yi(n){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lV({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){lt(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=C.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=xl(t));let{pathname:f="/",search:p="",hash:v="",state:_=null,key:E="default"}=t,I=C.useMemo(()=>{let k=Ns(f,l);return k==null?null:{location:{pathname:k,search:p,hash:v,state:_,key:E},navigationType:r}},[l,f,p,v,_,E,r]);return Kr(I!=null,`<Router basename="${l}"> is not able to match the URL "${f}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:C.createElement(Yr.Provider,{value:h},C.createElement(Sc.Provider,{children:e,value:I}))}function uV({children:n,location:e}){return QL(hg(n),e)}function hg(n,e=[]){let t=[];return C.Children.forEach(n,(r,s)=>{if(!C.isValidElement(r))return;let a=[...e,s];if(r.type===C.Fragment){t.push.apply(t,hg(r.props.children,a));return}lt(r.type===yi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=hg(r.props.children,a)),t.push(l)}),t}var _d="get",wd="application/x-www-form-urlencoded";function gf(n){return n!=null&&typeof n.tagName=="string"}function cV(n){return gf(n)&&n.tagName.toLowerCase()==="button"}function hV(n){return gf(n)&&n.tagName.toLowerCase()==="form"}function dV(n){return gf(n)&&n.tagName.toLowerCase()==="input"}function fV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function pV(n,e){return n.button===0&&(!e||e==="_self")&&!fV(n)}var rd=null;function mV(){if(rd===null)try{new FormData(document.createElement("form"),0),rd=!1}catch{rd=!0}return rd}var gV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fm(n){return n!=null&&!gV.has(n)?(Kr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wd}"`),null):n}function yV(n,e){let t,r,s,a,l;if(hV(n)){let h=n.getAttribute("action");r=h?Ns(h,e):null,t=n.getAttribute("method")||_d,s=fm(n.getAttribute("enctype"))||wd,a=new FormData(n)}else if(cV(n)||dV(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Ns(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||_d,s=fm(n.getAttribute("formenctype"))||fm(h.getAttribute("enctype"))||wd,a=new FormData(h,n),!mV()){let{name:p,type:v,value:_}=n;if(v==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,_)}}else{if(gf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_d,r=null,s=wd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}function by(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function vV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _V(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function wV(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await vV(a,t);return l.links?l.links():[]}return[]}));return IV(r.flat(1).filter(_V).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function lE(n,e,t,r,s,a){let l=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var v;return t[p].pathname!==f.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>l(f,p)||h(f,p)):a==="data"?e.filter((f,p)=>{var _;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function EV(n,e){return TV(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function TV(n){return[...new Set(n)]}function xV(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function IV(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(xV(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function SV(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function RV(){let n=C.useContext(Il);return by(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AV(){let n=C.useContext(pf);return by(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ny=C.createContext(void 0);Ny.displayName="FrameworkContext";function PS(){let n=C.useContext(Ny);return by(n,"You must render this element inside a <HydratedRouter> element"),n}function PV(n,e){let t=C.useContext(Ny),[r,s]=C.useState(!1),[a,l]=C.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:_}=e,E=C.useRef(null);C.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let b=V=>{V.forEach(B=>{l(B.isIntersecting)})},P=new IntersectionObserver(b,{threshold:.5});return E.current&&P.observe(E.current),()=>{P.disconnect()}}},[n]),C.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let I=()=>{s(!0)},k=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:xu(h,I),onBlur:xu(f,k),onMouseEnter:xu(p,I),onMouseLeave:xu(v,k),onTouchStart:xu(_,I)}]:[!1,E,{}]}function xu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function CV({page:n,...e}){let{router:t}=RV(),r=C.useMemo(()=>yS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(bV,{page:n,matches:r,...e}):null}function kV(n){let{manifest:e,routeModules:t}=PS(),[r,s]=C.useState([]);return C.useEffect(()=>{let a=!1;return wV(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function bV({page:n,matches:e,...t}){let r=Uo(),{manifest:s,routeModules:a}=PS(),{loaderData:l,matches:h}=AV(),f=C.useMemo(()=>lE(n,e,h,s,r,"data"),[n,e,h,s,r]),p=C.useMemo(()=>lE(n,e,h,s,r,"assets"),[n,e,h,s,r]),v=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,k=!1;if(e.forEach(P=>{var B;let V=s.routes[P.route.id];!V||!V.hasLoader||(!f.some(q=>q.route.id===P.route.id)&&P.route.id in l&&((B=a[P.route.id])!=null&&B.shouldRevalidate)||V.hasClientLoader?k=!0:I.add(P.route.id))}),I.size===0)return[];let b=SV(n);return k&&I.size>0&&b.searchParams.set("_routes",e.filter(P=>I.has(P.route.id)).map(P=>P.route.id).join(",")),[b.pathname+b.search]},[l,r,s,f,e,n,a]),_=C.useMemo(()=>EV(p,s),[p,s]),E=kV(p);return C.createElement(C.Fragment,null,v.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),_.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),E.map(({key:I,link:k})=>C.createElement("link",{key:I,...k})))}function NV(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CS&&(window.__reactRouterVersion="7.1.1")}catch{}function DV({basename:n,children:e,window:t}){let r=C.useRef();r.current==null&&(r.current=wL({window:t,v5Compat:!0}));let s=r.current,[a,l]=C.useState({action:s.action,location:s.location}),h=C.useCallback(f=>{C.startTransition(()=>l(f))},[l]);return C.useLayoutEffect(()=>s.listen(h),[s,h]),C.createElement(lV,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var kS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:h,target:f,to:p,preventScrollReset:v,viewTransition:_,...E},I){let{basename:k}=C.useContext(Yr),b=typeof p=="string"&&kS.test(p),P,V=!1;if(typeof p=="string"&&b&&(P=p,CS))try{let A=new URL(window.location.href),L=p.startsWith("//")?new URL(A.protocol+p):new URL(p),j=Ns(L.pathname,k);L.origin===A.origin&&j!=null?p=j+L.search+L.hash:V=!0}catch{Kr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=qL(p,{relative:s}),[q,Y,Z]=PV(r,E),se=VV(p,{replace:l,state:h,target:f,preventScrollReset:v,relative:s,viewTransition:_});function D(A){e&&e(A),A.defaultPrevented||se(A)}let R=C.createElement("a",{...E,...Z,href:P||B,onClick:V||a?e:D,ref:NV(I,Y),target:f,"data-discover":!b&&t==="render"?"true":void 0});return q&&!b?C.createElement(C.Fragment,null,R,C.createElement(CV,{page:B})):R});Er.displayName="Link";var bS=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:h,children:f,...p},v){let _=Ac(l,{relative:p.relative}),E=Uo(),I=C.useContext(pf),{navigator:k,basename:b}=C.useContext(Yr),P=I!=null&&BV(_)&&h===!0,V=k.encodeLocation?k.encodeLocation(_).pathname:_.pathname,B=E.pathname,q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(B=B.toLowerCase(),q=q?q.toLowerCase():null,V=V.toLowerCase()),q&&b&&(q=Ns(q,b)||q);const Y=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let Z=B===V||!s&&B.startsWith(V)&&B.charAt(Y)==="/",se=q!=null&&(q===V||!s&&q.startsWith(V)&&q.charAt(V.length)==="/"),D={isActive:Z,isPending:se,isTransitioning:P},R=Z?e:void 0,A;typeof r=="function"?A=r(D):A=[r,Z?"active":null,se?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(D):a;return C.createElement(Er,{...p,"aria-current":R,className:A,ref:v,style:L,to:l,viewTransition:h},typeof f=="function"?f(D):f)});bS.displayName="NavLink";var OV=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=_d,action:h,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:_,...E},I)=>{let k=FV(),b=UV(h,{relative:p}),P=l.toLowerCase()==="get"?"get":"post",V=typeof h=="string"&&kS.test(h),B=q=>{if(f&&f(q),q.defaultPrevented)return;q.preventDefault();let Y=q.nativeEvent.submitter,Z=(Y==null?void 0:Y.getAttribute("formmethod"))||l;k(Y||q.currentTarget,{fetcherKey:e,method:Z,navigate:t,replace:s,state:a,relative:p,preventScrollReset:v,viewTransition:_})};return C.createElement("form",{ref:I,method:P,action:b,onSubmit:r?f:B,...E,"data-discover":!V&&n==="render"?"true":void 0})});OV.displayName="Form";function LV(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NS(n){let e=C.useContext(Il);return lt(e,LV(n)),e}function VV(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l}={}){let h=mf(),f=Uo(),p=Ac(n,{relative:a});return C.useCallback(v=>{if(pV(v,e)){v.preventDefault();let _=t!==void 0?t:rc(f)===rc(p);h(n,{replace:_,state:r,preventScrollReset:s,relative:a,viewTransition:l})}},[f,h,p,t,r,e,n,s,a,l])}var MV=0,jV=()=>`__${String(++MV)}__`;function FV(){let{router:n}=NS("useSubmit"),{basename:e}=C.useContext(Yr),t=iV();return C.useCallback(async(r,s={})=>{let{action:a,method:l,encType:h,formData:f,body:p}=yV(r,e);if(s.navigate===!1){let v=s.fetcherKey||jV();await n.fetch(v,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||l,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||l,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function UV(n,{relative:e}={}){let{basename:t}=C.useContext(Yr),r=C.useContext(Xr);lt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Ac(n||".",{relative:e})},l=Uo();if(n==null){a.search=l.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(_=>_).forEach(_=>h.append("index",_));let v=h.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Si([t,a.pathname])),rc(a)}function BV(n,e={}){let t=C.useContext(xS);lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=NS("useViewTransitionState"),s=Ac(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ns(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ns(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zd(s.pathname,l)!=null||zd(s.pathname,a)!=null}new TextEncoder;const zV=({className:n})=>{const e=mf(),t=async()=>{try{await Ub(bn),e("/login")}catch(r){console.error(" :",r.message)}};return T.jsx("button",{onClick:t,className:n,children:""})},Jn=({type:n="primary",size:e="medium",disabled:t=!1,onClick:r,className:s="",children:a})=>{const l="rounded-md font-medium transition-colors",h={primary:"bg-violet-600 text-white hover:bg-violet-700",secondary:"bg-violet-100 text-violet-600 hover:bg-violet-200",outline:"border-2 border-violet-600 text-violet-600 hover:bg-violet-50",danger:"bg-white text-red-600 hover:bg-red-50 border border-red-400"},f={small:"px-3 py-1.5 text-sm ",medium:"px-4 py-2 text-base mobile:text-sm px-2 py-2",large:"px-6 py-3 text-lg rounded-xl font-semibold mobile:px-4 mobile:py-2 mobile:text-sm"};return T.jsx("button",{type:n,disabled:t,onClick:r,className:`
        ${l}
        ${h[n]}
        ${f[e]}
        ${t?"opacity-50 cursor-not-allowed":""}
        ${s}
      `,children:a})},$V=({isOpen:n,onClose:e,children:t})=>n?vL.createPortal(T.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,children:T.jsxs("div",{className:"bg-white p-6 rounded-lg relative max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[T.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-red-500",children:""}),t]})}),document.body):null,uE=({children:n})=>{const[e,t]=C.useState(!1);return T.jsxs("div",{onClick:()=>t(!e),className:"group flex items-center m-2.5 p-2.5 rounded-lg transition duration-200 relative text-gray-600 hover:bg-violet-100 hover:text-violet-600 cursor-pointer",children:[n,T.jsx($V,{isOpen:e,onClose:()=>t(!1),children:T.jsxs("div",{className:"p-8 max-w-md w-full bg-white rounded-xl",children:[T.jsxs("div",{className:"text-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"  "}),T.jsx("p",{className:"text-gray-600 text-lg",children:"     ?"})]}),T.jsx("div",{className:"flex items-center justify-center gap-4 mt-8",children:T.jsx(Jn,{type:"primary",size:"large",onClick:()=>t(!1),children:T.jsx(zV,{})})})]})})]})},id=({to:n,icon:e,text:t,count:r})=>T.jsx(bS,{to:n,className:({isActive:s})=>`group flex items-center m-2.5 p-2.5 rounded-lg transition duration-200 relative ${s?"bg-violet-100 text-violet-600":"text-gray-600 hover:bg-violet-100 hover:text-violet-600"}`,children:({isActive:s})=>T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"w-6 min-w-[24px] flex-shrink-0",children:T.jsx(e,{className:`h-6 w-6 transition-colors duration-200 ${s?"text-violet-600":"text-gray-600 group-hover:text-violet-600"}`})}),t&&T.jsx("span",{className:"ml-4 whitespace-nowrap",children:t}),r>0&&T.jsx("span",{className:"absolute -top-2 -right-2 bg-violet-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r})]})}),cE=({isOpen:n})=>T.jsx("div",{className:"cursor-pointer group w-16",children:T.jsxs("div",{className:"relative w-6 h-4",children:[T.jsx("div",{className:`
                  absolute w-6 h-0.5
                  transition-all duration-300 ease-in-out
                  bg-gray-600 group-hover:bg-violet-500
                  ${n?"rotate-45 translate-y-1.5 ":"translate-y-0"}
              `}),T.jsx("div",{className:`
                  absolute top-1/2 -translate-y-1/2 w-6 h-0.5
                  transition-all duration-300 ease-in-out
                  bg-gray-600 group-hover:bg-violet-500
                  ${n?"opacity-0":"opacity-100"}
              `}),T.jsx("div",{className:`
                  absolute bottom-0 w-6 h-0.5
                  transition-all duration-300 ease-in-out
                  bg-gray-600 group-hover:bg-violet-500
                  ${n?"-rotate-45 -translate-y-2 ":"translate-y-0"}
              `})]})}),HV=n=>[{to:"/",icon:J1,text:""},{to:"/catalog",icon:bg,text:" "},{to:"/cart",icon:zT,text:"",count:n.cart.length},{to:"/favorites",icon:Ng,text:"",count:n.favorites.length},{to:"/profile",icon:cP,text:""}],WV=()=>{const{user:n}=gS(),{state:e}=C.useContext(Di),[t,r]=C.useState(!1),s=HV(e);return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"xl:hidden fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:[T.jsx("div",{className:"flex justify-between items-center p-4",children:T.jsx("button",{onClick:()=>r(!t),className:"text-gray-500 hover:text-gray-800",children:T.jsx(cE,{isOpen:t,className:"h-6 w-6"})})}),T.jsx("div",{className:`absolute top-full left-0 right-0 bg-white shadow-md transition-all duration-300 ${t?"max-h-screen":"max-h-0"} overflow-hidden`,children:T.jsxs("div",{className:"p-4",children:[s.map(a=>T.jsx(id,{...a,text:T.jsx("span",{className:"ml-4",children:a.text})},a.to)),n?T.jsxs(uE,{children:[T.jsx("div",{className:"w-6 min-w-[24px] flex-shrink-0",children:T.jsx(Qh,{className:"h-6 w-6 transition-colors duration-200 text-gray-600 group-hover:text-violet-600"})}),T.jsx("span",{className:"ml-8 whitespace-nowrap",children:""})]}):T.jsx(id,{to:"/signup",icon:Qh,text:T.jsx("span",{className:"ml-4",children:""})})]})})]}),T.jsxs("div",{className:`hidden xl:flex flex-col h-screen bg-white shadow-md transition-all duration-300 sticky top-0 overflow-hidden ${t?"w-60":"w-16"}`,children:[T.jsx("button",{onClick:()=>r(!t),className:"p-4 text-gray-500 hover:text-gray-800",children:T.jsx("div",{className:"w-6 min-w-[24px]",children:T.jsx(cE,{isOpen:t,className:"h-6 w-6"})})}),T.jsxs("div",{className:"flex-grow justify-between flex flex-col",children:[T.jsx("div",{className:"mt-4",children:s.map(a=>T.jsx(id,{...a,text:t&&T.jsx("span",{className:"ml-4",children:a.text})},a.to))}),n?T.jsxs(uE,{children:[T.jsx("div",{className:"w-6 min-w-[24px] flex-shrink-0",children:T.jsx(Qh,{className:"h-6 w-6 transition-colors duration-200 text-gray-600 group-hover:text-violet-600"})}),t&&T.jsx("span",{className:"ml-4 whitespace-nowrap",children:""})]}):T.jsx(id,{to:"/signup",icon:Qh,text:t&&T.jsx("span",{className:"ml-4",children:""})})]})]})]})},DS=C.createContext({});function qV(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const Dy=C.createContext(null),OS=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function KV(n=!0){const e=C.useContext(Dy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=C.useId();C.useEffect(()=>{n&&s(a)},[n]);const l=C.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const Oy=typeof window<"u",GV=Oy?C.useLayoutEffect:C.useEffect,Dn=n=>n;let dg=Dn;function Ly(n){let e;return()=>(e===void 0&&(e=n()),e)}const ml=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Ri=n=>n*1e3,Ai=n=>n/1e3,QV={skipAnimations:!1,useManualTiming:!1};function YV(n){let e=new Set,t=new Set,r=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),n()),p(l)}const f={schedule:(p,v=!1,_=!1)=>{const I=_&&r?e:t;return v&&a.add(p),I.has(p)||I.add(p),p},cancel:p=>{t.delete(p),a.delete(p)},process:p=>{if(l=p,r){s=!0;return}r=!0,[e,t]=[t,e],e.forEach(h),e.clear(),r=!1,s&&(s=!1,f.process(p))}};return f}const sd=["read","resolveKeyframes","update","preRender","render","postRender"],XV=40;function LS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=sd.reduce((V,B)=>(V[B]=YV(a),V),{}),{read:h,resolveKeyframes:f,update:p,preRender:v,render:_,postRender:E}=l,I=()=>{const V=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(V-s.timestamp,XV),1),s.timestamp=V,s.isProcessing=!0,h.process(s),f.process(s),p.process(s),v.process(s),_.process(s),E.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(I))},k=()=>{t=!0,r=!0,s.isProcessing||n(I)};return{schedule:sd.reduce((V,B)=>{const q=l[B];return V[B]=(Y,Z=!1,se=!1)=>(t||k(),q.schedule(Y,Z,se)),V},{}),cancel:V=>{for(let B=0;B<sd.length;B++)l[sd[B]].cancel(V)},state:s,steps:l}}const{schedule:nt,cancel:Ds,state:Ht,steps:pm}=LS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dn,!0),VS=C.createContext({strict:!1}),hE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gl={};for(const n in hE)gl[n]={isEnabled:e=>hE[n].some(t=>!!e[t])};function JV(n){for(const e in n)gl[e]={...gl[e],...n[e]}}const ZV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $d(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ZV.has(n)}let MS=n=>!$d(n);function eM(n){n&&(MS=e=>e.startsWith("on")?!$d(e):n(e))}try{eM(require("@emotion/is-prop-valid").default)}catch{}function tM(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(MS(s)||t===!0&&$d(s)||!e&&!$d(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function nM(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const yf=C.createContext({});function ic(n){return typeof n=="string"||Array.isArray(n)}function vf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Vy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],My=["initial",...Vy];function _f(n){return vf(n.animate)||My.some(e=>ic(n[e]))}function jS(n){return!!(_f(n)||n.variants)}function rM(n,e){if(_f(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ic(t)?t:void 0,animate:ic(r)?r:void 0}}return n.inherit!==!1?e:{}}function iM(n){const{initial:e,animate:t}=rM(n,C.useContext(yf));return C.useMemo(()=>({initial:e,animate:t}),[dE(e),dE(t)])}function dE(n){return Array.isArray(n)?n.join(" "):n}const sM=Symbol.for("motionComponentSymbol");function ja(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function oM(n,e,t){return C.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ja(t)&&(t.current=r))},[e])}const jy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aM="framerAppearId",FS="data-"+jy(aM),{schedule:Fy,cancel:S3}=LS(queueMicrotask,!1),US=C.createContext({});function lM(n,e,t,r,s){var a,l;const{visualElement:h}=C.useContext(yf),f=C.useContext(VS),p=C.useContext(Dy),v=C.useContext(OS).reducedMotion,_=C.useRef(null);r=r||f.renderer,!_.current&&r&&(_.current=r(n,{visualState:e,parent:h,props:t,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:v}));const E=_.current,I=C.useContext(US);E&&!E.projection&&s&&(E.type==="html"||E.type==="svg")&&uM(_.current,t,s,I);const k=C.useRef(!1);C.useInsertionEffect(()=>{E&&k.current&&E.update(t,p)});const b=t[FS],P=C.useRef(!!b&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,b))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,b)));return GV(()=>{E&&(k.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),Fy.render(E.render),P.current&&E.animationState&&E.animationState.animateChanges())}),C.useEffect(()=>{E&&(!P.current&&E.animationState&&E.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,b)}),P.current=!1))}),E}function uM(n,e,t,r){const{layoutId:s,layout:a,drag:l,dragConstraints:h,layoutScroll:f,layoutRoot:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:BS(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||h&&ja(h),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}function BS(n){if(n)return n.options.allowProjection!==!1?n.projection:BS(n.parent)}function cM({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var a,l;n&&JV(n);function h(p,v){let _;const E={...C.useContext(OS),...p,layoutId:hM(p)},{isStatic:I}=E,k=iM(p),b=r(p,I);if(!I&&Oy){dM();const P=fM(E);_=P.MeasureLayout,k.visualElement=lM(s,b,E,e,P.ProjectionNode)}return T.jsxs(yf.Provider,{value:k,children:[_&&k.visualElement?T.jsx(_,{visualElement:k.visualElement,...E}):null,t(s,p,oM(b,k.visualElement,v),b,I,k.visualElement)]})}h.displayName=`motion.${typeof s=="string"?s:`create(${(l=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&l!==void 0?l:""})`}`;const f=C.forwardRef(h);return f[sM]=s,f}function hM({layoutId:n}){const e=C.useContext(DS).id;return e&&n!==void 0?e+"-"+n:n}function dM(n,e){C.useContext(VS).strict}function fM(n){const{drag:e,layout:t}=gl;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uy(n){return typeof n!="string"||n.includes("-")?!1:!!(pM.indexOf(n)>-1||/[A-Z]/u.test(n))}function fE(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function By(n,e,t,r){if(typeof e=="function"){const[s,a]=fE(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=fE(r);e=e(t!==void 0?t:n.custom,s,a)}return e}const fg=n=>Array.isArray(n),mM=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),gM=n=>fg(n)?n[n.length-1]||0:n,sn=n=>!!(n&&n.getVelocity);function Ed(n){const e=sn(n)?n.get():n;return mM(e)?e.toValue():e}function yM({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,a){const l={latestValues:vM(r,s,a,n),renderState:e()};return t&&(l.onMount=h=>t({props:r,current:h,...l}),l.onUpdate=h=>t(h)),l}const zS=n=>(e,t)=>{const r=C.useContext(yf),s=C.useContext(Dy),a=()=>yM(n,e,r,s);return t?a():qV(a)};function vM(n,e,t,r){const s={},a=r(n,{});for(const E in a)s[E]=Ed(a[E]);let{initial:l,animate:h}=n;const f=_f(n),p=jS(n);e&&p&&!f&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let v=t?t.initial===!1:!1;v=v||l===!1;const _=v?h:l;if(_&&typeof _!="boolean"&&!vf(_)){const E=Array.isArray(_)?_:[_];for(let I=0;I<E.length;I++){const k=By(n,E[I]);if(k){const{transitionEnd:b,transition:P,...V}=k;for(const B in V){let q=V[B];if(Array.isArray(q)){const Y=v?q.length-1:0;q=q[Y]}q!==null&&(s[B]=q)}for(const B in b)s[B]=b[B]}}}return s}const Sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bo=new Set(Sl),$S=n=>e=>typeof e=="string"&&e.startsWith(n),HS=$S("--"),_M=$S("var(--"),zy=n=>_M(n)?wM.test(n.split("/*")[0].trim()):!1,wM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,WS=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ni=(n,e,t)=>t>e?e:t<n?n:t,Rl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},sc={...Rl,transform:n=>Ni(0,1,n)},od={...Rl,default:1},Pc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ls=Pc("deg"),$r=Pc("%"),xe=Pc("px"),EM=Pc("vh"),TM=Pc("vw"),pE={...$r,parse:n=>$r.parse(n)/100,transform:n=>$r.transform(n*100)},xM={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},IM={rotate:ls,rotateX:ls,rotateY:ls,rotateZ:ls,scale:od,scaleX:od,scaleY:od,scaleZ:od,skew:ls,skewX:ls,skewY:ls,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:sc,originX:pE,originY:pE,originZ:xe},mE={...Rl,transform:Math.round},$y={...xM,...IM,zIndex:mE,size:xe,fillOpacity:sc,strokeOpacity:sc,numOctaves:mE},SM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RM=Sl.length;function AM(n,e,t){let r="",s=!0;for(let a=0;a<RM;a++){const l=Sl[a],h=n[l];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(l.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const p=WS(h,$y[l]);if(!f){s=!1;const v=SM[l]||l;r+=`${v}(${p}) `}t&&(e[l]=p)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Hy(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let l=!1,h=!1;for(const f in e){const p=e[f];if(Bo.has(f)){l=!0;continue}else if(HS(f)){s[f]=p;continue}else{const v=WS(p,$y[f]);f.startsWith("origin")?(h=!0,a[f]=v):r[f]=v}}if(e.transform||(l||t?r.transform=AM(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:v=0}=a;r.transformOrigin=`${f} ${p} ${v}`}}function gE(n,e,t){return typeof n=="string"?n:xe.transform(e+t*n)}function PM(n,e,t){const r=gE(e,n.x,n.width),s=gE(t,n.y,n.height);return`${r} ${s}`}const CM={offset:"stroke-dashoffset",array:"stroke-dasharray"},kM={offset:"strokeDashoffset",array:"strokeDasharray"};function bM(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?CM:kM;n[a.offset]=xe.transform(-r);const l=xe.transform(e),h=xe.transform(t);n[a.array]=`${l} ${h}`}function Wy(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:a,pathLength:l,pathSpacing:h=1,pathOffset:f=0,...p},v,_){if(Hy(n,p,_),v){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:I,dimensions:k}=n;E.transform&&(k&&(I.transform=E.transform),delete E.transform),k&&(s!==void 0||a!==void 0||I.transform)&&(I.transformOrigin=PM(k,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),l!==void 0&&bM(E,l,h,f,!1)}const qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),qS=()=>({...qy(),attrs:{}}),Ky=n=>typeof n=="string"&&n.toLowerCase()==="svg";function KS(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const GS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QS(n,e,t,r){KS(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(GS.has(s)?s:jy(s),e.attrs[s])}const Hd={};function NM(n){Object.assign(Hd,n)}function YS(n,{layout:e,layoutId:t}){return Bo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Hd[n]||n==="opacity")}function Gy(n,e,t){var r;const{style:s}=n,a={};for(const l in s)(sn(s[l])||e.style&&sn(e.style[l])||YS(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=s[l]);return a}function XS(n,e,t){const r=Gy(n,e,t);for(const s in n)if(sn(n[s])||sn(e[s])){const a=Sl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}function DM(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const yE=["x","y","width","height","cx","cy","r"],OM={useVisualState:zS({scrapeMotionValuesFromProps:XS,createRenderState:qS,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let a=!!n.drag;if(!a){for(const h in s)if(Bo.has(h)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let h=0;h<yE.length;h++){const f=yE[h];n[f]!==e[f]&&(l=!0)}l&&(nt.read(()=>DM(t,r)),nt.render(()=>{Wy(r,s,Ky(t.tagName),n.transformTemplate),QS(t,r)}))}})},LM={useVisualState:zS({scrapeMotionValuesFromProps:Gy,createRenderState:qy})};function JS(n,e,t){for(const r in e)!sn(e[r])&&!YS(r,t)&&(n[r]=e[r])}function VM({transformTemplate:n},e){return C.useMemo(()=>{const t=qy();return Hy(t,e,n),Object.assign({},t.vars,t.style)},[e])}function MM(n,e){const t=n.style||{},r={};return JS(r,t,n),Object.assign(r,VM(n,e)),r}function jM(n,e){const t={},r=MM(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function FM(n,e,t,r){const s=C.useMemo(()=>{const a=qS();return Wy(a,e,Ky(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};JS(a,n.style,n),s.style={...a,...s.style}}return s}function UM(n=!1){return(t,r,s,{latestValues:a},l)=>{const f=(Uy(t)?FM:jM)(r,a,l,t),p=tM(r,typeof t=="string",n),v=t!==C.Fragment?{...p,...f,ref:s}:{},{children:_}=r,E=C.useMemo(()=>sn(_)?_.get():_,[_]);return C.createElement(t,{...v,children:E})}}function BM(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Uy(r)?OM:LM,preloadedFeatures:n,useRender:UM(s),createVisualElement:e,Component:r};return cM(l)}}function ZS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function wf(n,e,t){const r=n.getProps();return By(r,e,t!==void 0?t:r.custom,n)}const zM=Ly(()=>window.ScrollTimeline!==void 0);class $M{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(zM()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HM extends $M{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Qy(n,e){return n?n[e]||n.default||n:void 0}const pg=2e4;function eR(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<pg;)e+=t,r=n.next(e);return e>=pg?1/0:e}function Yy(n){return typeof n=="function"}function vE(n,e){n.timeline=e,n.onfinish=null}const Xy=n=>Array.isArray(n)&&typeof n[0]=="number",WM={linearEasing:void 0};function qM(n,e){const t=Ly(n);return()=>{var r;return(r=WM[e])!==null&&r!==void 0?r:t()}}const Wd=qM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tR=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=n(ml(0,s-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function nR(n){return!!(typeof n=="function"&&Wd()||!n||typeof n=="string"&&(n in mg||Wd())||Xy(n)||Array.isArray(n)&&n.every(nR))}const Nu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,mg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nu([0,.65,.55,1]),circOut:Nu([.55,0,1,.45]),backIn:Nu([.31,.01,.66,-.59]),backOut:Nu([.33,1.53,.69,.99])};function rR(n,e){if(n)return typeof n=="function"&&Wd()?tR(n,e):Xy(n)?Nu(n):Array.isArray(n)?n.map(t=>rR(t,e)||mg.easeOut):mg[n]}const pr={x:!1,y:!1};function iR(){return pr.x||pr.y}function KM(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let s=document;const a=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}function sR(n,e){const t=KM(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function _E(n){return e=>{e.pointerType==="touch"||iR()||n(e)}}function GM(n,e,t={}){const[r,s,a]=sR(n,t),l=_E(h=>{const{target:f}=h,p=e(h);if(typeof p!="function"||!f)return;const v=_E(_=>{p(_),f.removeEventListener("pointerleave",v)});f.addEventListener("pointerleave",v,s)});return r.forEach(h=>{h.addEventListener("pointerenter",l,s)}),a}const oR=(n,e)=>e?n===e?!0:oR(n,e.parentElement):!1,Jy=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,QM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YM(n){return QM.has(n.tagName)||n.tabIndex!==-1}const Du=new WeakSet;function wE(n){return e=>{e.key==="Enter"&&n(e)}}function mm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const XM=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=wE(()=>{if(Du.has(t))return;mm(t,"down");const s=wE(()=>{mm(t,"up")}),a=()=>mm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function EE(n){return Jy(n)&&!iR()}function JM(n,e,t={}){const[r,s,a]=sR(n,t),l=h=>{const f=h.currentTarget;if(!EE(h)||Du.has(f))return;Du.add(f);const p=e(h),v=(I,k)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",E),!(!EE(I)||!Du.has(f))&&(Du.delete(f),typeof p=="function"&&p(I,{success:k}))},_=I=>{v(I,t.useGlobalTarget||oR(f,I.target))},E=I=>{v(I,!1)};window.addEventListener("pointerup",_,s),window.addEventListener("pointercancel",E,s)};return r.forEach(h=>{!YM(h)&&h.getAttribute("tabindex")===null&&(h.tabIndex=0),(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,s),h.addEventListener("focus",p=>XM(p,s),s)}),a}function ZM(n){return n==="x"||n==="y"?pr[n]?null:(pr[n]=!0,()=>{pr[n]=!1}):pr.x||pr.y?null:(pr.x=pr.y=!0,()=>{pr.x=pr.y=!1})}const aR=new Set(["width","height","top","left","right","bottom",...Sl]);let Td;function e4(){Td=void 0}const Hr={now:()=>(Td===void 0&&Hr.set(Ht.isProcessing||QV.useManualTiming?Ht.timestamp:performance.now()),Td),set:n=>{Td=n,queueMicrotask(e4)}};function Zy(n,e){n.indexOf(e)===-1&&n.push(e)}function ev(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class tv{constructor(){this.subscriptions=[]}add(e){return Zy(this.subscriptions,e),()=>ev(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function lR(n,e){return e?n*(1e3/e):0}const TE=30,t4=n=>!isNaN(parseFloat(n));class n4{constructor(e,t={}){this.version="11.18.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Hr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=t4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tv);const r=this.events[e].add(t);return e==="change"?()=>{r(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TE)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,TE);return lR(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oc(n,e){return new n4(n,e)}function r4(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,oc(t))}function i4(n,e){const t=wf(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const l in a){const h=gM(a[l]);r4(n,l,h)}}function s4(n){return!!(sn(n)&&n.add)}function gg(n,e){const t=n.getValue("willChange");if(s4(t))return t.add(e)}function uR(n){return n.props[FS]}const cR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,o4=1e-7,a4=12;function l4(n,e,t,r,s){let a,l,h=0;do l=e+(t-e)/2,a=cR(l,r,s)-n,a>0?t=l:e=l;while(Math.abs(a)>o4&&++h<a4);return l}function Cc(n,e,t,r){if(n===e&&t===r)return Dn;const s=a=>l4(a,0,1,n,t);return a=>a===0||a===1?a:cR(s(a),e,r)}const hR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,dR=n=>e=>1-n(1-e),fR=Cc(.33,1.53,.69,.99),nv=dR(fR),pR=hR(nv),mR=n=>(n*=2)<1?.5*nv(n):.5*(2-Math.pow(2,-10*(n-1))),rv=n=>1-Math.sin(Math.acos(n)),gR=dR(rv),yR=hR(rv),vR=n=>/^0[^.\s]+$/u.test(n);function u4(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||vR(n):!0}const Uu=n=>Math.round(n*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function c4(n){return n==null}const h4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sv=(n,e)=>t=>!!(typeof t=="string"&&h4.test(t)&&t.startsWith(n)||e&&!c4(t)&&Object.prototype.hasOwnProperty.call(t,e)),_R=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,l,h]=r.match(iv);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},d4=n=>Ni(0,255,n),gm={...Rl,transform:n=>Math.round(d4(n))},_o={test:sv("rgb","red"),parse:_R("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+gm.transform(n)+", "+gm.transform(e)+", "+gm.transform(t)+", "+Uu(sc.transform(r))+")"};function f4(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const yg={test:sv("#"),parse:f4,transform:_o.transform},Fa={test:sv("hsl","hue"),parse:_R("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+$r.transform(Uu(e))+", "+$r.transform(Uu(t))+", "+Uu(sc.transform(r))+")"},tn={test:n=>_o.test(n)||yg.test(n)||Fa.test(n),parse:n=>_o.test(n)?_o.parse(n):Fa.test(n)?Fa.parse(n):yg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?_o.transform(n):Fa.transform(n)},p4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m4(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(iv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(p4))===null||t===void 0?void 0:t.length)||0)>0}const wR="number",ER="color",g4="var",y4="var(",xE="${}",v4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ac(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const h=e.replace(v4,f=>(tn.test(f)?(r.color.push(a),s.push(ER),t.push(tn.parse(f))):f.startsWith(y4)?(r.var.push(a),s.push(g4),t.push(f)):(r.number.push(a),s.push(wR),t.push(parseFloat(f))),++a,xE)).split(xE);return{values:t,split:h,indexes:r,types:s}}function TR(n){return ac(n).values}function xR(n){const{split:e,types:t}=ac(n),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const h=t[l];h===wR?a+=Uu(s[l]):h===ER?a+=tn.transform(s[l]):a+=s[l]}return a}}const _4=n=>typeof n=="number"?0:n;function w4(n){const e=TR(n);return xR(n)(e.map(_4))}const Os={test:m4,parse:TR,createTransformer:xR,getAnimatableNone:w4},E4=new Set(["brightness","contrast","saturate","opacity"]);function T4(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(iv)||[];if(!r)return n;const s=t.replace(r,"");let a=E4.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const x4=/\b([a-z-]*)\(.*?\)/gu,vg={...Os,getAnimatableNone:n=>{const e=n.match(x4);return e?e.map(T4).join(" "):n}},I4={...$y,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:vg,WebkitFilter:vg},ov=n=>I4[n];function IR(n,e){let t=ov(n);return t!==vg&&(t=Os),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const S4=new Set(["auto","none","0"]);function R4(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!S4.has(a)&&ac(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=IR(t,s)}const IE=n=>n===Rl||n===xe,SE=(n,e)=>parseFloat(n.split(", ")[e]),RE=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return SE(s[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?SE(a[1],n):0}},A4=new Set(["x","y","z"]),P4=Sl.filter(n=>!A4.has(n));function C4(n){const e=[];return P4.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const yl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:RE(4,13),y:RE(5,14)};yl.translateX=yl.x;yl.translateY=yl.y;const Ao=new Set;let _g=!1,wg=!1;function SR(){if(wg){const n=Array.from(Ao).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=C4(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,l])=>{var h;(h=r.getValue(a))===null||h===void 0||h.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wg=!1,_g=!1,Ao.forEach(n=>n.complete()),Ao.clear()}function RR(){Ao.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(wg=!0)})}function k4(){RR(),SR()}class av{constructor(e,t,r,s,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ao.add(this),_g||(_g=!0,nt.read(RR),nt.resolveKeyframes(SR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=s==null?void 0:s.get(),h=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const f=r.readValue(t,h);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=h),s&&l===void 0&&s.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ao.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ao.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const AR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),b4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N4(n){const e=b4.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function PR(n,e,t=1){const[r,s]=N4(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return AR(l)?parseFloat(l):l}return zy(s)?PR(s,e,t+1):s}const CR=n=>e=>e.test(n),D4={test:n=>n==="auto",parse:n=>n},kR=[Rl,xe,$r,ls,TM,EM,D4],AE=n=>kR.find(CR(n));class bR extends av{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),zy(p))){const v=PR(p,t.current);v!==void 0&&(e[f]=v),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!aR.has(r)||e.length!==2)return;const[s,a]=e,l=AE(s),h=AE(a);if(l!==h)if(IE(l)&&IE(h))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)u4(e[s])&&r.push(s);r.length&&R4(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,h=s[l];s[l]=yl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,p])=>{t.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const PE=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Os.test(n)||n==="0")&&!n.startsWith("url("));function O4(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function L4(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=PE(s,e),h=PE(a,e);return!l||!h?!1:O4(n)||(t==="spring"||Yy(t))&&r}const V4=n=>n!==null;function Ef(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(V4),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const M4=40;class NR{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hr.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:l,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>M4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&k4(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Hr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:l,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!L4(e,r,s,a))if(l)this.options.duration=0;else{f==null||f(Ef(e,this.options,t)),h==null||h(),this.resolveFinishedPromise();return}const v=this.initPlayback(e,t);v!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...v},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const at=(n,e,t)=>n+(e-n)*t;function ym(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function j4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,l=0;if(!e)s=a=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;s=ym(f,h,n+1/3),a=ym(f,h,n),l=ym(f,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function qd(n,e){return t=>t>0?e:n}const vm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},F4=[yg,_o,Fa],U4=n=>F4.find(e=>e.test(n));function CE(n){const e=U4(n);if(!e)return!1;let t=e.parse(n);return e===Fa&&(t=j4(t)),t}const kE=(n,e)=>{const t=CE(n),r=CE(e);if(!t||!r)return qd(n,e);const s={...t};return a=>(s.red=vm(t.red,r.red,a),s.green=vm(t.green,r.green,a),s.blue=vm(t.blue,r.blue,a),s.alpha=at(t.alpha,r.alpha,a),_o.transform(s))},B4=(n,e)=>t=>e(n(t)),kc=(...n)=>n.reduce(B4),Eg=new Set(["none","hidden"]);function z4(n,e){return Eg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function $4(n,e){return t=>at(n,e,t)}function lv(n){return typeof n=="number"?$4:typeof n=="string"?zy(n)?qd:tn.test(n)?kE:q4:Array.isArray(n)?DR:typeof n=="object"?tn.test(n)?kE:H4:qd}function DR(n,e){const t=[...n],r=t.length,s=n.map((a,l)=>lv(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=s[l](a);return t}}function H4(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=lv(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function W4(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],h=n.indexes[l][s[l]],f=(t=n.values[h])!==null&&t!==void 0?t:0;r[a]=f,s[l]++}return r}const q4=(n,e)=>{const t=Os.createTransformer(e),r=ac(n),s=ac(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Eg.has(n)&&!s.values.length||Eg.has(e)&&!r.values.length?z4(n,e):kc(DR(W4(r,s),s.values),t):qd(n,e)};function OR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?at(n,e,t):lv(n)(n,e)}const K4=5;function LR(n,e,t){const r=Math.max(e-K4,0);return lR(t-n(r),e-r)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bE=.001;function G4({duration:n=dt.duration,bounce:e=dt.bounce,velocity:t=dt.velocity,mass:r=dt.mass}){let s,a,l=1-e;l=Ni(dt.minDamping,dt.maxDamping,l),n=Ni(dt.minDuration,dt.maxDuration,Ai(n)),l<1?(s=p=>{const v=p*l,_=v*n,E=v-t,I=Tg(p,l),k=Math.exp(-_);return bE-E/I*k},a=p=>{const _=p*l*n,E=_*t+t,I=Math.pow(l,2)*Math.pow(p,2)*n,k=Math.exp(-_),b=Tg(Math.pow(p,2),l);return(-s(p)+bE>0?-1:1)*((E-I)*k)/b}):(s=p=>{const v=Math.exp(-p*n),_=(p-t)*n+1;return-.001+v*_},a=p=>{const v=Math.exp(-p*n),_=(t-p)*(n*n);return v*_});const h=5/n,f=Y4(s,a,h);if(n=Ri(n),isNaN(f))return{stiffness:dt.stiffness,damping:dt.damping,duration:n};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:n}}}const Q4=12;function Y4(n,e,t){let r=t;for(let s=1;s<Q4;s++)r=r-n(r)/e(r);return r}function Tg(n,e){return n*Math.sqrt(1-e*e)}const X4=["duration","bounce"],J4=["stiffness","damping","mass"];function NE(n,e){return e.some(t=>n[t]!==void 0)}function Z4(n){let e={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...n};if(!NE(n,J4)&&NE(n,X4))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*Ni(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:dt.mass,stiffness:s,damping:a}}else{const t=G4(n);e={...e,...t,mass:dt.mass},e.isResolvedFromDuration=!0}return e}function VR(n=dt.visualDuration,e=dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:p,mass:v,duration:_,velocity:E,isResolvedFromDuration:I}=Z4({...t,velocity:-Ai(t.velocity||0)}),k=E||0,b=p/(2*Math.sqrt(f*v)),P=l-a,V=Ai(Math.sqrt(f/v)),B=Math.abs(P)<5;r||(r=B?dt.restSpeed.granular:dt.restSpeed.default),s||(s=B?dt.restDelta.granular:dt.restDelta.default);let q;if(b<1){const Z=Tg(V,b);q=se=>{const D=Math.exp(-b*V*se);return l-D*((k+b*V*P)/Z*Math.sin(Z*se)+P*Math.cos(Z*se))}}else if(b===1)q=Z=>l-Math.exp(-V*Z)*(P+(k+V*P)*Z);else{const Z=V*Math.sqrt(b*b-1);q=se=>{const D=Math.exp(-b*V*se),R=Math.min(Z*se,300);return l-D*((k+b*V*P)*Math.sinh(R)+Z*P*Math.cosh(R))/Z}}const Y={calculatedDuration:I&&_||null,next:Z=>{const se=q(Z);if(I)h.done=Z>=_;else{let D=0;b<1&&(D=Z===0?Ri(k):LR(q,Z,se));const R=Math.abs(D)<=r,A=Math.abs(l-se)<=s;h.done=R&&A}return h.value=h.done?l:se,h},toString:()=>{const Z=Math.min(eR(Y),pg),se=tR(D=>Y.next(Z*D).value,Z,30);return Z+"ms "+se}};return Y}function DE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:h,max:f,restDelta:p=.5,restSpeed:v}){const _=n[0],E={done:!1,value:_},I=R=>h!==void 0&&R<h||f!==void 0&&R>f,k=R=>h===void 0?f:f===void 0||Math.abs(h-R)<Math.abs(f-R)?h:f;let b=t*e;const P=_+b,V=l===void 0?P:l(P);V!==P&&(b=V-_);const B=R=>-b*Math.exp(-R/r),q=R=>V+B(R),Y=R=>{const A=B(R),L=q(R);E.done=Math.abs(A)<=p,E.value=E.done?V:L};let Z,se;const D=R=>{I(E.value)&&(Z=R,se=VR({keyframes:[E.value,k(E.value)],velocity:LR(q,R,E.value),damping:s,stiffness:a,restDelta:p,restSpeed:v}))};return D(0),{calculatedDuration:null,next:R=>{let A=!1;return!se&&Z===void 0&&(A=!0,Y(R),D(R)),Z!==void 0&&R>=Z?se.next(R-Z):(!A&&Y(R),E)}}}const ej=Cc(.42,0,1,1),tj=Cc(0,0,.58,1),MR=Cc(.42,0,.58,1),nj=n=>Array.isArray(n)&&typeof n[0]!="number",OE={linear:Dn,easeIn:ej,easeInOut:MR,easeOut:tj,circIn:rv,circInOut:yR,circOut:gR,backIn:nv,backInOut:pR,backOut:fR,anticipate:mR},LE=n=>{if(Xy(n)){dg(n.length===4);const[e,t,r,s]=n;return Cc(e,t,r,s)}else if(typeof n=="string")return dg(OE[n]!==void 0),OE[n];return n};function rj(n,e,t){const r=[],s=t||OR,a=n.length-1;for(let l=0;l<a;l++){let h=s(n[l],n[l+1]);if(e){const f=Array.isArray(e)?e[l]||Dn:e;h=kc(f,h)}r.push(h)}return r}function ij(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(dg(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=rj(e,r,s),f=h.length,p=v=>{if(l&&v<n[0])return e[0];let _=0;if(f>1)for(;_<n.length-2&&!(v<n[_+1]);_++);const E=ml(n[_],n[_+1],v);return h[_](E)};return t?v=>p(Ni(n[0],n[a-1],v)):p}function sj(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=ml(0,e,r);n.push(at(t,1,s))}}function oj(n){const e=[0];return sj(e,n.length-1),e}function aj(n,e){return n.map(t=>t*e)}function lj(n,e){return n.map(()=>e||MR).splice(0,n.length-1)}function Kd({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=nj(r)?r.map(LE):LE(r),a={done:!1,value:e[0]},l=aj(t&&t.length===e.length?t:oj(e),n),h=ij(l,e,{ease:Array.isArray(s)?s:lj(e,s)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}const uj=n=>{const e=({timestamp:t})=>n(t);return{start:()=>nt.update(e,!0),stop:()=>Ds(e),now:()=>Ht.isProcessing?Ht.timestamp:Hr.now()}},cj={decay:DE,inertia:DE,tween:Kd,keyframes:Kd,spring:VR},hj=n=>n/100;class uv extends NR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:t,motionValue:r,element:s,keyframes:a}=this.options,l=(s==null?void 0:s.KeyframeResolver)||av,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new l(a,h,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=this.options,h=Yy(t)?t:cj[t]||Kd;let f,p;h!==Kd&&typeof e[0]!="number"&&(f=kc(hj,OR(e[0],e[1])),e=[0,100]);const v=h({...this.options,keyframes:e});a==="mirror"&&(p=h({...this.options,keyframes:[...e].reverse(),velocity:-l})),v.calculatedDuration===null&&(v.calculatedDuration=eR(v));const{calculatedDuration:_}=v,E=_+s,I=E*(r+1)-s;return{generator:v,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:_,resolvedDuration:E,totalDuration:I}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:l,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:v,resolvedDuration:_}=r;if(this.startTime===null)return a.next(0);const{delay:E,repeat:I,repeatType:k,repeatDelay:b,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const V=this.currentTime-E*(this.speed>=0?1:-1),B=this.speed>=0?V<0:V>v;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let q=this.currentTime,Y=a;if(I){const R=Math.min(this.currentTime,v)/_;let A=Math.floor(R),L=R%1;!L&&R>=1&&(L=1),L===1&&A--,A=Math.min(A,I+1),!!(A%2)&&(k==="reverse"?(L=1-L,b&&(L-=b/_)):k==="mirror"&&(Y=l)),q=Ni(0,1,L)*_}const Z=B?{done:!1,value:f[0]}:Y.next(q);h&&(Z.value=h(Z.value));let{done:se}=Z;!B&&p!==null&&(se=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&se);return D&&s!==void 0&&(Z.value=Ef(f,this.options,s)),P&&P(Z.value),D&&this.finish(),Z}get duration(){const{resolved:e}=this;return e?Ai(e.calculatedDuration):0}get time(){return Ai(this.currentTime)}set time(e){e=Ri(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ai(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=uj,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const dj=new Set(["opacity","clipPath","filter","transform"]);function fj(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:h="easeInOut",times:f}={}){const p={[e]:t};f&&(p.offset=f);const v=rR(h,s);return Array.isArray(v)&&(p.easing=v),n.animate(p,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const pj=Ly(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gd=10,mj=2e4;function gj(n){return Yy(n.type)||n.type==="spring"||!nR(n.ease)}function yj(n,e){const t=new uv({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let a=0;for(;!r.done&&a<mj;)r=t.sample(a),s.push(r.value),a+=Gd;return{times:void 0,keyframes:s,duration:a-Gd,ease:"linear"}}const jR={anticipate:mR,backInOut:pR,circInOut:yR};function vj(n){return n in jR}class VE extends NR{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new bR(a,(l,h)=>this.onKeyframesResolved(l,h),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:s=300,times:a,ease:l,type:h,motionValue:f,name:p,startTime:v}=this.options;if(!(!((r=f.owner)===null||r===void 0)&&r.current))return!1;if(typeof l=="string"&&Wd()&&vj(l)&&(l=jR[l]),gj(this.options)){const{onComplete:E,onUpdate:I,motionValue:k,element:b,...P}=this.options,V=yj(e,P);e=V.keyframes,e.length===1&&(e[1]=e[0]),s=V.duration,a=V.times,l=V.ease,h="keyframes"}const _=fj(f.owner.current,p,e,{...this.options,duration:s,times:a,ease:l});return _.startTime=v??this.calcStartTime(),this.pendingTimeline?(vE(_,this.pendingTimeline),this.pendingTimeline=void 0):_.onfinish=()=>{const{onComplete:E}=this.options;f.set(Ef(e,this.options,t)),E&&E(),this.cancel(),this.resolveFinishedPromise()},{animation:_,duration:s,times:a,type:h,ease:l,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Ai(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Ai(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Ri(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Dn;const{animation:r}=t;vE(r,e)}return Dn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:a,ease:l,times:h}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:v,onComplete:_,element:E,...I}=this.options,k=new uv({...I,keyframes:r,duration:s,type:a,ease:l,times:h,isGenerator:!0}),b=Ri(this.time);p.setWithVelocity(k.sample(b-Gd).value,k.sample(b).value,Gd)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:a,damping:l,type:h}=e;return pj()&&r&&dj.has(r)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!s&&a!=="mirror"&&l!==0&&h!=="inertia"}}const _j={type:"spring",stiffness:500,damping:25,restSpeed:10},wj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Ej={type:"keyframes",duration:.8},Tj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xj=(n,{keyframes:e})=>e.length>2?Ej:Bo.has(n)?n.startsWith("scale")?wj(e[1]):_j:Tj;function Ij({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:h,from:f,elapsed:p,...v}){return!!Object.keys(v).length}const cv=(n,e,t,r={},s,a)=>l=>{const h=Qy(r,n)||{},f=h.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Ri(f);let v={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:E=>{e.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:a?void 0:s};Ij(h)||(v={...v,...xj(n,v)}),v.duration&&(v.duration=Ri(v.duration)),v.repeatDelay&&(v.repeatDelay=Ri(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let _=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(_=!0)),_&&!a&&e.get()!==void 0){const E=Ef(v.keyframes,h);if(E!==void 0)return nt.update(()=>{v.onUpdate(E),v.onComplete()}),new HM([])}return!a&&VE.supports(v)?new VE(v):new uv(v)};function Sj({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function FR(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var a;let{transition:l=n.getDefaultTransition(),transitionEnd:h,...f}=e;r&&(l=r);const p=[],v=s&&n.animationState&&n.animationState.getState()[s];for(const _ in f){const E=n.getValue(_,(a=n.latestValues[_])!==null&&a!==void 0?a:null),I=f[_];if(I===void 0||v&&Sj(v,_))continue;const k={delay:t,...Qy(l||{},_)};let b=!1;if(window.MotionHandoffAnimation){const V=uR(n);if(V){const B=window.MotionHandoffAnimation(V,_,nt);B!==null&&(k.startTime=B,b=!0)}}gg(n,_),E.start(cv(_,E,I,n.shouldReduceMotion&&aR.has(_)?{type:!1}:k,n,b));const P=E.animation;P&&p.push(P)}return h&&Promise.all(p).then(()=>{nt.update(()=>{h&&i4(n,h)})}),p}function xg(n,e,t={}){var r;const s=wf(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(a=t.transitionOverride);const l=s?()=>Promise.all(FR(n,s,t)):()=>Promise.resolve(),h=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:v=0,staggerChildren:_,staggerDirection:E}=a;return Rj(n,e,v+p,_,E,t)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,v]=f==="beforeChildren"?[l,h]:[h,l];return p().then(()=>v())}else return Promise.all([l(),h(t.delay)])}function Rj(n,e,t=0,r=0,s=1,a){const l=[],h=(n.variantChildren.size-1)*r,f=s===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(n.variantChildren).sort(Aj).forEach((p,v)=>{p.notify("AnimationStart",e),l.push(xg(p,e,{...a,delay:t+f(v)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function Aj(n,e){return n.sortNodePosition(e)}function Pj(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>xg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=xg(n,e,t);else{const s=typeof e=="function"?wf(n,e,t.custom):e;r=Promise.all(FR(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const Cj=My.length;function UR(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?UR(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Cj;t++){const r=My[t],s=n.props[r];(ic(s)||s===!1)&&(e[r]=s)}return e}const kj=[...Vy].reverse(),bj=Vy.length;function Nj(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Pj(n,t,r)))}function Dj(n){let e=Nj(n),t=ME(),r=!0;const s=f=>(p,v)=>{var _;const E=wf(n,v,f==="exit"?(_=n.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:I,transitionEnd:k,...b}=E;p={...p,...b,...k}}return p};function a(f){e=f(n)}function l(f){const{props:p}=n,v=UR(n.parent)||{},_=[],E=new Set;let I={},k=1/0;for(let P=0;P<bj;P++){const V=kj[P],B=t[V],q=p[V]!==void 0?p[V]:v[V],Y=ic(q),Z=V===f?B.isActive:null;Z===!1&&(k=P);let se=q===v[V]&&q!==p[V]&&Y;if(se&&r&&n.manuallyAnimateOnMount&&(se=!1),B.protectedKeys={...I},!B.isActive&&Z===null||!q&&!B.prevProp||vf(q)||typeof q=="boolean")continue;const D=Oj(B.prevProp,q);let R=D||V===f&&B.isActive&&!se&&Y||P>k&&Y,A=!1;const L=Array.isArray(q)?q:[q];let j=L.reduce(s(V),{});Z===!1&&(j={});const{prevResolvedValues:z={}}=B,O={...z,...j},Qe=Re=>{R=!0,E.has(Re)&&(A=!0,E.delete(Re)),B.needsAnimating[Re]=!0;const ie=n.getValue(Re);ie&&(ie.liveStyle=!1)};for(const Re in O){const ie=j[Re],ge=z[Re];if(I.hasOwnProperty(Re))continue;let le=!1;fg(ie)&&fg(ge)?le=!ZS(ie,ge):le=ie!==ge,le?ie!=null?Qe(Re):E.add(Re):ie!==void 0&&E.has(Re)?Qe(Re):B.protectedKeys[Re]=!0}B.prevProp=q,B.prevResolvedValues=j,B.isActive&&(I={...I,...j}),r&&n.blockInitialAnimation&&(R=!1),R&&(!(se&&D)||A)&&_.push(...L.map(Re=>({animation:Re,options:{type:V}})))}if(E.size){const P={};E.forEach(V=>{const B=n.getBaseTarget(V),q=n.getValue(V);q&&(q.liveStyle=!0),P[V]=B??null}),_.push({animation:P})}let b=!!_.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(_):Promise.resolve()}function h(f,p){var v;if(t[f].isActive===p)return Promise.resolve();(v=n.variantChildren)===null||v===void 0||v.forEach(E=>{var I;return(I=E.animationState)===null||I===void 0?void 0:I.setActive(f,p)}),t[f].isActive=p;const _=l(f);for(const E in t)t[E].protectedKeys={};return _}return{animateChanges:l,setActive:h,setAnimateFunction:a,getState:()=>t,reset:()=>{t=ME(),r=!0}}}function Oj(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ZS(e,n):!1}function fo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ME(){return{animate:fo(!0),whileInView:fo(),whileHover:fo(),whileTap:fo(),whileDrag:fo(),whileFocus:fo(),exit:fo()}}class Vs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lj extends Vs{constructor(e){super(e),e.animationState||(e.animationState=Dj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Vj=0;class Mj extends Vs{constructor(){super(...arguments),this.id=Vj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jj={animation:{Feature:Lj},exit:{Feature:Mj}};function lc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function bc(n){return{point:{x:n.pageX,y:n.pageY}}}const Fj=n=>e=>Jy(e)&&n(e,bc(e));function Bu(n,e,t,r){return lc(n,e,Fj(t),r)}const jE=(n,e)=>Math.abs(n-e);function Uj(n,e){const t=jE(n.x,e.x),r=jE(n.y,e.y);return Math.sqrt(t**2+r**2)}class BR{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=wm(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,I=Uj(_.offset,{x:0,y:0})>=3;if(!E&&!I)return;const{point:k}=_,{timestamp:b}=Ht;this.history.push({...k,timestamp:b});const{onStart:P,onMove:V}=this.handlers;E||(P&&P(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=_m(E,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:I,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=wm(_.type==="pointercancel"?this.lastMoveEventInfo:_m(E,this.transformPagePoint),this.history);this.startEvent&&I&&I(_,P),k&&k(_,P)},!Jy(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=bc(e),h=_m(l,this.transformPagePoint),{point:f}=h,{timestamp:p}=Ht;this.history=[{...f,timestamp:p}];const{onSessionStart:v}=t;v&&v(e,wm(h,this.history)),this.removeListeners=kc(Bu(this.contextWindow,"pointermove",this.handlePointerMove),Bu(this.contextWindow,"pointerup",this.handlePointerUp),Bu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ds(this.updatePoint)}}function _m(n,e){return e?{point:e(n.point)}:n}function FE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function wm({point:n},e){return{point:n,delta:FE(n,zR(e)),offset:FE(n,Bj(e)),velocity:zj(e,.1)}}function Bj(n){return n[0]}function zR(n){return n[n.length-1]}function zj(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=zR(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Ri(e)));)t--;if(!r)return{x:0,y:0};const a=Ai(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const $R=1e-4,$j=1-$R,Hj=1+$R,HR=.01,Wj=0-HR,qj=0+HR;function On(n){return n.max-n.min}function Kj(n,e,t){return Math.abs(n-e)<=t}function UE(n,e,t,r=.5){n.origin=r,n.originPoint=at(e.min,e.max,n.origin),n.scale=On(t)/On(e),n.translate=at(t.min,t.max,n.origin)-n.originPoint,(n.scale>=$j&&n.scale<=Hj||isNaN(n.scale))&&(n.scale=1),(n.translate>=Wj&&n.translate<=qj||isNaN(n.translate))&&(n.translate=0)}function zu(n,e,t,r){UE(n.x,e.x,t.x,r?r.originX:void 0),UE(n.y,e.y,t.y,r?r.originY:void 0)}function BE(n,e,t){n.min=t.min+e.min,n.max=n.min+On(e)}function Gj(n,e,t){BE(n.x,e.x,t.x),BE(n.y,e.y,t.y)}function zE(n,e,t){n.min=e.min-t.min,n.max=n.min+On(e)}function $u(n,e,t){zE(n.x,e.x,t.x),zE(n.y,e.y,t.y)}function Qj(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?at(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?at(t,n,r.max):Math.min(n,t)),n}function $E(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Yj(n,{top:e,left:t,bottom:r,right:s}){return{x:$E(n.x,t,s),y:$E(n.y,e,r)}}function HE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Xj(n,e){return{x:HE(n.x,e.x),y:HE(n.y,e.y)}}function Jj(n,e){let t=.5;const r=On(n),s=On(e);return s>r?t=ml(e.min,e.max-r,n.min):r>s&&(t=ml(n.min,n.max-s,e.min)),Ni(0,1,t)}function Zj(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ig=.35;function eF(n=Ig){return n===!1?n=0:n===!0&&(n=Ig),{x:WE(n,"left","right"),y:WE(n,"top","bottom")}}function WE(n,e,t){return{min:qE(n,e),max:qE(n,t)}}function qE(n,e){return typeof n=="number"?n:n[e]||0}const KE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ua=()=>({x:KE(),y:KE()}),GE=()=>({min:0,max:0}),vt=()=>({x:GE(),y:GE()});function qn(n){return[n("x"),n("y")]}function WR({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function tF({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function nF(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Em(n){return n===void 0||n===1}function Sg({scale:n,scaleX:e,scaleY:t}){return!Em(n)||!Em(e)||!Em(t)}function mo(n){return Sg(n)||qR(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function qR(n){return QE(n.x)||QE(n.y)}function QE(n){return n&&n!=="0%"}function Qd(n,e,t){const r=n-t,s=e*r;return t+s}function YE(n,e,t,r,s){return s!==void 0&&(n=Qd(n,s,r)),Qd(n,t,r)+e}function Rg(n,e=0,t=1,r,s){n.min=YE(n.min,e,t,r,s),n.max=YE(n.max,e,t,r,s)}function KR(n,{x:e,y:t}){Rg(n.x,e.translate,e.scale,e.originPoint),Rg(n.y,t.translate,t.scale,t.originPoint)}const XE=.999999999999,JE=1.0000000000001;function rF(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,l;for(let h=0;h<s;h++){a=t[h],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&za(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,KR(n,l)),r&&mo(a.latestValues)&&za(n,a.latestValues))}e.x<JE&&e.x>XE&&(e.x=1),e.y<JE&&e.y>XE&&(e.y=1)}function Ba(n,e){n.min=n.min+e,n.max=n.max+e}function ZE(n,e,t,r,s=.5){const a=at(n.min,n.max,s);Rg(n,e,t,a,r)}function za(n,e){ZE(n.x,e.x,e.scaleX,e.scale,e.originX),ZE(n.y,e.y,e.scaleY,e.scale,e.originY)}function GR(n,e){return WR(nF(n.getBoundingClientRect(),e))}function iF(n,e,t){const r=GR(n,t),{scroll:s}=e;return s&&(Ba(r.x,s.offset.x),Ba(r.y,s.offset.y)),r}const QR=({current:n})=>n?n.ownerDocument.defaultView:null,sF=new WeakMap;class oF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(bc(v).point)},a=(v,_)=>{const{drag:E,dragPropagation:I,onDragStart:k}=this.getProps();if(E&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZM(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(P=>{let V=this.getAxisMotionValue(P).get()||0;if($r.test(V)){const{projection:B}=this.visualElement;if(B&&B.layout){const q=B.layout.layoutBox[P];q&&(V=On(q)*(parseFloat(V)/100))}}this.originPoint[P]=V}),k&&nt.postRender(()=>k(v,_)),gg(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(v,_)=>{const{dragPropagation:E,dragDirectionLock:I,onDirectionLock:k,onDrag:b}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=_;if(I&&this.currentDirection===null){this.currentDirection=aF(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",_.point,P),this.updateAxis("y",_.point,P),this.visualElement.render(),b&&b(v,_)},h=(v,_)=>this.stop(v,_),f=()=>qn(v=>{var _;return this.getAnimationState(v)==="paused"&&((_=this.getAxisMotionValue(v).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new BR(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:QR(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&nt.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!ad(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Qj(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ja(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Yj(s.layoutBox,t):this.constraints=!1,this.elastic=eF(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&qn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Zj(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ja(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=iF(r,s.root,this.visualElement.getTransformPagePoint());let l=Xj(s.layout.layoutBox,a);if(t){const h=t(tF(l));this.hasMutatedConstraints=!!h,h&&(l=WR(h))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=qn(v=>{if(!ad(v,t,this.currentDirection))return;let _=f[v]||{};l&&(_={min:0,max:0});const E=s?200:1e6,I=s?40:1e7,k={type:"inertia",velocity:r?e[v]:0,bounceStiffness:E,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...a,..._};return this.startAxisValueAnimation(v,k)});return Promise.all(p).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return gg(this.visualElement,e),r.start(cv(e,r,0,t,this.visualElement,!1))}stopAnimation(){qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qn(t=>{const{drag:r}=this.getProps();if(!ad(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:h}=s.layout.layoutBox[t];a.set(e[t]-at(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ja(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qn(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const f=h.get();s[l]=Jj({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(l=>{if(!ad(l,e,null))return;const h=this.getAxisMotionValue(l),{min:f,max:p}=this.constraints[l];h.set(at(f,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;sF.set(this.visualElement,this);const e=this.visualElement.current,t=Bu(e,"pointerdown",f=>{const{drag:p,dragListener:v=!0}=this.getProps();p&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();ja(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),nt.read(r);const l=lc(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(qn(v=>{const _=this.getAxisMotionValue(v);_&&(this.originPoint[v]+=f[v].translate,_.set(_.get()+f[v].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=Ig,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:h}}}function ad(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function aF(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class lF extends Vs{constructor(e){super(e),this.removeGroupControls=Dn,this.removeListeners=Dn,this.controls=new oF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dn}unmount(){this.removeGroupControls(),this.removeListeners()}}const eT=n=>(e,t)=>{n&&nt.postRender(()=>n(e,t))};class uF extends Vs{constructor(){super(...arguments),this.removePointerDownListener=Dn}onPointerDown(e){this.session=new BR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:eT(e),onStart:eT(t),onMove:r,onEnd:(a,l)=>{delete this.session,s&&nt.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Bu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Iu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(xe.test(n))n=parseFloat(n);else return n;const t=tT(n,e.target.x),r=tT(n,e.target.y);return`${t}% ${r}%`}},cF={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Os.parse(n);if(s.length>5)return r;const a=Os.createTransformer(n),l=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;s[0+l]/=h,s[1+l]/=f;const p=at(h,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),a(s)}};class hF extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;NM(dF),a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),xd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,s||e.layoutDependency!==t||t===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||nt.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YR(n){const[e,t]=KV(),r=C.useContext(DS);return T.jsx(hF,{...n,layoutGroup:r,switchLayoutGroup:C.useContext(US),isPresent:e,safeToRemove:t})}const dF={borderRadius:{...Iu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Iu,borderTopRightRadius:Iu,borderBottomLeftRadius:Iu,borderBottomRightRadius:Iu,boxShadow:cF};function fF(n,e,t){const r=sn(n)?n:oc(n);return r.start(cv("",r,e,t)),r.animation}function pF(n){return n instanceof SVGElement&&n.tagName!=="svg"}const mF=(n,e)=>n.depth-e.depth;class gF{constructor(){this.children=[],this.isDirty=!1}add(e){Zy(this.children,e),this.isDirty=!0}remove(e){ev(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mF),this.isDirty=!1,this.children.forEach(e)}}function yF(n,e){const t=Hr.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(Ds(r),n(a-e))};return nt.read(r,!0),()=>Ds(r)}const XR=["TopLeft","TopRight","BottomLeft","BottomRight"],vF=XR.length,nT=n=>typeof n=="string"?parseFloat(n):n,rT=n=>typeof n=="number"||xe.test(n);function _F(n,e,t,r,s,a){s?(n.opacity=at(0,t.opacity!==void 0?t.opacity:1,wF(r)),n.opacityExit=at(e.opacity!==void 0?e.opacity:1,0,EF(r))):a&&(n.opacity=at(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<vF;l++){const h=`border${XR[l]}Radius`;let f=iT(e,h),p=iT(t,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||rT(f)===rT(p)?(n[h]=Math.max(at(nT(f),nT(p),r),0),($r.test(p)||$r.test(f))&&(n[h]+="%")):n[h]=p}(e.rotate||t.rotate)&&(n.rotate=at(e.rotate||0,t.rotate||0,r))}function iT(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const wF=JR(0,.5,gR),EF=JR(.5,.95,Dn);function JR(n,e,t){return r=>r<n?0:r>e?1:t(ml(n,e,r))}function sT(n,e){n.min=e.min,n.max=e.max}function Wn(n,e){sT(n.x,e.x),sT(n.y,e.y)}function oT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function aT(n,e,t,r,s){return n-=e,n=Qd(n,1/t,r),s!==void 0&&(n=Qd(n,1/s,r)),n}function TF(n,e=0,t=1,r=.5,s,a=n,l=n){if($r.test(e)&&(e=parseFloat(e),e=at(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=at(a.min,a.max,r);n===a&&(h-=e),n.min=aT(n.min,e,t,h,s),n.max=aT(n.max,e,t,h,s)}function lT(n,e,[t,r,s],a,l){TF(n,e[t],e[r],e[s],e.scale,a,l)}const xF=["x","scaleX","originX"],IF=["y","scaleY","originY"];function uT(n,e,t,r){lT(n.x,e,xF,t?t.x:void 0,r?r.x:void 0),lT(n.y,e,IF,t?t.y:void 0,r?r.y:void 0)}function cT(n){return n.translate===0&&n.scale===1}function ZR(n){return cT(n.x)&&cT(n.y)}function hT(n,e){return n.min===e.min&&n.max===e.max}function SF(n,e){return hT(n.x,e.x)&&hT(n.y,e.y)}function dT(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function eA(n,e){return dT(n.x,e.x)&&dT(n.y,e.y)}function fT(n){return On(n.x)/On(n.y)}function pT(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class RF{constructor(){this.members=[]}add(e){Zy(this.members,e),e.scheduleRender()}remove(e){if(ev(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AF(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:v,rotateX:_,rotateY:E,skewX:I,skewY:k}=t;p&&(r=`perspective(${p}px) ${r}`),v&&(r+=`rotate(${v}deg) `),_&&(r+=`rotateX(${_}deg) `),E&&(r+=`rotateY(${E}deg) `),I&&(r+=`skewX(${I}deg) `),k&&(r+=`skewY(${k}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const go={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ou=typeof window<"u"&&window.MotionDebug!==void 0,Tm=["","X","Y","Z"],PF={visibility:"hidden"},mT=1e3;let CF=0;function xm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function tA(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=uR(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",nt,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&tA(r)}function nA({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},h=e==null?void 0:e()){this.id=CF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ou&&(go.totalNodes=go.resolvedTargetDeltas=go.recalculatedProjection=0),this.nodes.forEach(NF),this.nodes.forEach(MF),this.nodes.forEach(jF),this.nodes.forEach(DF),Ou&&window.MotionDebug.record(go)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new gF)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new tv),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const f=this.eventHandlers.get(l);f&&f.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pF(l),this.instance=l;const{layoutId:f,layout:p,visualElement:v}=this.options;if(v&&!v.current&&v.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),n){let _;const E=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=yF(E,250),xd.hasAnimatedSinceResize&&(xd.hasAnimatedSinceResize=!1,this.nodes.forEach(yT))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:I,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||v.getDefaultTransition()||$F,{onLayoutAnimationStart:P,onLayoutAnimationComplete:V}=v.getProps(),B=!this.targetLayout||!eA(this.targetLayout,k)||I,q=!E&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||q||E&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,q);const Y={...Qy(b,"layout"),onPlay:P,onComplete:V};(v.shouldReduceMotion||this.options.layoutRoot)&&(Y.delay=0,Y.type=!1),this.startAnimation(Y)}else E||yT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const _=this.path[v];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gT);return}this.isUpdating||this.nodes.forEach(LF),this.isUpdating=!1,this.nodes.forEach(VF),this.nodes.forEach(kF),this.nodes.forEach(bF),this.clearAllSnapshots();const h=Hr.now();Ht.delta=Ni(0,1e3/60,h-Ht.timestamp),Ht.timestamp=h,Ht.isProcessing=!0,pm.update.process(Ht),pm.preRender.process(Ht),pm.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OF),this.sharedNodes.forEach(UF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!ZR(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,v=p!==this.prevTransformTemplateValue;l&&(h||mo(this.latestValues)||v)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return l&&(f=this.removeTransform(f)),HF(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:h}=this.options;if(!h)return vt();const f=h.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(WF))){const{scroll:v}=this.root;v&&(Ba(f.x,v.offset.x),Ba(f.y,v.offset.y))}return f}removeElementScroll(l){var h;const f=vt();if(Wn(f,l),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const v=this.path[p],{scroll:_,options:E}=v;v!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&Wn(f,l),Ba(f.x,_.offset.x),Ba(f.y,_.offset.y))}return f}applyTransform(l,h=!1){const f=vt();Wn(f,l);for(let p=0;p<this.path.length;p++){const v=this.path[p];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&za(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),mo(v.latestValues)&&za(f,v.latestValues)}return mo(this.latestValues)&&za(f,this.latestValues),f}removeTransform(l){const h=vt();Wn(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!mo(p.latestValues))continue;Sg(p.latestValues)&&p.updateSnapshot();const v=vt(),_=p.measurePageBox();Wn(v,_),uT(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,v)}return mo(this.latestValues)&&uT(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(l||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Ht.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vt(),this.relativeTargetOrigin=vt(),$u(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=vt(),this.targetWithTransforms=vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),KR(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vt(),this.relativeTargetOrigin=vt(),$u(this.relativeTargetOrigin,this.target,I.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ou&&go.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sg(this.parent.latestValues)||qR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(p=!1),p)return;const{layout:v,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||_))return;Wn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,I=this.treeScale.y;rF(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=vt());const{target:k}=h;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oT(this.prevProjectionDelta.x,this.projectionDelta.x),oT(this.prevProjectionDelta.y,this.projectionDelta.y)),zu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==I||!pT(this.projectionDelta.x,this.prevProjectionDelta.x)||!pT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Ou&&go.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ua(),this.projectionDelta=Ua(),this.projectionDeltaWithTransform=Ua()}setAnimationOrigin(l,h=!1){const f=this.snapshot,p=f?f.latestValues:{},v={...this.latestValues},_=Ua();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=vt(),I=f?f.source:void 0,k=this.layout?this.layout.source:void 0,b=I!==k,P=this.getStack(),V=!P||P.members.length<=1,B=!!(b&&!V&&this.options.crossfade===!0&&!this.path.some(zF));this.animationProgress=0;let q;this.mixTargetDelta=Y=>{const Z=Y/1e3;vT(_.x,l.x,Z),vT(_.y,l.y,Z),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($u(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BF(this.relativeTarget,this.relativeTargetOrigin,E,Z),q&&SF(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=vt()),Wn(q,this.relativeTarget)),b&&(this.animationValues=v,_F(v,p,this.latestValues,Z,B,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{xd.hasAnimatedSinceResize=!0,this.currentAnimation=fF(0,mT,{...l,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:v}=l;if(!(!h||!f||!p)){if(this!==l&&this.layout&&p&&rA(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||vt();const _=On(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const E=On(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+E}Wn(h,f),za(h,v),zu(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new RF),this.sharedNodes.get(l).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:h}=this.options;return h?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:h}=this.options;return h?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&xm("z",l,p,this.animationValues);for(let v=0;v<Tm.length;v++)xm(`rotate${Tm[v]}`,l,p,this.animationValues),xm(`skew${Tm[v]}`,l,p,this.animationValues);l.render();for(const v in p)l.setStaticValue(v,p[v]),this.animationValues&&(this.animationValues[v]=p[v]);l.scheduleRender()}getProjectionStyles(l){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PF;const p={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Ed(l==null?void 0:l.pointerEvents)||"",p.transform=v?v(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ed(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!mo(this.latestValues)&&(b.transform=v?v({},""):"none",this.hasProjected=!1),b}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=AF(this.projectionDeltaWithTransform,this.treeScale,E),v&&(p.transform=v(E,p.transform));const{x:I,y:k}=this.projectionDelta;p.transformOrigin=`${I.origin*100}% ${k.origin*100}% 0`,_.animationValues?p.opacity=_===this?(f=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const b in Hd){if(E[b]===void 0)continue;const{correct:P,applyTo:V}=Hd[b],B=p.transform==="none"?E[b]:P(E[b],_);if(V){const q=V.length;for(let Y=0;Y<q;Y++)p[V[Y]]=B}else p[b]=B}return this.options.layoutId&&(p.pointerEvents=_===this?Ed(l==null?void 0:l.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var h;return(h=l.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(gT),this.root.sharedNodes.clear()}}}function kF(n){n.updateLayout()}function bF(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,l=t.source!==n.layout.source;a==="size"?qn(_=>{const E=l?t.measuredBox[_]:t.layoutBox[_],I=On(E);E.min=r[_].min,E.max=E.min+I}):rA(a,t.layoutBox,r)&&qn(_=>{const E=l?t.measuredBox[_]:t.layoutBox[_],I=On(r[_]);E.max=E.min+I,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+I)});const h=Ua();zu(h,r,t.layoutBox);const f=Ua();l?zu(f,n.applyTransform(s,!0),t.measuredBox):zu(f,r,t.layoutBox);const p=!ZR(h);let v=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:I}=_;if(E&&I){const k=vt();$u(k,t.layoutBox,E.layoutBox);const b=vt();$u(b,r,I.layoutBox),eA(k,b)||(v=!0),_.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=k,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:v})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function NF(n){Ou&&go.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function DF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function OF(n){n.clearSnapshot()}function gT(n){n.clearMeasurements()}function LF(n){n.isLayoutDirty=!1}function VF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function yT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function MF(n){n.resolveTargetDelta()}function jF(n){n.calcProjection()}function FF(n){n.resetSkewAndRotation()}function UF(n){n.removeLeadSnapshot()}function vT(n,e,t){n.translate=at(e.translate,0,t),n.scale=at(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function _T(n,e,t,r){n.min=at(e.min,t.min,r),n.max=at(e.max,t.max,r)}function BF(n,e,t,r){_T(n.x,e.x,t.x,r),_T(n.y,e.y,t.y,r)}function zF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const $F={duration:.45,ease:[.4,0,.1,1]},wT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),ET=wT("applewebkit/")&&!wT("chrome/")?Math.round:Dn;function TT(n){n.min=ET(n.min),n.max=ET(n.max)}function HF(n){TT(n.x),TT(n.y)}function rA(n,e,t){return n==="position"||n==="preserve-aspect"&&!Kj(fT(e),fT(t),.2)}function WF(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const qF=nA({attachResizeListener:(n,e)=>lc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Im={current:void 0},iA=nA({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Im.current){const n=new qF({});n.mount(window),n.setOptions({layoutScroll:!0}),Im.current=n}return Im.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),KF={pan:{Feature:uF},drag:{Feature:lF,ProjectionNode:iA,MeasureLayout:YR}};function xT(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&nt.postRender(()=>a(e,bc(e)))}class GF extends Vs{mount(){const{current:e}=this.node;e&&(this.unmount=GM(e,t=>(xT(this.node,t,"Start"),r=>xT(this.node,r,"End"))))}unmount(){}}class QF extends Vs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kc(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IT(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&nt.postRender(()=>a(e,bc(e)))}class YF extends Vs{mount(){const{current:e}=this.node;e&&(this.unmount=JM(e,t=>(IT(this.node,t,"Start"),(r,{success:s})=>IT(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ag=new WeakMap,Sm=new WeakMap,XF=n=>{const e=Ag.get(n.target);e&&e(n)},JF=n=>{n.forEach(XF)};function ZF({root:n,...e}){const t=n||document;Sm.has(t)||Sm.set(t,{});const r=Sm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(JF,{root:n,...e})),r[s]}function e5(n,e,t){const r=ZF(e);return Ag.set(n,t),r.observe(n),()=>{Ag.delete(n),r.unobserve(n)}}const t5={some:0,all:1};class n5 extends Vs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:t5[s]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:v,onViewportLeave:_}=this.node.getProps(),E=p?v:_;E&&E(f)};return e5(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(r5(e,t))&&this.startObserver()}unmount(){}}function r5({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const i5={inView:{Feature:n5},tap:{Feature:YF},focus:{Feature:QF},hover:{Feature:GF}},s5={layout:{ProjectionNode:iA,MeasureLayout:YR}},Pg={current:null},sA={current:!1};function o5(){if(sA.current=!0,!!Oy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pg.current=n.matches;n.addListener(e),e()}else Pg.current=!1}const a5=[...kR,tn,Os],l5=n=>a5.find(CR(n)),ST=new WeakMap;function u5(n,e,t){for(const r in e){const s=e[r],a=t[r];if(sn(s))n.addValue(r,s);else if(sn(a))n.addValue(r,oc(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,oc(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const RT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class c5{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=av,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const I=Hr.now();this.renderScheduledAt<I&&(this.renderScheduledAt=I,nt.render(this.render,!1,!0))};const{latestValues:f,renderState:p,onUpdate:v}=l;this.onUpdate=v,this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=_f(t),this.isVariantNode=jS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(t,{},this);for(const I in E){const k=E[I];f[I]!==void 0&&sn(k)&&k.set(f[I],!1)}}mount(e){this.current=e,ST.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),sA.current||o5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ST.delete(this.current),this.projection&&this.projection.unmount(),Ds(this.notifyUpdate),Ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bo.has(e),s=t.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gl){const t=gl[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<RT.length;r++){const s=RT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=u5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=oc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(AR(s)||vR(s))?s=parseFloat(s):!l5(s)&&Os.test(t)&&(s=IR(e,t)),this.setBaseTarget(e,sn(s)?s.get():s)),sn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=By(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!sn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new tv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class oA extends c5{constructor(){super(...arguments),this.KeyframeResolver=bR}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function h5(n){return window.getComputedStyle(n)}class d5 extends oA{constructor(){super(...arguments),this.type="html",this.renderInstance=KS}readValueFromInstance(e,t){if(Bo.has(t)){const r=ov(t);return r&&r.default||0}else{const r=h5(e),s=(HS(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return GR(e,t)}build(e,t,r){Hy(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Gy(e,t,r)}}class f5 extends oA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Bo.has(t)){const r=ov(t);return r&&r.default||0}return t=GS.has(t)?t:jy(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return XS(e,t,r)}build(e,t,r){Wy(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){QS(e,t,r,s)}mount(e){this.isSVGTag=Ky(e.tagName),super.mount(e)}}const p5=(n,e)=>Uy(n)?new f5(e):new d5(e,{allowProjection:n!==C.Fragment}),m5=BM({...jj,...i5,...KF,...s5},p5),Ms=nM(m5),g5=({children:n})=>T.jsxs("div",{className:"flex",children:[T.jsx(WV,{}),T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full tablet:mt-12",children:n})]}),y5=({children:n})=>{const e=new CP({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}});return T.jsx(DV,{basename:"/BookHub",children:T.jsx(OP,{client:e,children:T.jsx(yL,{children:T.jsx(JP,{children:n})})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ss=function(){return Ss=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ss.apply(this,arguments)};function v5(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}var _5=function(){return Math.random().toString(36).substring(6)},w5=function(n){var e=n.animate,t=e===void 0?!0:e,r=n.backgroundColor,s=r===void 0?"#f5f6f7":r,a=n.backgroundOpacity,l=a===void 0?1:a,h=n.baseUrl,f=h===void 0?"":h,p=n.children,v=n.foregroundColor,_=v===void 0?"#eee":v,E=n.foregroundOpacity,I=E===void 0?1:E,k=n.gradientRatio,b=k===void 0?2:k,P=n.uniqueKey,V=n.rtl,B=V===void 0?!1:V,q=n.speed,Y=q===void 0?1.2:q,Z=n.style,se=Z===void 0?{}:Z,D=n.title,R=D===void 0?"Loading...":D,A=n.beforeMask,L=A===void 0?null:A,j=v5(n,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","rtl","speed","style","title","beforeMask"]),z=P||_5(),O="".concat(z,"-diff"),Qe="".concat(z,"-animated-diff"),wt="".concat(z,"-aria"),It=B?{transform:"scaleX(-1)"}:null,Re="".concat(Y,"s"),ie="".concat(b*-1," 0"),ge="".concat(b," 0");return C.createElement("svg",Ss({"aria-labelledby":wt,role:"img",style:Ss(Ss({},se),It)},j),R?C.createElement("title",{id:wt},R):null,L&&C.isValidElement(L)?L:null,C.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url(".concat(f,"#").concat(O,")"),style:{fill:"url(".concat(f,"#").concat(Qe,")")}}),C.createElement("defs",null,C.createElement("clipPath",{id:O},p),C.createElement("linearGradient",{id:Qe,gradientTransform:"translate(".concat(ie,")")},C.createElement("stop",{offset:"0%",stopColor:s,stopOpacity:l}),C.createElement("stop",{offset:"50%",stopColor:_,stopOpacity:I}),C.createElement("stop",{offset:"100%",stopColor:s,stopOpacity:l}),t&&C.createElement("animateTransform",{attributeName:"gradientTransform",type:"translate",values:"".concat(ie,"; 0 0; ").concat(ge),dur:Re,repeatCount:"indefinite"}))))},aA=function(n){return n.children?C.createElement(w5,Ss({},n)):C.createElement(E5,Ss({},n))},E5=function(n){return C.createElement(aA,Ss({viewBox:"0 0 476 124"},n),C.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),C.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),C.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),C.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),C.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),C.createElement("circle",{cx:"20",cy:"20",r:"20"}))};const hv=n=>T.jsxs(aA,{viewBox:"0 0 400 300",width:1200,height:800,title:"Loading books...",...n,children:[T.jsx("rect",{x:"42.84",y:"9.93",rx:"5",ry:"5",width:"143.55",height:"86.59"}),T.jsx("rect",{x:"192.84",y:"9.67",rx:"0",ry:"0",width:"148.72",height:"12.12"}),T.jsx("rect",{x:"192.84",y:"25.67",rx:"0",ry:"0",width:"89",height:"9"}),T.jsx("rect",{x:"42.84",y:"107",rx:"5",ry:"5",width:"143.55",height:"86.59"}),T.jsx("rect",{x:"192.84",y:"107",rx:"0",ry:"0",width:"148.72",height:"12.12"}),T.jsx("rect",{x:"192.84",y:"123",rx:"0",ry:"0",width:"89",height:"9"})]}),T5=()=>T.jsx("div",{className:"flex flex-col items-center justify-center min-h-[600px] p-8",children:T.jsxs(Ms.div,{className:"text-center space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[T.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:" !"}),T.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:",     "}),T.jsxs("div",{className:"flex gap-4 justify-center pt-4",children:[T.jsx(Er,{to:"/login",children:T.jsx(Jn,{type:"primary",size:"large",children:""})}),T.jsx(Er,{to:"/signup",children:T.jsx(Jn,{type:"outline",size:"large",children:""})})]})]})}),x5=({children:n})=>{const{user:e,loading:t}=gS();return t?T.jsx(hv,{}):e?n:T.jsx(T5,{})},I5=()=>T.jsx("div",{className:"bg-hero bg-cover bg-no-repeat bg-center text-white py-20",children:T.jsxs("div",{className:"container mx-auto text-center",children:[T.jsx("h1",{className:"font-josefin text-5xl font-bold mb-4 mobile:text-3xl",children:"   BookHub"}),T.jsx("p",{className:"text-xl mb-8 mobile:text-base",children:"      "}),T.jsx(Er,{to:"/catalog",children:T.jsx(Jn,{size:"large",children:"  "})})]})}),S5=()=>{const n=[{icon:T.jsx(bg,{className:"w-16 h-16 text-violet-500 flex items-center"}),title:"  ",description:"    "},{icon:T.jsx(W1,{className:"w-16 h-16 text-violet-500 flex items-center"}),title:" ",description:"      "},{icon:T.jsx(nP,{className:"w-16 h-16 text-violet-500 flex items-center"}),title:" 24/7",description:"    "}];return T.jsx("div",{className:"bg-gray-50 py-16 px-6",children:T.jsxs("div",{className:"container mx-auto",children:[T.jsx("h2",{className:"text-3xl font-bold text-gray-800  text-center mb-12 mobile:text-2xl",children:"  ?"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((e,t)=>T.jsxs("div",{className:"text-center border p-8  rounded-lg shadow-xl cursor-pointer hover:border-spacing-10  hover:shadow-violet-200 transition-all duration-300",children:[T.jsx("div",{className:"text-4xl mb-4",children:T.jsx("div",{className:"flex justify-center",children:e.icon})}),T.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),T.jsx("p",{className:"text-gray-600",children:e.description})]},t))})]})})},R5=()=>{const n=[{name:" ",photo:"/assets/maria.jpg",text:" !      ."},{name:" ",photo:"/assets/ivan.jpg",text:"      . !"}];return T.jsxs("div",{className:"container mx-auto py-16 px-6",children:[T.jsx("h2",{className:"text-3xl font-bold text-gray-800  text-center mb-12",children:"   "}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((e,t)=>T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl border border-gray-300 hover:border-violet-400 transition-all duration-300 cursor-pointer",children:[T.jsxs("div",{className:"flex items-center mb-4",children:[T.jsx("img",{src:e.photo,alt:e.name,className:"w-24 h-24 rounded-full mr-4"}),T.jsx("h3",{className:"text-xl font-semibold",children:e.name})]}),T.jsx("p",{className:"text-gray-600",children:e.text})]},t))})]})},A5=()=>T.jsx("footer",{className:"bg-gradient-to-br from-violet-700 via-violet-600 to-purple-600 text-white",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[T.jsx(bg,{className:"h-8 w-8"}),T.jsx("span",{className:"text-2xl font-bold",children:"BookHub"})]}),T.jsx("p",{className:"text-violet-200",children:"     "})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-lg mb-4",children:""}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(iP,{className:"h-5 w-5"}),T.jsx("span",{children:"+7 (999) 123-45-67"})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(K1,{className:"h-5 w-5"}),T.jsx("span",{children:"info@mindbooks.ru"})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(eP,{className:"h-5 w-5"}),T.jsx("span",{children:". , . , 42"})]})]})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-lg mb-4",children:""}),T.jsxs("ul",{className:"space-y-2",children:[T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-200 transition-colors",children:""})}),T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-200 transition-colors",children:""})}),T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-200 transition-colors",children:" "})}),T.jsx("li",{children:T.jsx("a",{href:"#",className:"hover:text-violet-200 transition-colors",children:""})})]})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-lg mb-4",children:"  "}),T.jsxs("form",{className:"flex gap-2",children:[T.jsx("input",{type:"email",placeholder:"Email",className:"px-4 py-2 rounded bg-violet-800 text-white placeholder-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-400"}),T.jsx("button",{className:"px-4 py-2 bg-violet-500 rounded hover:bg-violet-400 transition-colors",children:"OK"})]})]})]}),T.jsx("div",{className:"border-t border-violet-500 mt-12 pt-8 text-center text-violet-200",children:T.jsx("p",{children:" 2025 MindBooks.   ."})})]})}),lA=({id:n,title:e,author:t,cover:r,price:s,currency:a,publishedDate:l,publisher:h,pageCount:f,categories:p,pdfAvailable:v,epubAvailable:_})=>{const{state:E,dispatch:I}=C.useContext(Di),k=()=>{I({type:"ADD_TO_CART",payload:{id:n,title:e,cover:r,price:s,quantity:1}})},b=()=>{I({type:"ADD_TO_FAVORITES",payload:{id:n,title:e,cover:r,price:s}})};return T.jsxs("div",{className:"flex bg-white items-center shadow-md rounded-lg overflow-hidden w-[660px] mx-auto relative mobile:w-[300px] mobile:flex-col",children:[T.jsx("div",{className:"h-[200px] w-32 bg-gray-200 flex  justify-center flex-shrink-0",children:r?T.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover",loading:"lazy"}):T.jsx("div",{className:"text-gray-500 text-sm",children:" "})}),T.jsxs("div",{className:"flex flex-col p-4 flex-grow",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-base text-wrap font-semibold text-gray-900 line-clamp-3 text-ellipsis",children:e}),T.jsxs("p",{className:"text-sm text-gray-500 mb-2 truncate",children:[": ",t]})]}),T.jsx("p",{className:"text-md font-bold text-gray-800 mb-3",children:s?`${s} ${a}`:"  "}),T.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[T.jsxs("p",{children:[": ",l||" "]}),T.jsxs("p",{children:[": ",h||" "]}),T.jsxs("p",{children:[": ",f||"N/A"]}),T.jsxs("p",{className:"truncate",children:[": ",(p==null?void 0:p.join(", "))||""]})]}),T.jsx("div",{className:"mt-4 flex gap-2",children:T.jsx(Er,{to:`/catalog/${n}`,className:"text-xs text-violet-500 hover:underline",children:T.jsx(Jn,{size:"small",type:"secondary",children:""})})}),T.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["PDF: ",v?"":""," | EPUB:"," ",_?"":""]})]}),T.jsxs("div",{className:"flex absolute bottom-5 right-5 gap-4",children:[T.jsx("button",{onClick:b,className:"hover:text-violet-600 transition",children:T.jsx(Ng,{className:`h-6 w-6 ${E.favorites.some(P=>P.id===n)?"text-violet-500":""}`})}),s&&T.jsx("button",{onClick:k,className:"hover:text-violet-600 transition",children:T.jsx(zT,{className:`h-6 w-6 ${E.cart.some(P=>P.id===n)?"text-violet-500":""}`})})]})]})},P5=()=>{var r;const{books:n,isLoading:e,isError:t}=pc();return T.jsxs("div",{className:"container mx-auto py-16 mobile:py-8",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"font-josefin text-4xl font-bold text-gray-800 mb-4 mobile:text-2xl",children:" "}),T.jsx("div",{className:"w-24 h-1 bg-violet-500 mx-auto"})]}),T.jsxs("div",{className:"flex flex-wrap gap-8 justify-center sm:m-2",children:[e&&T.jsx(hv,{}),t&&T.jsx("p",{className:"text-center text-red-500",children:"   "}),(r=n==null?void 0:n.items)==null?void 0:r.slice(0,4).map(s=>{var a,l,h,f;return T.jsx(lA,{id:s.id,title:s.volumeInfo.title,author:(a=s.volumeInfo.authors)==null?void 0:a[0],cover:(l=s.volumeInfo.imageLinks)==null?void 0:l.thumbnail,price:(h=s.saleInfo.listPrice)==null?void 0:h.amount,currency:(f=s.saleInfo.listPrice)==null?void 0:f.currencyCode},s.id)})]}),T.jsx("div",{className:"text-center mt-16",children:T.jsx(Er,{to:"/catalog",children:T.jsxs("button",{className:"bg-violet-600 text-white px-10 py-4 rounded-full font-semibold hover:bg-violet-700 transform hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center mx-auto space-x-2",children:[T.jsx("span",{children:"  "}),T.jsx(z1,{className:"w-6 h-6"})]})})})]})},C5=()=>T.jsxs(T.Fragment,{children:[T.jsx(I5,{}),T.jsx(P5,{}),T.jsx(S5,{}),T.jsx(R5,{}),T.jsx(A5,{})]}),k5=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(C5,{})}),b5=[{id:1,value:"title",label:""},{id:2,value:"authors",label:""},{id:3,value:"categories",label:""},{id:4,value:"publisher",label:""}],N5={authors:(n,e)=>{var t;return(t=n.volumeInfo.authors)==null?void 0:t.some(r=>r.toLowerCase().includes(e.toLowerCase()))},categories:(n,e)=>{var t;return(t=n.volumeInfo.categories)==null?void 0:t.some(r=>r.toLowerCase().includes(e.toLowerCase()))},publisher:(n,e)=>{var t;return(t=n.volumeInfo.publisher)==null?void 0:t.toLowerCase().includes(e.toLowerCase())},title:(n,e)=>{var t;return(t=n.volumeInfo.title)==null?void 0:t.toLowerCase().includes(e.toLowerCase())}},D5=({newFilteredBooks:n})=>{const{books:e}=pc(),[t,r]=C.useState(""),[s,a]=C.useState("title");C.useEffect(()=>{if(!(e!=null&&e.items))return;if(t.trim()===""){n(e);return}const h=e.items.filter(f=>N5[s](f,t));n({...e,items:h})},[t,e,s]);const l=()=>{r(""),a("title")};return T.jsxs("div",{className:"flex items-center justify-center pt-10 gap-4 px-8 mx-auto space-x-4 mobile:flex-col sm:flex-col xl:flex-row",children:[T.jsx("input",{type:"text",value:t,onChange:h=>r(h.target.value),placeholder:"   ",className:"border border-gray-300 max-w-[700px] w-full rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-violet-500"}),T.jsxs("div",{className:"flex gap-4 items-center",children:[T.jsx("span",{className:"text-gray-700 mobile:text-sm",children:" "}),T.jsx("select",{value:s,onChange:h=>a(h.target.value),className:"border border-violet-300 rounded-md p-2 focus:outline-none text-violet-800 focus:ring-2 bg-violet-50 focus:ring-violet-500  cursor-pointer mobile:text-sm",children:b5.map(h=>T.jsx("option",{value:h.value,children:h.label},h.id))}),T.jsx(Jn,{type:"primary",size:"medium",onClick:l,children:""})]})]})},O5=({books:n})=>{var r;const{isLoading:e,isError:t}=pc();return T.jsxs(T.Fragment,{children:[t&&T.jsxs("div",{children:[": ",t]}),e&&T.jsx(hv,{}),((r=n.items)==null?void 0:r.length)===0&&T.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[T.jsx(Q1,{className:"w-20 h-20 text-gray-400 mb-4"}),T.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"  "}),T.jsx("p",{className:"text-gray-500",children:"   "})]})]})},L5=({books:n})=>{var e;return T.jsxs("div",{className:"p-14 flex flex-col gap-5 mobile:p-0 mobile:mt-12",children:[T.jsx(O5,{books:n}),T.jsx("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-10 w-full mx-auto",children:(e=n==null?void 0:n.items)==null?void 0:e.map(t=>{var r,s,a,l,h,f,p,v;return T.jsx(lA,{id:t.id,title:t.volumeInfo.title,author:(r=t.volumeInfo.authors)==null?void 0:r[0],cover:(s=t.volumeInfo.imageLinks)==null?void 0:s.thumbnail,price:(a=t.saleInfo.listPrice)==null?void 0:a.amount,currency:(l=t.saleInfo.listPrice)==null?void 0:l.currencyCode,publishedDate:t.volumeInfo.publishedDate,publisher:t.volumeInfo.publisher,pageCount:t.volumeInfo.pageCount,isbn:(f=(h=t.volumeInfo.industryIdentifiers)==null?void 0:h[0])==null?void 0:f.identifier,language:t.volumeInfo.language,categories:t.volumeInfo.categories,buyLink:t.saleInfo.buyLink,pdfAvailable:(p=t.accessInfo.pdf)==null?void 0:p.isAvailable,epubAvailable:(v=t.accessInfo.epub)==null?void 0:v.isAvailable,maturityRating:t.volumeInfo.maturityRating,printType:t.volumeInfo.printType},t.id)})})]})},V5=()=>{const[n,e]=C.useState([]),t=r=>{e(r)};return T.jsxs(T.Fragment,{children:[T.jsx(D5,{newFilteredBooks:t}),T.jsx(L5,{books:n})]})},M5=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(V5,{})}),j5=()=>T.jsx("div",{className:"w-auto flex justify-center items-center min-h-[70vh]",children:T.jsxs("div",{className:"w-4/5 mx-auto bg-white rounded-lg shadow-lg p-8 text-center",children:[T.jsx("div",{className:"mb-8",children:T.jsx(Ng,{className:"w-24 h-24 mx-auto text-gray-300"})}),T.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 mobile:text-2xl",children:"  "}),T.jsx("p",{className:"text-gray-600 mb-8 mobile:text-md",children:" ,   !"}),T.jsx(Er,{to:"/catalog",children:T.jsx(Jn,{type:"primary",size:"large",children:" "})})]})}),F5=({favoriteProducts:n})=>{const{dispatch:e}=C.useContext(Di),t=r=>{e({type:"REMOVE_FROM_FAVORITES",payload:r})};return T.jsx("div",{className:"p-14 flex gap-10 mobile:p-4",children:T.jsxs("div",{className:"mx-auto bg-white rounded-lg shadow-lg p-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:""}),T.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded-t-lg p-4 border-b",children:[T.jsx("div",{className:"w-3/5 text-gray-600 font-semibold",children:""}),T.jsx("div",{className:"w-1/5 text-center text-gray-600 font-semibold mobile:hidden",children:""}),T.jsx("div",{className:"w-1/5 text-center text-gray-600 font-semibold",children:""})]}),T.jsx("div",{className:"divide-y",children:n.map((r,s)=>T.jsxs("div",{className:"flex justify-between items-center p-4 hover:bg-gray-50 transition",children:[T.jsxs("div",{className:"w-3/5 flex items-center gap-4 mobile:w-4/5",children:[T.jsx("img",{src:r.cover,alt:r.title,className:"w-16 h-20 object-cover rounded"}),T.jsx("span",{className:"font-medium text-gray-800 line-clamp-3 text-ellipsis",children:r.title})]}),T.jsxs("div",{className:"w-1/5 text-center text-gray-600 mobile:hidden",children:[r.price," "]}),T.jsx("div",{className:"w-1/5 flex justify-center items-center",children:T.jsx($T,{onClick:()=>t(r.id),className:"h-5 w-5 cursor-pointer hover:text-red-500 text-gray-500 duration-200"})})]},s))})]})})},U5=()=>{const{state:n}=C.useContext(Di),e=n.favorites||[];return e.length===0?T.jsx(j5,{}):T.jsx(F5,{favoriteProducts:e})},B5=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(U5,{})}),uA=async n=>{if(n)try{const e=nS(pS,"users",n.uid),t={email:n.email,displayName:n.displayName||null,photoURL:n.photoURL||null,lastLogin:nE(),createdAt:nE()};await fL(e,t,{merge:!0}),console.log("  /")}catch(e){throw console.error("  / :",e),e}},cA=()=>{const n=mf(),e=async()=>{try{const t=new _i,r=await o2(bn,t);await uA(r.user),n("/profile")}catch(t){console.error(" :",t.message)}};return T.jsxs("button",{className:`flex items-center justify-center mt-6 w-full gap-3 px-6 py-2.5\r
    bg-white text-gray-700 rounded-lg border border-gray-300\r
    hover:bg-purple-50 hover:border-purple-400 transition-all duration-200`,onClick:e,children:[T.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[T.jsx("path",{fill:"#4285F4",d:"M17.64 9.205c0-.639-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"}),T.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z"}),T.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71A5.41 5.41 0 013.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 000 9c0 1.452.348 2.827.957 4.042l3.007-2.332z"}),T.jsx("path",{fill:"#EA4335",d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 00.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"})]}),"Google"]})},hA=()=>{const[n,e]=C.useState(""),[t,r]=C.useState(""),[s,a]=C.useState(""),[l,h]=C.useState(!1),f=mf();return{email:n,setEmail:e,password:t,setPassword:r,error:s,loading:l,handleSignIn:async _=>{_.preventDefault(),a("");try{h(!0);const{user:E}=await Db(bn,n,t);E&&f("/profile",{replace:!0})}catch(E){a({"auth/invalid-email":" email ","auth/user-disabled":" ","auth/user-not-found":"  ","auth/wrong-password":" "}[E.code]||` : ${E.message}`),h(!1)}},handleSignUp:async _=>{_.preventDefault(),a("");try{h(!0);const{user:E}=await Nb(bn,n,t);await Ob(E,{url:"https://mihail-ne.github.io/BookHub/login",handleCodeInApp:!0}),a("   .    ."),f("/profile",{replace:!0}),h(!1)}catch(E){a({"auth/email-already-in-use":"   email  ","auth/invalid-email":" email ","auth/weak-password":"  "}[E.code]||` : ${E.message}`),h(!1)}}}},dA=({loading:n,children:e})=>T.jsx("button",{type:"submit",className:"flex items-center justify-center mt-6 w-full gap-3 px-4 py-3 bg-violet-600 text-white rounded-lg text-lg hover:bg-purple-500 hover:border-purple-400 transition-all duration-200 cursor-pointer",disabled:n,children:n?T.jsxs("div",{className:"flex items-center",children:[T.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"..."]}):e}),z5=()=>{const{loading:n,email:e,setEmail:t,password:r,setPassword:s,error:a,handleSignUp:l}=hA();return T.jsxs("div",{className:"w-[500px] mobile:w-[320px] mx-auto p-8 mobile:p-4 rounded-xl border border-gray-200 mt-20 mobile:mt-8",children:[T.jsx("h1",{className:"text-center font-bold text-4xl mobile:text-2xl text-gray-800",children:" "}),T.jsx("p",{className:"text-center mt-4 mobile:mt-2 text-gray-600",children:"     ,    "}),T.jsx(cA,{}),T.jsxs("div",{className:"flex items-center my-4 mobile:my-3",children:[T.jsx("div",{className:"flex-grow border-t border-gray-300"}),T.jsx("span",{className:"px-4 text-gray-500",children:"  "}),T.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),T.jsxs("form",{onSubmit:l,className:"flex flex-col gap-3",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{htmlFor:"email",className:"text-gray-800 text-lg",children:"Email"}),T.jsx("input",{className:"w-full px-4 py-2 text-gray-700 text-base bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-all duration-200 focus:outline-none focus:border-violet-400 hover:border-violet-400 outline-none",id:"email",value:e,onChange:h=>t(h.target.value),type:"email",placeholder:"example@mail.com",autoComplete:"new-password",required:!0})]}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{htmlFor:"password",className:"text-gray-800 text-lg",children:"Password"}),T.jsx("input",{className:"w-full px-4 py-2 text-gray-700 text-base bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-all duration-200 focus:outline-none focus:border-violet-400 hover:border-violet-400 outline-none",id:"password",type:"password",value:r,onChange:h=>s(h.target.value),placeholder:"Password",required:!0,minLength:6})]}),a&&T.jsx("p",{className:"text-red-500 text-center my-2",children:a}),T.jsx("div",{children:T.jsx(dA,{loading:n,children:""})})]}),T.jsx("div",{className:"mt-4 text-center text-gray-500",children:T.jsxs("span",{children:["  ?"," ",T.jsx(Er,{to:"/login",children:T.jsx("span",{className:"text-gray-800 hover:underline",children:""})})]})})]})},$5=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(z5,{})}),H5=()=>{const{loading:n,email:e,setEmail:t,password:r,setPassword:s,error:a,handleSignIn:l}=hA();return T.jsxs("div",{className:"w-[500px] mobile:w-[320px] mx-auto p-8 mobile:p-4 rounded-xl border border-gray-200 mt-20 mobile:mt-8",children:[T.jsx("h1",{className:"text-center font-bold text-4xl mobile:text-2xl text-gray-800",children:"  "}),T.jsx("p",{className:"text-center mt-4 mobile:mt-2 text-gray-600",children:"        "}),T.jsx(cA,{}),T.jsxs("div",{className:"flex items-center mt-4 mobile:mt-3",children:[T.jsx("div",{className:"flex-grow border-t border-gray-300"}),T.jsx("span",{className:"px-4 text-gray-500",children:""}),T.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a&&T.jsx("p",{className:"text-red-500 text-center my-2",children:a}),T.jsxs("form",{onSubmit:l,className:"flex flex-col gap-3 mt-4",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{htmlFor:"email",className:"text-gray-800 text-lg",children:"Email"}),T.jsx("input",{className:"w-full px-4 py-2 text-gray-700 text-base bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-all duration-200 focus:outline-none focus:border-violet-400 hover:border-violet-400 outline-none",id:"email",type:"email",placeholder:"example@mail.com",value:e,onChange:h=>t(h.target.value),required:!0})]}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{htmlFor:"password",className:"text-gray-800 text-lg",children:"Password"}),T.jsx("input",{className:"w-full px-4 py-2 text-gray-700 text-base bg-white border border-gray-300 rounded-lg placeholder-gray-400 transition-all duration-200 focus:outline-none focus:border-violet-400 hover:border-violet-400 outline-none",id:"password",type:"password",placeholder:"Password",value:r,onChange:h=>s(h.target.value),required:!0,minLength:6})]}),T.jsx(dA,{loading:n,children:""})]}),T.jsx("div",{className:"mt-4 text-center text-gray-500",children:T.jsxs("span",{children:[" ?"," ",T.jsx(Er,{to:"/signup",children:T.jsx("span",{className:"text-gray-800 hover:underline",children:""})})]})})]})},W5=n=>n?new Date(n.seconds*1e3).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}):"";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firebasestorage.googleapis.com",pA="storageBucket",q5=2*60*1e3,K5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends Gr{constructor(e,t,r=0){super(Rm(e),`Firebase Storage: ${t} (${Rm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function Rm(n){return"storage/"+n}function dv(){const n="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,n)}function G5(n){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Q5(n){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Y5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,n)}function X5(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function J5(n){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Z5(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eU(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function tU(n){return new mt(pt.INVALID_URL,"Invalid URL '"+n+"'.")}function nU(n){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function rU(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pA+"' property when initializing the app?")}function iU(){return new mt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sU(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oU(n){return new mt(pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cg(n){return new mt(pt.INVALID_ARGUMENT,n)}function mA(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function aU(n){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hu(n,e){return new mt(pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Su(n){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Nn.makeFromUrl(e,t)}catch{return new Nn(e,"")}if(r.path==="")return r;throw nU(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function p(Y){Y.path_=decodeURIComponent(Y.path)}const v="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${v}/b/${s}/o${E}`,"i"),k={bucket:1,path:3},b=t===fA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",V=new RegExp(`^https?://${b}/${s}/${P}`,"i"),q=[{regex:h,indices:f,postModify:a},{regex:I,indices:k,postModify:p},{regex:V,indices:{bucket:1,path:2},postModify:p}];for(let Y=0;Y<q.length;Y++){const Z=q[Y],se=Z.regex.exec(e);if(se){const D=se[Z.indices.bucket];let R=se[Z.indices.path];R||(R=""),r=new Nn(D,R),Z.postModify(r);break}}if(r==null)throw tU(e);return r}}class lU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(n,e,t){let r=1,s=null,a=null,l=!1,h=0;function f(){return h===2}let p=!1;function v(...P){p||(p=!0,e.apply(null,P))}function _(P){s=setTimeout(()=>{s=null,n(I,f())},P)}function E(){a&&clearTimeout(a)}function I(P,...V){if(p){E();return}if(P){E(),v.call(null,P,...V);return}if(f()||l){E(),v.call(null,P,...V);return}r<64&&(r*=2);let q;h===1?(h=2,q=0):q=(r+Math.random())*1e3,_(q)}let k=!1;function b(P){k||(k=!0,E(),!p&&(s!==null?(P||(h=2),clearTimeout(s),_(0)):P||(h=1)))}return _(0),a=setTimeout(()=>{l=!0,b(!0)},t),b}function cU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(n){return n!==void 0}function dU(n){return typeof n=="object"&&!Array.isArray(n)}function fv(n){return typeof n=="string"||n instanceof String}function AT(n){return pv()&&n instanceof Blob}function pv(){return typeof Blob<"u"}function PT(n,e,t,r){if(r<e)throw Cg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Po;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Po||(Po={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,t,r,s,a,l,h,f,p,v,_,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=_,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,k)=>{this.resolve_=I,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ld(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Po.NO_ERROR,f=a.getStatus();if(!h||fU(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Po.ABORT;r(!1,new ld(!1,null,v));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new ld(p,a))})},t=(r,s)=>{const a=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());hU(f)?a(f):a()}catch(f){l(f)}else if(h!==null){const f=dv();f.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,f)):l(f)}else if(s.canceled){const f=this.appDelete_?mA():eU();l(f)}else{const f=Z5();l(f)}};this.canceled_?t(!1,new ld(!1,null,!0)):this.backoffId_=uU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ld{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function gU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function _U(n,e,t,r,s,a,l=!0){const h=gA(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return yU(p,e),mU(p,t),gU(p,a),vU(p,r),new pU(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EU(...n){const e=wU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(pv())return new Blob(n);throw new mt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(n){if(typeof atob>"u")throw oU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Am{constructor(e,t){this.data=e,this.contentType=t||null}}function IU(n,e){switch(n){case jr.RAW:return new Am(yA(e));case jr.BASE64:case jr.BASE64URL:return new Am(vA(n,e));case jr.DATA_URL:return new Am(RU(e),AU(e))}throw dv()}function yA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function SU(n){let e;try{e=decodeURIComponent(n)}catch{throw Hu(jr.DATA_URL,"Malformed data URL.")}return yA(e)}function vA(n,e){switch(n){case jr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Hu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Hu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=xU(e)}catch(s){throw s.message.includes("polyfill")?s:Hu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class _A{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Hu(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=PU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function RU(n){const e=new _A(n);return e.base64?vA(jr.BASE64,e.rest):SU(e.rest)}function AU(n){return new _A(n).contentType}function PU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){let r=0,s="";AT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(AT(this.data_)){const r=this.data_,s=TU(r,e,t);return s===null?null:new ds(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ds(r,!0)}}static getBlob(...e){if(pv()){const t=e.map(r=>r instanceof ds?r.data_:r);return new ds(EU.apply(null,t))}else{const t=e.map(l=>fv(l)?IU(jr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)s[a++]=l[h]}),new ds(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){let e;try{e=JSON.parse(n)}catch{return null}return dU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function kU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function EA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n,e){return e}class hn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||bU}}let ud=null;function NU(n){return!fv(n)||n.length<2?n:EA(n)}function TA(){if(ud)return ud;const n=[];n.push(new hn("bucket")),n.push(new hn("generation")),n.push(new hn("metageneration")),n.push(new hn("name","fullPath",!0));function e(a,l){return NU(l)}const t=new hn("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const s=new hn("size");return s.xform=r,n.push(s),n.push(new hn("timeCreated")),n.push(new hn("updated")),n.push(new hn("md5Hash",null,!0)),n.push(new hn("cacheControl",null,!0)),n.push(new hn("contentDisposition",null,!0)),n.push(new hn("contentEncoding",null,!0)),n.push(new hn("contentLanguage",null,!0)),n.push(new hn("contentType",null,!0)),n.push(new hn("metadata","customMetadata",!0)),ud=n,ud}function DU(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new Nn(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function OU(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return DU(r,n),r}function xA(n,e,t){const r=wA(e);return r===null?null:OU(n,r,t)}function LU(n,e,t,r){const s=wA(e);if(s===null||!fv(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const v=n.bucket,_=n.fullPath,E="/b/"+l(v)+"/o/"+l(_),I=mv(E,t,r),k=gA({alt:"media",token:p});return I+k})[0]}function VU(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class IA{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){if(!n)throw dv()}function MU(n,e){function t(r,s){const a=xA(n,s,e);return SA(a!==null),a}return t}function jU(n,e){function t(r,s){const a=xA(n,s,e);return SA(a!==null),LU(a,s,n.host,n._protocol)}return t}function RA(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=X5():s=Y5():t.getStatus()===402?s=Q5(n.bucket):t.getStatus()===403?s=J5(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function FU(n){const e=RA(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=G5(n.path)),a.serverResponse=s.serverResponse,a}return t}function UU(n,e,t){const r=e.fullServerUrl(),s=mv(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,h=new IA(s,a,jU(n,t),l);return h.errorHandler=FU(e),h}function BU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function zU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=BU(null,e)),r}function $U(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let q="";for(let Y=0;Y<2;Y++)q=q+Math.random().toString().slice(2);return q}const f=h();l["Content-Type"]="multipart/related; boundary="+f;const p=zU(e,r,s),v=VU(p,t),_="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+f+"--",I=ds.getBlob(_,r,E);if(I===null)throw iU();const k={name:p.fullPath},b=mv(a,n.host,n._protocol),P="POST",V=n.maxUploadRetryTime,B=new IA(b,P,MU(n,t),V);return B.urlParams=k,B.headers=l,B.body=I.uploadData(),B.errorHandler=RA(e),B}class HU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Po.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Po.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Po.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Su("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Su("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Su("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Su("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Su("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class WU extends HU{initXhr(){this.xhr_.responseType="text"}}function AA(){return new WU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t){this._service=e,t instanceof Nn?this._location=t:this._location=Nn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Oo(e,t)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EA(this._location.path)}get storage(){return this._service}get parent(){const e=CU(this._location.path);if(e===null)return null;const t=new Nn(this._location.bucket,e);return new Oo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw aU(e)}}function qU(n,e,t){n._throwIfRoot("uploadBytes");const r=$U(n.storage,n._location,TA(),new ds(e,!0),t);return n.storage.makeRequestWithTokens(r,AA).then(s=>({metadata:s,ref:n}))}function KU(n){n._throwIfRoot("getDownloadURL");const e=UU(n.storage,n._location,TA());return n.storage.makeRequestWithTokens(e,AA).then(t=>{if(t===null)throw sU();return t})}function GU(n,e){const t=kU(n._location.path,e),r=new Nn(n._location.bucket,t);return new Oo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){return/^[A-Za-z]+:\/\//.test(n)}function YU(n,e){return new Oo(n,e)}function PA(n,e){if(n instanceof gv){const t=n;if(t._bucket==null)throw rU();const r=new Oo(t,t._bucket);return e!=null?PA(r,e):r}else return e!==void 0?GU(n,e):n}function XU(n,e){if(e&&QU(e)){if(n instanceof gv)return YU(n,e);throw Cg("To use ref(service, url), the first argument must be a Storage instance.")}else return PA(n,e)}function CT(n,e){const t=e==null?void 0:e[pA];return t==null?null:Nn.makeFromBucketSpec(t,n)}function JU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:ux(s,n.app.options.projectId))}class gv{constructor(e,t,r,s,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=fA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q5,this._maxUploadRetryTime=K5,this._requests=new Set,s!=null?this._bucket=Nn.makeFromBucketSpec(s,this._host):this._bucket=CT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=CT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oo(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new lU(mA());{const l=_U(e,this._appId,r,s,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const kT="@firebase/storage",bT="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="storage";function ZU(n,e,t){return n=Dt(n),qU(n,e,t)}function e3(n){return n=Dt(n),KU(n)}function t3(n,e){return n=Dt(n),XU(n,e)}function n3(n=Fg(),e){n=Dt(n);const r=Xd(n,CA).getImmediate({identifier:e}),s=ox("storage");return s&&r3(r,...s),r}function r3(n,e,t,r={}){JU(n,e,t,r)}function i3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new gv(t,r,s,e,Lo)}function s3(){ko(new Rs(CA,i3,"PUBLIC").setMultipleInstances(!0)),Fr(kT,bT,""),Fr(kT,bT,"esm2017")}s3();const o3=()=>{const n=async e=>{const t=e.target.files[0];if(t)try{const r=n3(),s=t3(r,`profile-photos/${bn.currentUser.uid}`),a={contentType:t.type,"Access-Control-Allow-Origin":"*"};await ZU(s,t,a);const l=await e3(s),h=bn.currentUser;await Vb(h,{photoURL:l}),await uA(h)}catch(r){console.error(" :",r)}};return T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"hidden",id:"photo-upload"}),T.jsx("label",{htmlFor:"photo-upload",className:"flex items-center justify-center size-24 rounded-full bg-slate-100 cursor-pointer hover:border hover:border-slate-300 transition-all duration-200",children:T.jsx(oP,{className:"h-8 w-8 text-slate-800"})})]})},a3=()=>{var t,r;const[n,e]=C.useState(null);return C.useEffect(()=>{(async()=>{if(bn.currentUser){const a=nS(pS,"users",bn.currentUser.uid),l=await hL(a);l.exists()&&e(l.data())}})()},[]),T.jsx("div",{className:"max-w-4xl mx-auto p-6",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[T.jsxs("div",{className:"flex items-center space-x-6 mb-8 gap-8 mobile:flex-col ",children:[bn.currentUser.photoURL?T.jsx("div",{className:"relative group",children:T.jsx("img",{src:bn.currentUser.photoURL,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"})}):T.jsx(o3,{}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:(t=bn.currentUser)==null?void 0:t.displayName}),T.jsx("p",{className:"text-gray-800",children:(r=bn.currentUser)==null?void 0:r.email})]})]}),n&&T.jsx("div",{className:"border-t pt-6",children:T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[T.jsx("p",{className:"text-sm text-gray-500",children:" "}),T.jsx("p",{className:"font-medium",children:W5(n.createdAt)})]}),T.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[T.jsx("p",{className:"text-sm text-gray-500",children:""}),T.jsx("p",{className:"font-medium text-green-600",children:n.status||""})]})]})})]})})},l3=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(a3,{})}),u3=()=>{var l,h,f,p,v;const{id:n}=GL(),{books:e}=pc(),{dispatch:t}=C.useContext(Di),r=(l=e==null?void 0:e.items)==null?void 0:l.find(_=>_.id===n),s=()=>{var _;t({type:"ADD_TO_CART",payload:{id:r.id,title:r.volumeInfo.title,cover:(_=r.volumeInfo.imageLinks)==null?void 0:_.thumbnail,price:r.saleInfo.listPrice.amount,quantity:1}})},a=()=>{var _,E;t({type:"ADD_TO_FAVORITES",payload:{id:r.id,title:r.volumeInfo.title,cover:(_=r.volumeInfo.imageLinks)==null?void 0:_.thumbnail,price:(E=r.saleInfo.listPrice)==null?void 0:E.amount}})};return T.jsx("div",{className:"max-w-4xl mx-auto p-14 mobile:p-4",children:T.jsxs("div",{className:"flex mobile:flex-col gap-8 mobile:gap-4",children:[T.jsxs("div",{className:"w-1/3 mobile:w-full",children:[T.jsx("img",{src:(h=r.volumeInfo.imageLinks)==null?void 0:h.thumbnail,alt:r.volumeInfo.title,className:"w-full rounded-lg shadow-lg mobile:max-w-[200px] mobile:mx-auto"}),r.saleInfo.listPrice&&T.jsx(Jn,{onClick:s,type:"primary",size:"medium",className:"w-full mt-3",children:"  "}),T.jsx(Jn,{onClick:a,type:"primary",size:"medium",className:"w-full mt-2",children:"  "})]}),T.jsxs("div",{className:"w-2/3 mobile:w-full",children:[T.jsx("h1",{className:"text-3xl mobile:text-xl font-bold mb-4",children:r.volumeInfo.title}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("p",{className:"text-xl mobile:text-lg text-gray-600",children:[": ",(f=r.volumeInfo.authors)==null?void 0:f.join(", ")]}),T.jsxs("div",{className:"flex mobile:flex-col gap-4 mobile:gap-2 text-sm text-gray-500",children:[T.jsxs("span",{children:[": ",r.volumeInfo.publisher]}),T.jsxs("span",{children:[": ",r.volumeInfo.publishedDate]}),T.jsxs("span",{children:[": ",r.volumeInfo.pageCount]})]}),r.saleInfo.listPrice&&T.jsxs("p",{className:"text-2xl mobile:text-xl font-bold text-violet-600",children:[r.saleInfo.listPrice.amount," ",r.saleInfo.listPrice.currencyCode]}),T.jsxs("div",{className:"bg-gray-50 p-4 mobile:p-3 rounded-lg",children:[T.jsx("h2",{className:"font-bold mb-2",children:":"}),T.jsx("p",{className:"text-gray-700 mobile:text-sm",children:r.volumeInfo.description})]}),T.jsxs("div",{className:"grid grid-cols-2 mobile:grid-cols-1 gap-4 text-sm",children:[T.jsxs("div",{children:[T.jsx("strong",{children:"ISBN:"})," ",(p=r.volumeInfo.industryIdentifiers)==null?void 0:p[0].identifier]}),T.jsxs("div",{children:[T.jsx("strong",{children:":"})," ",r.volumeInfo.language]}),T.jsxs("div",{children:[T.jsx("strong",{children:":"})," ",(v=r.volumeInfo.categories)==null?void 0:v.join(", ")]}),T.jsxs("div",{children:[T.jsx("strong",{children:" :"})," ",r.volumeInfo.maturityRating]})]}),T.jsxs("div",{className:"flex flex-wrap gap-4 mt-4",children:[r.accessInfo.pdf.isAvailable&&T.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded",children:"PDF "}),r.accessInfo.epub.isAvailable&&T.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded",children:"EPUB "})]}),T.jsx("a",{href:r.volumeInfo.previewLink,className:"text-violet-500 hover:underline block mobile:text-center",target:"_blank",rel:"noopener noreferrer",children:" "})]})]})]})})},c3=()=>T.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:T.jsxs("div",{className:"w-4/5 mx-auto bg-white rounded-lg shadow-lg p-8 text-center",children:[T.jsx("div",{className:"mb-8",children:T.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),T.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 mobile:text-2xl",children:"  "}),T.jsx("p",{className:"text-gray-600 mb-8 mobile:text-md",children:"     - !"}),T.jsx(Er,{to:"/catalog",children:T.jsx(Jn,{type:"primary",size:"large",children:"  "})})]})}),h3=({items:n})=>{const e=n.reduce((s,a)=>{const l=a.price*a.quantity||0;return s+l},0),t=500,r=e+t;return T.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-xl mx-auto w-full",children:[T.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:" "}),T.jsxs("div",{className:"space-y-4 mb-6",children:[T.jsxs("div",{className:"flex justify-between text-gray-600",children:[T.jsx("span",{children:" :"}),T.jsxs("span",{children:[e.toLocaleString()," "]})]}),T.jsxs("div",{className:"flex justify-between text-gray-600",children:[T.jsx("span",{children:":"}),T.jsxs("span",{children:[t.toLocaleString()," "]})]}),T.jsx("div",{className:"h-px bg-gray-200"}),T.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-800",children:[T.jsx("span",{children:":"}),T.jsxs("span",{children:[r.toLocaleString()," "]})]})]}),T.jsx(Jn,{size:"large",type:"outline",className:"w-full",children:" "}),T.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"  ,     "})]})},d3=({item:n})=>{const{dispatch:e}=C.useContext(Di),t=()=>{e({type:"INCREMENT_QUANTITY",payload:n.id})},r=()=>{n.quantity>1&&e({type:"DECREMENT_QUANTITY",payload:n.id})},s=()=>{e({type:"REMOVE_FROM_CART",payload:n.id})};return T.jsxs("div",{className:"relative flex justify-between items-center p-4 border-b hover:bg-gray-50 transition mobile:p-1",children:[T.jsxs("div",{className:"w-2/5 flex items-center gap-4 mobile:w-4/5",children:[T.jsx("img",{src:n.cover,alt:n.title,className:"w-16 h-20 object-cover rounded"}),T.jsx("span",{className:"font-medium text-gray-800 line-clamp-3 text-ellipsis",children:n.title})]}),T.jsxs("div",{className:"w-1/5 text-center text-gray-600 mobile:hidden",children:[n.price," "]}),T.jsx("div",{className:"w-1/5 text-center mobile:hidden",children:T.jsxs("div",{className:"flex items-center justify-center gap-2",children:[T.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-gray-100",children:"-"}),T.jsx("span",{className:"w-8 text-center mobile:hidden",children:n.quantity}),T.jsx("button",{onClick:t,className:"p-1 rounded hover:bg-gray-100",children:"+"})]})}),T.jsxs("div",{className:"w-1/5 text-center font-medium text-gray-800",children:[n.price*n.quantity," "]}),T.jsx("span",{className:"absolute right-4 top-[50%] translate-y-[-50%] mobile:hidden",children:T.jsx($T,{onClick:s,className:"h-5 w-5 cursor-pointer hover:text-red-500 text-gray-500 duration-200"})})]})},f3=({cartProducts:n})=>{const{dispatch:e}=C.useContext(Di),t=()=>{e({type:"CLEAR_CART"})};return T.jsxs("div",{className:"p-8 flex flex-col 2xl:flex-row gap-10 mobile:p-3",children:[T.jsxs("div",{className:"w-4/3 mx-auto bg-white rounded-lg shadow-lg p-6",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:""}),T.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded-t-lg p-4 border-b",children:[T.jsx("div",{className:"w-2/5 text-gray-600 font-semibold",children:""}),T.jsx("div",{className:"w-1/5 text-center text-gray-600 font-semibold ",children:""}),T.jsx("div",{className:"w-1/5 text-center text-gray-600 font-semibold mobile:hidden",children:""}),T.jsx("div",{className:"w-1/5 text-center text-gray-600 font-semibold mobile:hidden",children:""})]}),T.jsx("div",{className:"divide-x",children:n.map((r,s)=>T.jsx(d3,{item:r},s))}),T.jsx("div",{className:"border-t border-gray-200 my-8",children:T.jsxs(Jn,{onClick:t,type:"danger",size:"small",className:"mt-4",children:[" "," "]})})]}),T.jsx(h3,{items:n})]})},p3=()=>{const{state:n}=C.useContext(Di),e=n.cart.map(t=>t);return T.jsx(T.Fragment,{children:e.length===0?T.jsx(c3,{}):T.jsx(f3,{cartProducts:e})})},m3=()=>T.jsx(Ms.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:T.jsx(p3,{})}),g3=()=>T.jsxs(uV,{children:[T.jsx(yi,{path:"/",element:T.jsx(k5,{})}),T.jsx(yi,{path:"/catalog",element:T.jsx(M5,{})}),T.jsx(yi,{path:"/cart",element:T.jsx(m3,{})}),T.jsx(yi,{path:"/favorites",element:T.jsx(B5,{})}),T.jsx(yi,{path:"/signup",element:T.jsx($5,{})}),T.jsx(yi,{path:"/login",element:T.jsx(H5,{})}),T.jsx(yi,{path:"/profile",element:T.jsx(x5,{children:T.jsx(l3,{})})}),T.jsx(yi,{path:"/catalog/:id",element:T.jsx(u3,{})})]});function y3(){return T.jsx(C.StrictMode,{children:T.jsx(y5,{children:T.jsx(g5,{children:T.jsx(g3,{})})})})}F1.createRoot(document.getElementById("root")).render(T.jsx(y3,{}));
